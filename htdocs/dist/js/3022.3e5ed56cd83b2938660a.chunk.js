(self.webpackChunk=self.webpackChunk||[]).push([[3022,8545],{4715:(e,t,n)=>{"use strict";n.r(t),n.d(t,{fnAjaxUpdateCallback:()=>g,fnGetLastUpdate:()=>p,fnGetSelection:()=>f,fnSetLastUpdate:()=>_,fnUpdateDataTable:()=>u,getApiFromSettings:()=>m,initDataTable:()=>c,initOfflineDataTable:()=>d,isDataTableResponse:()=>l,replacePlaceholders:()=>h});var a=n(6859),r=n.n(a),o=n(3757),s=n(1364),i=n(6211);function l(e){return"object"==typeof e&&"lastUpdate"in e&&"autoUpdate"in e&&"data"in e}async function c(e){await Promise.all([n.e(8742),n.e(8787),n.e(5665),n.e(7231)]).then(n.bind(n,264));const t=r()(e),a=t.data("settings"),s=t.data("search");a.ajax&&(a.ajax.data.lastUpdate=p(t),a.ajax.dataSrc=g(t)),a.columns.forEach((e=>e.render=i.Z[e.render]));const l=t.DataTable(a);t.dataTable().api().search(s),l.on("page",(()=>l.rows({selected:!0}).deselect())),l.on("childRow.dt",((e,t)=>(0,o.S)(t.container.get(0))))}async function d(e){await Promise.all([n.e(8742),n.e(8787),n.e(5665),n.e(7231)]).then(n.bind(n,264)),r()(e).DataTable((0,s.IR)(e))}function u(e,t){const n=r()(e).DataTable();t.data.forEach((e=>{const t=r()('tr[data-uuid="'+e.UUID+'"]');1===t.length?"remove"in e?n.row(t).remove():(n.row(t).data(e),(0,o.S)(t.get(0))):0===t.length?n.row.add(e):alert(t.length)})),n.draw(!1)}function f(e){const t=[];return r()(e+" tbody tr.selected").each((function(){const e=r()(this).attr("data-uuid");if(!e)throw new Error("Tablerow heeft geen uuid");t.push(e)})),t}function m(e){return new(r().fn.dataTable.Api)(e)}const p=e=>()=>Number(e.data("lastupdate")),_=e=>t=>e.data("lastupdate",t),g=e=>t=>{_(e)(t.lastUpdate);const n=e.DataTable();if(t.autoUpdate){const a=parseInt(t.autoUpdate,10);!isNaN(a)&&a<6e5&&setTimeout((()=>{r().post(n.ajax.url(),{lastUpdate:p(e)},(t=>{const n=e.attr("id");if(!n)throw new Error("Table heeft geen id");u(n,t),g(e)(t)}))}),a)}return function(e){const t=e.parent();if(t.hasClass("dataTables_scrollBody")){const e=t.scrollTop(),n=t.innerHeight();if(!e||!n)throw new Error("$scroll heeft geen top of height");e+n>=t[0].scrollHeight-20&&window.setTimeout((()=>{t.animate({scrollTop:t[0].scrollHeight},800)}),200)}}(e),t.data};function h(e,t){const n=/:(\w+)/g.exec(e);if(!n)return e;for(let a=1;a<n.length;a++)e=e.replace(":"+n[a],t[n[a]]);return e}},6211:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var a=n(4919),r=n.n(a),o=n(1364),s=n(4715);const i={default(e,t){if(null===e||"object"!=typeof e)return e;switch(t){case"sort":return e.sort;case"export":return e.export;default:return e.display}},bedrag:e=>(0,o.Mc)(e),check:e=>'<i class="fas fa-'+(e?"check":"xmark")+'" aria-hidden="true"></i>',aanmeldFilter:e=>e?`<i class="fas fa-key" title="Aanmeld filter actief: '${e}'" aria-hidden="true"></i>`:"",aanmeldingen:(e,t,n)=>(n.aantal_aanmeldingen||0)+" ("+n.aanmeld_limiet+")",totaalPrijs:(e,t,n)=>(0,o.Mc)(n.aantal_aanmeldingen*parseInt(n.prijs,10)),date(e){const t=r()(e);return t.isValid()?t.format("L"):e},time(e){const t=r()(e);return t.isValid()?t.format("LT"):e},datetime(e){if(Number(e)==e)return r().unix(e).format("YYYY-MM-DD HH:mm");if(!e)return"";if("<time"===e.substr(0,5))return e;if("-"===e.substr(0,1))return"Nooit";return r()(e).isValid()?r()(e).format("YYYY-MM-DD HH:mm"):e},timeago(e,t,n,a){const r=(0,s.getApiFromSettings)(a.settings).cell(a.row,a.col).node().firstChild;switch(t){case"sort":case"export":return r.dateTime;default:return e}},filesize(e,t){switch(t){case"sort":return Number(e);default:return(0,o.D9)(e)}}}},5904:(e,t,n)=>{"use strict";n.d(t,{R:()=>o});var a=n(1339),r=n.n(a);const o={el:null};let s,i,l;function c(){return document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft}function d(){return document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop}function u(e){return e.pageX?e.pageX:e.clientX?e.clientX+c():0}function f(e){return e.pageY?e.pageY:e.clientY?e.clientY+d():0}function m(e){if(!o.el)return;const t=o.el,n=u(e),a=f(e);s=t.classList.contains("savepos");const r=t.scrollTop,m=t.scrollLeft;if(t.classList.contains("dragvertical"))t.scrollTop=r+l-a;else if(t.classList.contains("draghorizontal"))t.scrollLeft=m+i-n;else{const e={left:t.offsetLeft,top:t.offsetTop};t.style.left=e.left-c()+n-i+"px",t.style.top=e.top-d()+a-l+"px"}i=n,l=a}window.addEventListener("mousedown",(function(e){const t=e.target;if(t instanceof HTMLElement){const n=t.tagName.toUpperCase(),a=getComputedStyle(t).overflow;if("DIV"!==n&&"H1"!==n||"auto"===a||"scroll"===a)return;o.el=t,void 0!==o.el&&o.el.classList.contains("dragobject")||(o.el=t.closest(".dragobject")),void 0!==o.el?(i=u(e),l=f(e),window.addEventListener("mousemove",m,!0)):o.el=null}s=!1}),!1),window.addEventListener("mouseup",(function(){if(o.el){if(window.removeEventListener("mousemove",m,!0),s){const e=o.el;let t,n;if(e.classList.contains("dragvertical")||e.classList.contains("draghorizontal"))t=e.scrollTop,n=e.scrollLeft;else{const a={top:e.offsetTop,left:e.offsetLeft};t=a.top-d(),n=a.left-c()}r().post("/tools/dragobject",{coords:{left:n,top:t},id:e.id}),s=!1}o.el=null}}),!1)},9315:(e,t,n)=>{"use strict";n.d(t,{T:()=>d,V:()=>c});var a=n(6859),r=n.n(a),o=n(9577),s=n(1339),i=n.n(s),l=n(4222);function c(e,t,n,a,s,c,d){if(a)if(a.classList.contains("noanim"))if(a.classList.contains("InlineForm"))try{Object.assign((0,l.Ys)(".FormElement:first",a).style,{backgroundImage:'url("/images/loading-fb.gif")',backgroundPosition:"center right",backgroundRepeat:"no-repeat"})}catch(e){}else a.classList.add("loading");else{const e=r()(`<i class="fas fa-spinner fa-spin" title="Laden: ${t}" aria-hidden="true"></i>`);r()(a).replaceWith(e),a=e.get(0)}i()(t,{method:e,data:n}).then((e=>{a&&(r()(a).hasClass("noanim")?r()(a).hasClass("InlineForm")&&r()(a).find(".FormElement:first").css({"background-image":"","background-position":"","background-repeat":""}):r()(a).hide(),a.classList.remove("loading")),s(e.data)})).catch((e=>{a?r()(a).replaceWith('<img alt="Mislukt" title="'+e.message+'" src="/plaetjes/famfamfam/cancel.png" />'):(0,o.I)(),c&&(e.message.startsWith("<!DOC")&&c("Er ging iets fout, code is: "+e.code),c(e.message))})).then((()=>{d&&d()}))}function d(e,t){return r()(t+" .aanmeldbtn").addClass("loading"),r().ajax({cache:!1,data:"",type:"GET",url:e}).done((e=>{r()(t).replaceWith(e)})).fail(((e,n,a)=>{throw r()(t+" .aanmeldbtn").replaceWith(r()(`<div class="alert alert-danger"><strong>Actie mislukt!</strong> ${a}</div>`)),new Error(e.responseText)})),!0}},6217:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{q:()=>domUpdate});var jquery__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6859),jquery__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__),_ctx__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3757),_modal__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9577),_util__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1364),_dom__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(4222);function domUpdate(htmlString){if("string"!=typeof htmlString)return;if(htmlString=htmlString.trim(),"<!DOCTYPE"===htmlString.substring(0,9))throw alert("response error"),new Error(htmlString);const elements=(0,_util__WEBPACK_IMPORTED_MODULE_3__.QA)(htmlString);for(const element of elements){if(!(element instanceof HTMLElement))continue;const id=element.id,parentId=element.getAttribute("parentid");if(!id&&element instanceof HTMLScriptElement)return eval(element.innerText),void(0,_modal__WEBPACK_IMPORTED_MODULE_2__.I)();const target=id?document.querySelector(`#${id}`):null,targetParent=parentId?document.querySelector(`#${parentId}`):null;target?element.classList.contains("remove")?(0,_util__WEBPACK_IMPORTED_MODULE_3__.c7)(target,400):jquery__WEBPACK_IMPORTED_MODULE_0___default()(target).replaceWith(jquery__WEBPACK_IMPORTED_MODULE_0___default()(element)):targetParent?targetParent.append(element):element instanceof HTMLScriptElement?document.head.append(element):(0,_dom__WEBPACK_IMPORTED_MODULE_4__.Ys)("#maalcie-tabel tbody:visible:first").append(element),(0,_ctx__WEBPACK_IMPORTED_MODULE_1__.S)(element),"modal"===id?(0,_modal__WEBPACK_IMPORTED_MODULE_2__.O)():(0,_modal__WEBPACK_IMPORTED_MODULE_2__.I)()}}},9195:(e,t,n)=>{"use strict";n.r(t),n.d(t,{initKnopGet:()=>g,initKnopPost:()=>_,initKnopVergroot:()=>h,initRadioButtons:()=>b,knopPost:()=>p,knopVergroot:()=>E});var a=n(6859),r=n.n(a),o=n(4715),s=n(9315),i=n(6217),l=n(5310),c=n(9577),d=n(1877),u=n(4222),f=n(1364);function m(e,t){if(!(e instanceof HTMLElement))throw new Error("Knop is geen HTMLElement");if(e.classList.contains("confirm")&&!confirm(e.title+".\n\nWeet u het zeker?"))return(0,c.I)(),!1;let n=e,a=i.q,r=e.getAttribute("data");if(e.classList.contains("popup")&&(n=null),e.classList.contains("prompt")){if(!r)throw new Error("Prompt knop heeft geen data");const[e,t]=r.split("="),n=prompt(e,t);if(!n)return!1;r=encodeURIComponent(e)+"="+encodeURIComponent(n)}if(e.classList.contains("addfav")&&(r={tekst:document.title.replace("C.S.R. Delft - ",""),link:window.location.href}),e.classList.contains("DataTableRowKnop")){const t=(0,u.wV)(e,"table").id;r={DataTableId:t,DataTableSelection:(0,u.wV)(e,"tr").dataset.uuid},a=e=>{(0,o.isDataTableResponse)(e)?((0,o.fnUpdateDataTable)("#"+t,e),e&&e.modal?(0,i.q)(e.modal):(0,c.I)()):"string"==typeof e&&(0,i.q)(e)}}if(e.classList.contains("DataTableResponse")){let t=e.dataset.tableid;if(!t||!document.getElementById(t)){const n=e.closest("form");if(!n)throw new Error("Geen form gevonden");if(t=n.dataset.tableid,!t||!document.getElementById(t))throw new Error("DataTable not found")}r={DataTableId:t,DataTableSelection:(0,o.fnGetSelection)("#"+t)},a=e=>{if((0,o.isDataTableResponse)(e))(0,o.fnUpdateDataTable)("#"+t,e),e.modal?(0,i.q)(e.modal):(0,c.I)();else{if("string"!=typeof e)throw new Error("Niets met deze response: "+e);(0,i.q)(e)}},e.classList.contains("SingleRow")||(n=null)}e.classList.contains("ReloadPage")?a=d.H:e.classList.contains("redirect")&&(a=d.u);const l=e.getAttribute("href");if(!l)throw new Error("Knop heeft geen href");(0,s.V)(t,l,r,n,a,f._y)}function p(e,t){t.preventDefault();const n=t.target;return r()(n).hasClass("range")?("INPUT"===n.tagName.toUpperCase()?(0,l.U3)(t):(0,l.ZA)(t),!1):(m(e,"POST"),!1)}const _=e=>{e.classList.add("loaded"),e.addEventListener("click",(t=>p(e,t)))},g=e=>{e.classList.add("loaded"),e.addEventListener("click",(t=>(t.preventDefault(),m(e,"GET"),!1)))},h=e=>e.addEventListener("click",(t=>E(t,e)));function E(e,t){const n=t;if(!(n instanceof HTMLElement))throw new Error("Knop vergroot klik heeft geen target");const{vergroot:a,vergrootOud:o}=n.dataset;if(!a)throw new Error("Knop vergroot heeft geen data-vergroot");const s=n.querySelector("i.fas");if(!s)throw new Error("knopVergroot heeft geen icon");o?(r()(a).animate({height:o},600),delete n.dataset.vergrootOud,s.classList.replace("fa-compress","fa-expand"),n.title="Uitklappen"):(n.title="Inklappen",s.classList.replace("fa-expand","fa-compress"),n.dataset.vergrootOud=String(r()(a).height()),r()(a).animate({height:r()(a).prop("scrollHeight")+1},600))}const b=e=>{for(const t of(0,u.td)("a.btn",e))t.addEventListener("click",(()=>{for(const t of(0,u.td)(".active",e))t.classList.remove("active");t.classList.add("active")}))}},5310:(e,t,n)=>{"use strict";n.d(t,{F0:()=>h,U3:()=>w,ZA:()=>d,fL:()=>E,l6:()=>u,pD:()=>g,rm:()=>_,zj:()=>f});var a=n(6859),r=n.n(a),o=n(5904),s=n(9315),i=n(6217),l=n(4222),c=n(1364);function d(e){let t=e.target;if("IMG"===t.tagName.toUpperCase()&&(t=(0,l.wV)(t)),r()(t).find("input").prop("checked",!0),r()(t).hasClass("confirm")&&!confirm(r()(t).attr("title")+".\n\nWeet u het zeker?"))return!1;r()('input[name="'+r()(t).find("input:first").attr("name")+'"]:visible').each((function(){if(r()(this).prop("checked")){const e=r()(t).parent().attr("href"),n=r()(t).parent().attr("post");if(!e||!n)throw new Error("Element heeft geen href of post");(0,s.V)("POST",e,n,t.parentElement,i.q,c._y)}}))}function u(){const e=r()("#suggesties-tabel");e.find("tr:visible:odd").css("background-color","#FAFAFA"),e.find("tr:visible:even").css("background-color","#EBEBEB")}function f(e,t){r()("#suggesties-tabel ."+e).each((function(){let n=0;void 0!==t?t?r()(this).removeClass(e+"verborgen"):r()(this).addClass(e+"verborgen"):r()(this).toggleClass(e+"verborgen"),r()(this).hasClass("geenvoorkeurverborgen")&&n++,r()(this).hasClass("recentverborgen")&&n++,r()(this).hasClass("jongsteverborgen")&&n++,r()(this).hasClass("oudereverborgen")&&n++,n>0?r()(this).hide():r()(this).show()})),u()}function m(e,t){"taak-datum-head-"+e===r()("#maalcie-tabel tr:visible").eq(t).attr("id")&&r()("#taak-datum-head-first").toggleClass("verborgen")}function p(){r()("tr.taak-datum-summary:visible:odd th").css("background-color","#FAFAFA"),r()("tr.taak-datum-summary:visible:even th").css("background-color","#f5f5f5")}function _(e){m(e,0),r()(".taak-datum-"+e).toggleClass("verborgen"),m(e,1),p()}function g(){r()("#taak-datum-head-first").removeClass("verborgen"),r()("tr.taak-datum-oud").removeClass("verborgen"),p()}function h(e){let t=e.target;"IMG"===t.tagName.toUpperCase()&&(t=(0,l.wV)(t)),o.R.el&&o.R.el.id!==t.id&&e.preventDefault()}function E(e){e.preventDefault();let t=e.target;"IMG"===t.tagName.toUpperCase()&&(t=(0,l.wV)(t));const n=o.R.el;if(!n||!confirm("Toegekende corveepunten worden meegeruild!\n\nDoorgaan met ruilen?"))return;let a=n.getAttribute("uid");a||(a="");const r=t.getAttribute("href");if(!r)throw new Error("Element heeft geen href");(0,s.V)("POST",r,"uid="+a,t,i.q,c._y),a=t.getAttribute("uid"),a||(a=""),(0,s.V)("POST",r,"uid="+a,n,i.q,c._y)}let b;function w(e){const t=e.target;if(!t)throw new Error("Er is geen target");let n=!1;r()("#maalcie-tabel").find('tbody tr td a input[name="'+r()(t).attr("name")+'"]:visible').each((function(){const t=r()(this).attr("id");if(t===b&&(n=!n),t===e.target.id){n=!n;const e=r()(this).prop("checked");setTimeout((()=>{r()("#"+t).prop("checked",e)}),50)}else e.shiftKey&&n&&r()(this).prop("checked",!0)})),b=e.target.id}},9577:(e,t,n)=>{"use strict";n.d(t,{I:()=>i,O:()=>s});var a=n(6859),r=n.n(a),o=n(8787);function s(e=""){var t,n;const a=document.getElementById("modal"),s=null!==(t=o.Modal.getInstance(a))&&void 0!==t?t:new o.Modal(a),i=r()(".modal-backdrop");return(""!==a.innerHTML||""!==e)&&(i.length&&i.remove(),""!==e&&(a.replaceWith(e),null===(n=Array.from(a.querySelectorAll("input")).find((e=>"none"!=window.getComputedStyle(e).display)))||void 0===n||n.dispatchEvent(new FocusEvent("focus"))),s.show(),document.dispatchEvent(new Event("modalOpen")),!0)}function i(){const e=o.Modal.getInstance(document.getElementById("modal"));e&&e.hide(),document.dispatchEvent(new Event("modalClose"))}},1877:(e,t,n)=>{"use strict";n.d(t,{H:()=>r,u:()=>o});var a=n(6217);function r(e){"string"!=typeof e||'<div id="modal" '!==e.substring(0,16)?location.reload():(0,a.q)(e)}function o(e){'<div id="modal" '!==e.substring(0,16)?window.location.href=e:(0,a.q)(e)}},9078:(e,t,n)=>{var a={"./nl":7461,"./nl.js":7461};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=9078}}]);
//# sourceMappingURL=3022.3e5ed56cd83b2938660a.chunk.js.map