{"version":3,"sources":["webpack:///./js/lib/domUpdate.ts","webpack:///./js/lib/bbcode-set.ts","webpack:///./js/lib/modal.ts"],"names":["domUpdate","htmlString","trim","substring","alert","Error","elements","each","index","element","Element","$element","id","attr","parentId","target","targetParent","length","hasClass","effect","remove","replaceWith","show","get","append","HTMLScriptElement","parentid","this","prependTo","bbCodeSet","markupSet","className","name","key","openWith","closeWith","separator","placeHolder","markitup","url","window","prompt","decodeURIComponent","pos","indexOf","selection","replace","a","then","response","data","nameSpace","previewParserPath","modalOpen","modal","modalBackdrop","html","find","trigger","document","body","modalClose"],"mappings":"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","file":"js/bbcode-set.eb8753c90f6b21b9ac97.chunk.js","sourcesContent":["import $ from 'jquery';\nimport { init } from '../ctx';\nimport { modalClose, modalOpen } from './modal';\nimport { htmlParse } from './util';\nexport function domUpdate(htmlString) {\n    if (typeof htmlString !== 'string') {\n        return;\n    }\n    htmlString = $.trim(htmlString);\n    if (htmlString.substring(0, 9) === '<!DOCTYPE') {\n        alert('response error');\n        throw new Error(htmlString);\n    }\n    const elements = htmlParse(htmlString);\n    $(elements).each(function (index, element) {\n        if (!(element instanceof Element)) {\n            // element kan ook een stuk tekst zijn, hier kunnen we niets mee.\n            return;\n        }\n        const $element = $(element);\n        const id = $(element).attr('id');\n        const parentId = $(element).attr('parentid');\n        const target = $('#' + id);\n        const targetParent = $('#' + parentId);\n        if (target.length === 1) {\n            if ($element.hasClass('remove')) {\n                target.effect('fade', {}, 400, () => {\n                    target.remove();\n                });\n            }\n            else {\n                target.replaceWith($element.show().get()).effect('highlight');\n            }\n        }\n        else if (targetParent.length === 1) {\n            targetParent.append($element.show());\n        }\n        else if (element instanceof HTMLScriptElement) {\n            $('head').append($element);\n        }\n        else {\n            const parentid = $(this).attr('parentid');\n            if (parentid) {\n                $(this).prependTo(`#${parentid}`).show().effect('highlight');\n            }\n            else {\n                $(this).prependTo('#maalcie-tabel tbody:visible:first').show().effect('highlight'); // FIXME: make generic\n            }\n        }\n        init(element);\n        if (id === 'modal') {\n            modalOpen();\n        }\n        else {\n            modalClose();\n        }\n    });\n}\n","import axios from 'axios';\nimport { domUpdate } from './domUpdate';\nimport { isLoggedIn } from './util';\n// ----------------------------------------------------------------------------\n// markItUp!\n// ----------------------------------------------------------------------------\n// Copyright (C) 2008 Jay Salvat\n// http://markitup.jaysalvat.com/\n// ----------------------------------------------------------------------------\n// BBCode tags example\n// http://en.wikipedia.org/wiki/Bbcode\n// ----------------------------------------------------------------------------\n// Feel free to add more tags\n// ----------------------------------------------------------------------------\nexport const bbCodeSet = {\n    markupSet: [\n        { className: 'ico text_bold', name: 'Dikgedrukt', key: 'B', openWith: '[b]', closeWith: '[/b]' },\n        { className: 'ico text_italic', name: 'Cursief', key: 'I', openWith: '[i]', closeWith: '[/i]' },\n        { className: 'ico text_underline', name: 'Onderstreept', key: 'U', openWith: '[u]', closeWith: '[/u]' },\n        { className: 'ico text_strikethrough', name: 'Doorgestreept', key: 'S', openWith: '[s]', closeWith: '[/s]' },\n        { separator: '|' },\n        { className: 'ico text_smallcaps', name: 'Offtopic', key: 'O', openWith: '[offtopic]', closeWith: '[/offtopic]' },\n        {\n            className: 'ico comments',\n            closeWith: '[/citaat]',\n            key: 'Q',\n            name: 'Citaat',\n            openWith: '[citaat=Naam_of_lidnummer]',\n        },\n        { separator: '|' },\n        {\n            className: 'ico link',\n            closeWith: '[/url]',\n            key: 'L',\n            name: 'Link',\n            openWith: '[url=[![Url]!]]',\n            placeHolder: 'Link tekst',\n        },\n        {\n            className: 'ico email_link',\n            closeWith: '[/email]',\n            key: 'E',\n            name: 'Email',\n            openWith: '[email=[![Email adres]!]]',\n            placeHolder: 'Link tekst',\n        },\n        { separator: '|' },\n        {\n            className: 'ico photos', name: 'Fotoalbum',\n            replaceWith: (markitup) => {\n                let url = window.prompt('Url', '');\n                if (url) {\n                    url = decodeURIComponent(url.trim());\n                    const pos = url.indexOf('/fotoalbum/');\n                    if (pos > 0) {\n                        url = url.substring(pos + 10);\n                        return '[fotoalbum]' + url + '[/fotoalbum]';\n                    }\n                    alert('Ongeldige url!');\n                }\n                return markitup.selection;\n            },\n        },\n        {\n            className: 'ico photo',\n            name: 'Poster of foto uit album',\n            replaceWith: (markitup) => {\n                let url = window.prompt('Url', '');\n                if (url) {\n                    url = decodeURIComponent(url.trim());\n                    const pos = url.indexOf('/fotoalbum/');\n                    if (pos > 0) {\n                        url = url.substring(pos + 10).replace('_resized/', '').replace('_thumbs/', '').replace('#', '');\n                        return '[foto]' + url + '[/foto]';\n                    }\n                    alert('Ongeldige url!');\n                }\n                return markitup.selection;\n            },\n        },\n        (isLoggedIn() ?\n            {\n                className: 'ico picture', name: 'Plaatje',\n                closeWith: () => {\n                    axios.get('/forum/plaatjes/upload').then((response) => {\n                        domUpdate(response.data);\n                    });\n                    return '';\n                },\n            } :\n            // Hide this (maybe temporarily) for registered users to encourage uploading images to de stek\n            { className: 'ico picture', name: 'Afbeelding', replaceWith: '[img][![Url]!][/img]' }),\n        { className: 'ico film', name: 'Video', replaceWith: '[video][![Url]!][/video]' },\n        { separator: '|' },\n        { className: 'ico map', name: 'Kaart', openWith: '[locatie]', closeWith: '[/locatie]', placeHolder: 'C.S.R. Delft' },\n        { className: 'ico sound_mute', name: 'Verklapper', openWith: '[verklapper]', closeWith: '[/verklapper]' },\n        {\n            className: 'ico shield',\n            closeWith: '[/prive]',\n            name: 'Privé',\n            openWith: '[prive]',\n            placeHolder: 'Afgeschermde gegevens',\n        },\n        // {className: 'btn-kop', name: 'Kop',\n        // \tdropMenu: [\n        // \t\t{className: 'btn-h1', name: 'H1', openWith: '[h=1]', closeWith: '[/h]'},\n        // \t\t{className: 'btn-h2', name: 'H2', openWith: '[h=2]', closeWith: '[/h]'},\n        // \t\t{className: 'btn-h3', name: 'H3', openWith: '[h=3]', closeWith: '[/h]'},\n        // \t\t{className: 'btn-h4', name: 'H4', openWith: '[h=4]', closeWith: '[/h]'},\n        // \t\t{className: 'btn-h5', name: 'H5', openWith: '[h=5]', closeWith: '[/h]'},\n        // \t\t{className: 'btn-h6', name: 'H6', openWith: '[h=6]', closeWith: '[/h]'}\n        // \t]},\n        // {separator: '|'},\n        // {className: 'btn-lijst-1', name: 'Genummerde lijst',\n        // openWith: '[list=[![Starting number]!]]\\n', closeWith: '\\n[/list]'},\n        // {className: 'btn-lijst-a', name: 'Ongenummerde lijst', openWith: '[list]\\n', closeWith: '\\n[/list]'},\n        // {className: 'btn-lijst-punt', name: 'Lijstpunt', openWith: '[*] '},\n        { separator: '|' },\n        { className: 'ico script_code_red', name: 'Code', openWith: '[code]', closeWith: '[/code]' },\n        { className: 'ico tag', name: 'Opmaakcode tonen', openWith: '[tekst]', closeWith: '[/tekst]' },\n    ],\n    nameSpace: 'CsrBB',\n    previewParserPath: '/tools/bbcode',\n};\n","import $ from 'jquery';\nexport function modalOpen(htmlString = '') {\n    const modal = $('#modal');\n    const modalBackdrop = $('.modal-backdrop');\n    if (modal.html() === '' && htmlString === '') {\n        return false;\n    }\n    if (modalBackdrop.length) {\n        modalBackdrop.remove();\n    }\n    if (htmlString !== '') {\n        modal.replaceWith(htmlString);\n        modal.find('input:visible:first').trigger('focus');\n    }\n    modal.modal('show');\n    $(document.body).trigger('modalOpen');\n    return true;\n}\nexport function modalClose() {\n    $('#modal').modal('hide');\n    $(document.body).trigger('modalClose');\n}\n"],"sourceRoot":""}