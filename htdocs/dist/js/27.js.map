{"version":3,"sources":["webpack:///./js/lib/jquery.markitup.js","webpack:///./js/modal.js","webpack:///./js/ajax.js","webpack:///./js/util.js","webpack:///./js/extern-defer.js","webpack:///./js/datatable-api.js","webpack:///./js/maalcie.js","webpack:///./js/formulier.js","webpack:///./js/context.js","webpack:///./js/knop.js","webpack:///./js/dragobject.ts","webpack:///./js/bbcode-set.js","webpack:///./js/bbcode.js"],"names":["$","fn","markItUp","settings","extraSettings","method","params","options","selection","ctrlKey","shiftKey","altKey","id","nameSpace","root","previewHandler","previewInWindow","previewInElement","previewAutoRefresh","previewPosition","previewTemplatePath","previewParser","previewParserPath","previewParserVar","resizeHandle","beforeInsert","afterInsert","onEnter","onShiftEnter","onCtrlEnter","onTab","markupSet","extend","each","a","tag","miuScript","get","src","match","uaMatch","ua","toLowerCase","exec","indexOf","browser","version","matched","navigator","userAgent","chrome","webkit","safari","$$","textarea","levels","scrollPosition","caretPosition","caretOffset","clicked","hash","header","footer","previewWindow","template","iFrame","abort","localize","remove","markup","error","data","inText","replace","init","attr","substr","toUpperCase","wrap","addClass","insertBefore","dropMenus","appendTo","insertAfter","bind","e","h","height","y","clientY","mouseMove","mouseUp","css","Math","max","unbind","append","keyPressed","target","focused","refreshPreview","ul","i","li","button","t","title","j","key","name","separator","length","className","preventDefault","focus","call","eval","setTimeout","show","document","one","hide","dropMenu","push","pop","magicMarkups","string","toString","x","b","split","undefined","value","prompt","prepare","action","isFunction","build","openWith","placeHolder","replaceWith","closeWith","openBlockWith","closeBlockWith","multiline","block","lines","blocks","l","line","trailingSpaces","join","len","n","start","beforeMultiInsert","trim","opera","fixIeBug","fixOperaBug","val","substring","insert","set","afterMultiInsert","msie","newSelection","createRange","text","createTextRange","range","collapse","moveStart","moveEnd","select","setSelectionRange","scrollTop","rangeCopy","duplicate","moveToElementText","inRange","selectionStart","selectionEnd","preview","closed","window","open","unload","close","contentWindow","frame","renderPreview","phtml","writeInPreview","ajax","type","dataType","global","url","encodeURIComponent","success","html","sp","documentElement","write","metaKey","keyCode","String","fromCharCode","parent","triggerHandler","keepDefault","removeClass","markItUpRemove","trigger","jQuery","modalOpen","modalClose","htmlString","hasClass","confirm","modal","modalBackdrop","body","find","ajaxRequest","ketzerAjax","source","onsuccess","onerror","onfinish","contentType","processData","FormData","cache","done","fail","textStatus","errorThrown","responseText","always","ketzer","jqXHR","alert","randomIntFromInterval","selectText","dirname","basename","reload","redirect","route","min","floor","random","elmnt","getSelection","selectNodeContents","removeAllRanges","addRange","path","suffix","base","lastChar","charAt","slice","location","href","cb","pathname","startsWith","require","widget","bridge","ui","tooltip","bbcode","CsrBBPreview","bbvideoDisplay","$window","$body","$header","$banner","on","content","createElement","foto","video","hasAnchor","closest","lazyLoad","hasLoaded","textContent","pageYOffset","outerHeight","fnUpdateDataTable","fnGetSelection","tableId","response","$table","table","DataTable","forEach","row","$tr","UUID","add","draw","takenToggleDatum","takenShowOld","takenColorSuggesties","takenToggleSuggestie","takenSelectRange","takenSubmitRange","takenToggleDatumFirst","datum","index","eq","toggle","takenColorDatum","$suggestiesTabel","soort","verborgen","toggleClass","lastSelectedId","withinRange","thisId","check","prop","tagName","domUpdate","takenMagRuilen","dragObject","el","takenRuilen","formIsChanged","formInlineToggle","formToggle","formReset","formSubmit","formCancel","form","changed","not","is","prev","children","event","next","orig","q","formData","getElementById","off","initHoverIntents","initContext","initButtons","knopPost","knopGet","knopVergroot","initForms","submit","initTimeago","timeago","strings","prefiprefixAgo","prefixFromNow","suffixAgo","suffixFromNow","seconds","minute","minutes","hour","hours","day","days","month","months","year","years","wordSeparator","numbers","initMarkitup","bbCodeSet","initTooltips","uitooltip","track","hoverIntent","over","fadeIn","out","fadeOut","timeout","initLazyImages","initVue","Vue","parseHTML","effect","parentid","prependTo","radioButtonGroep","knopAjax","container","knop","oud","animate","removeAttr","markitup","decodeURIComponent","pos","sourceId","targetId","post","elem","$previewdiv","iframe","width"],"mappings":"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U,SAAV,EAAqBZ,WAArB,CAAiC,aAAjC,EAAgDrI,QAAhD,CAAyD,WAAzD;AACAmU,aAAKvU,IAAL,CAAU,OAAV,EAAmB,YAAnB;AACH,KALD,MAMK;AACDuU,aAAKvU,IAAL,CAAU,OAAV,EAAmB,WAAnB;AACAuU,aAAKlL,IAAL,CAAU,SAAV,EAAqBZ,WAArB,CAAiC,WAAjC,EAA8CrI,QAA9C,CAAuD,aAAvD;AACAmU,aAAKvU,IAAL,CAAU,mBAAV,EAA+B,sBAAE/D,EAAF,EAAM2E,MAAN,EAA/B;AACA,8BAAE3E,EAAF,EAAMwY,OAAN,CAAc;AACV,sBAAU,sBAAExY,EAAF,EAAM2T,IAAN,CAAW,cAAX,IAA6B;AAD7B,SAAd,EAEG,GAFH;AAGH;AACJ,C;;;;;;;;AC1ID;AAAA;AAAA;AAAA;AAAuB;AAChB;AACP;AACA;AACA,6CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,6CAAC;AAC5B;AACA;AACA;AACA,4BAA4B,6CAAC;AAC7B;AACA,gCAAgC,6CAAC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA,YAAY,6CAAC;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;;;AC9GD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,IAAMuD,gCAAY;AACrBjX,eAAW,OAD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","file":"js/27.js","sourcesContent":["// ----------------------------------------------------------------------------\n// markItUp! Universal MarkUp Engine, JQuery plugin\n// v 1.1.x\n// Dual licensed under the MIT and GPL licenses.\n// ----------------------------------------------------------------------------\n// Copyright (C) 2007-2012 Jay Salvat\n// http://markitup.jaysalvat.com/\n// ----------------------------------------------------------------------------\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n// ----------------------------------------------------------------------------\n(function($) {\n\t$.fn.markItUp = function(settings, extraSettings) {\n\t\tvar method, params, options, selection, ctrlKey, shiftKey, altKey; ctrlKey = shiftKey = altKey = false;\n\n\t\tif (typeof settings == 'string') {\n\t\t\tmethod = settings;\n\t\t\tparams = extraSettings;\n\t\t}\n\n\t\toptions = {\tid:\t\t\t\t\t\t'',\n\t\t\t\t\tnameSpace:\t\t\t\t'',\n\t\t\t\t\troot:\t\t\t\t\t'',\n\t\t\t\t\tpreviewHandler:\t\t\tfalse,\n\t\t\t\t\tpreviewInWindow:\t\t'', // 'width=800, height=600, resizable=yes, scrollbars=yes'\n\t\t\t\t\tpreviewInElement:\t\t'',\n\t\t\t\t\tpreviewAutoRefresh:\t\ttrue,\n\t\t\t\t\tpreviewPosition:\t\t'after',\n\t\t\t\t\tpreviewTemplatePath:\t'~/templates/preview.html',\n\t\t\t\t\tpreviewParser:\t\t\tfalse,\n\t\t\t\t\tpreviewParserPath:\t\t'',\n\t\t\t\t\tpreviewParserVar:\t\t'data',\n\t\t\t\t\tresizeHandle:\t\t\ttrue,\n\t\t\t\t\tbeforeInsert:\t\t\t'',\n\t\t\t\t\tafterInsert:\t\t\t'',\n\t\t\t\t\tonEnter:\t\t\t\t{},\n\t\t\t\t\tonShiftEnter:\t\t\t{},\n\t\t\t\t\tonCtrlEnter:\t\t\t{},\n\t\t\t\t\tonTab:\t\t\t\t\t{},\n\t\t\t\t\tmarkupSet:\t\t\t[\t{ /* set */ } ]\n\t\t\t\t};\n\t\t$.extend(options, settings, extraSettings);\n\n\t\t// compute markItUp! path\n\t\tif (!options.root) {\n\t\t\t$('script').each(function(a, tag) {\n\t\t\t\tvar miuScript;\n\t\t\t\tmiuScript = $(tag).get(0).src.match(/(.*)jquery\\.markitup(\\.pack)?\\.js$/);\n\t\t\t\tif (miuScript !== null) {\n\t\t\t\t\toptions.root = miuScript[1];\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t// Quick patch to keep compatibility with jQuery 1.9\n\t\tvar uaMatch = function(ua) {\n\t\t\tua = ua.toLowerCase();\n\n\t\t\tvar match = /(chrome)[ \\/]([\\w.]+)/.exec(ua) ||\n\t\t\t\t/(webkit)[ \\/]([\\w.]+)/.exec(ua) ||\n\t\t\t\t/(opera)(?:.*version|)[ \\/]([\\w.]+)/.exec(ua) ||\n\t\t\t\t/(msie) ([\\w.]+)/.exec(ua) ||\n\t\t\t\tua.indexOf(\"compatible\") < 0 && /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(ua) ||\n\t\t\t\t[];\n\n\t\t\treturn {\n\t\t\t\tbrowser: match[ 1 ] || \"\",\n\t\t\t\tversion: match[ 2 ] || \"0\"\n\t\t\t};\n\t\t};\n\t\tvar matched = uaMatch( navigator.userAgent );\n\t\tvar browser = {};\n\n\t\tif (matched.browser) {\n\t\t\tbrowser[matched.browser] = true;\n\t\t\tbrowser.version = matched.version;\n\t\t}\n\t\tif (browser.chrome) {\n\t\t\tbrowser.webkit = true;\n\t\t} else if (browser.webkit) {\n\t\t\tbrowser.safari = true;\n\t\t}\n\n\t\treturn this.each(function() {\n\t\t\tvar $$, textarea, levels, scrollPosition, caretPosition, caretOffset,\n\t\t\t\tclicked, hash, header, footer, previewWindow, template, iFrame, abort;\n\t\t\t$$ = $(this);\n\t\t\ttextarea = this;\n\t\t\tlevels = [];\n\t\t\tabort = false;\n\t\t\tscrollPosition = caretPosition = 0;\n\t\t\tcaretOffset = -1;\n\n\t\t\toptions.previewParserPath = localize(options.previewParserPath);\n\t\t\toptions.previewTemplatePath = localize(options.previewTemplatePath);\n\n\t\t\tif (method) {\n\t\t\t\tswitch(method) {\n\t\t\t\t\tcase 'remove':\n\t\t\t\t\t\tremove();\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'insert':\n\t\t\t\t\t\tmarkup(params);\n\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\t$.error('Method ' +  method + ' does not exist on jQuery.markItUp');\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// apply the computed path to ~/\n\t\t\tfunction localize(data, inText) {\n\t\t\t\tif (inText) {\n\t\t\t\t\treturn \tdata.replace(/(\"|')~\\//g, \"$1\"+options.root);\n\t\t\t\t}\n\t\t\t\treturn \tdata.replace(/^~\\//, options.root);\n\t\t\t}\n\n\t\t\t// init and build editor\n\t\t\tfunction init() {\n\t\t\t\tvar id = '', nameSpace = '', resizeHandle;\n\t\t\t\tif (options.id) {\n\t\t\t\t\tid = 'id=\"'+options.id+'\"';\n\t\t\t\t} else if ($$.attr(\"id\")) {\n\t\t\t\t\tid = 'id=\"markItUp'+($$.attr(\"id\").substr(0, 1).toUpperCase())+($$.attr(\"id\").substr(1))+'\"';\n\n\t\t\t\t}\n\t\t\t\tif (options.nameSpace) {\n\t\t\t\t\tnameSpace = 'class=\"'+options.nameSpace+'\"';\n\t\t\t\t}\n\t\t\t\t$$.wrap('<div '+nameSpace+'></div>');\n\t\t\t\t$$.wrap('<div '+id+' class=\"markItUp\"></div>');\n\t\t\t\t$$.wrap('<div class=\"markItUpContainer\"></div>');\n\t\t\t\t$$.addClass(\"markItUpEditor\");\n\n\t\t\t\t// add the header before the textarea\n\t\t\t\theader = $('<div class=\"markItUpHeader\"></div>').insertBefore($$);\n\t\t\t\t$(dropMenus(options.markupSet)).appendTo(header);\n\n\t\t\t\t// add the footer after the textarea\n\t\t\t\tfooter = $('<div class=\"markItUpFooter\"></div>').insertAfter($$);\n\n\t\t\t\t// add the resize handle after textarea\n\t\t\t\tif (options.resizeHandle === true && browser.safari !== true) {\n\t\t\t\t\tresizeHandle = $('<div class=\"markItUpResizeHandle\"></div>')\n\t\t\t\t\t\t.insertAfter($$)\n\t\t\t\t\t\t.bind(\"mousedown.markItUp\", function(e) {\n\t\t\t\t\t\t\tvar h = $$.height(), y = e.clientY, mouseMove, mouseUp;\n\t\t\t\t\t\t\tmouseMove = function(e) {\n\t\t\t\t\t\t\t\t$$.css(\"height\", Math.max(20, e.clientY+h-y)+\"px\");\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tmouseUp = function(e) {\n\t\t\t\t\t\t\t\t$(\"html\").unbind(\"mousemove.markItUp\", mouseMove).unbind(\"mouseup.markItUp\", mouseUp);\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t$(\"html\").bind(\"mousemove.markItUp\", mouseMove).bind(\"mouseup.markItUp\", mouseUp);\n\t\t\t\t\t});\n\t\t\t\t\tfooter.append(resizeHandle);\n\t\t\t\t}\n\n\t\t\t\t// listen key events\n\t\t\t\t$$.bind('keydown.markItUp', keyPressed).bind('keyup', keyPressed);\n\n\t\t\t\t// bind an event to catch external calls\n\t\t\t\t$$.bind(\"insertion.markItUp\", function(e, settings) {\n\t\t\t\t\tif (settings.target !== false) {\n\t\t\t\t\t\tget();\n\t\t\t\t\t}\n\t\t\t\t\tif (textarea === $.markItUp.focused) {\n\t\t\t\t\t\tmarkup(settings);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// remember the last focus\n\t\t\t\t$$.bind('focus.markItUp', function() {\n\t\t\t\t\t$.markItUp.focused = this;\n\t\t\t\t});\n\n\t\t\t\tif (options.previewInElement) {\n\t\t\t\t\trefreshPreview();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// recursively build header with dropMenus from markupset\n\t\t\tfunction dropMenus(markupSet) {\n\t\t\t\tvar ul = $('<ul></ul>'), i = 0, li;\n\t\t\t\t$('li:hover > ul', ul).css('display', 'block');\n\t\t\t\t$.each(markupSet, function() {\n\t\t\t\t\tvar button = this, t = '', title, li, j;\n\t\t\t\t\ttitle = (button.key) ? (button.name||'')+' [Ctrl+'+button.key+']' : (button.name||'');\n\t\t\t\t\tvar key   = (button.key) ? 'accesskey=\"'+button.key+'\"' : '';\n\t\t\t\t\tif (button.separator) {\n\t\t\t\t\t\tli = $('<li class=\"markItUpSeparator\">'+(button.separator||'')+'</li>').appendTo(ul);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ti++;\n\t\t\t\t\t\tfor (j = levels.length -1; j >= 0; j--) {\n\t\t\t\t\t\t\tt += levels[j]+\"-\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tli = $('<li class=\"markItUpButton markItUpButton'+t+(i)+' '+(button.className||'')+'\"><a href=\"\" '+key+' title=\"'+title+'\">'+(button.name||'')+'</a></li>')\n\t\t\t\t\t\t.bind(\"contextmenu.markItUp\", function() { // prevent contextmenu on mac and allow ctrl+click\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}).bind('click.markItUp', function(e) {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t}).bind(\"focusin.markItUp\", function(){\n                            $$.focus();\n\t\t\t\t\t\t}).bind('mouseup', function() {\n\t\t\t\t\t\t\tif (button.call) {\n\t\t\t\t\t\t\t\teval(button.call)();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsetTimeout(function() { markup(button) },1);\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}).bind('mouseenter.markItUp', function() {\n\t\t\t\t\t\t\t\t$('> ul', this).show();\n\t\t\t\t\t\t\t\t$(document).one('click', function() { // close dropmenu if click outside\n\t\t\t\t\t\t\t\t\t\t$('ul ul', header).hide();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}).bind('mouseleave.markItUp', function() {\n\t\t\t\t\t\t\t\t$('> ul', this).hide();\n\t\t\t\t\t\t}).appendTo(ul);\n\t\t\t\t\t\tif (button.dropMenu) {\n\t\t\t\t\t\t\tlevels.push(i);\n\t\t\t\t\t\t\t$(li).addClass('markItUpDropMenu').append(dropMenus(button.dropMenu));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tlevels.pop();\n\t\t\t\treturn ul;\n\t\t\t}\n\n\t\t\t// markItUp! markups\n\t\t\tfunction magicMarkups(string) {\n\t\t\t\tif (string) {\n\t\t\t\t\tstring = string.toString();\n\t\t\t\t\tstring = string.replace(/\\(\\!\\(([\\s\\S]*?)\\)\\!\\)/g,\n\t\t\t\t\t\tfunction(x, a) {\n\t\t\t\t\t\t\tvar b = a.split('|!|');\n\t\t\t\t\t\t\tif (altKey === true) {\n\t\t\t\t\t\t\t\treturn (b[1] !== undefined) ? b[1] : b[0];\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn (b[1] === undefined) ? \"\" : b[0];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\t// [![prompt]!], [![prompt:!:value]!]\n\t\t\t\t\tstring = string.replace(/\\[\\!\\[([\\s\\S]*?)\\]\\!\\]/g,\n\t\t\t\t\t\tfunction(x, a) {\n\t\t\t\t\t\t\tvar b = a.split(':!:');\n\t\t\t\t\t\t\tif (abort === true) {\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar value = prompt(b[0], (b[1]) ? b[1] : '');\n\t\t\t\t\t\t\tif (value === null) {\n\t\t\t\t\t\t\t\tabort = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\treturn string;\n\t\t\t\t}\n\t\t\t\treturn \"\";\n\t\t\t}\n\n\t\t\t// prepare action\n\t\t\tfunction prepare(action) {\n\t\t\t\tif ($.isFunction(action)) {\n\t\t\t\t\taction = action(hash);\n\t\t\t\t}\n\t\t\t\treturn magicMarkups(action);\n\t\t\t}\n\n\t\t\t// build block to insert\n\t\t\tfunction build(string) {\n\t\t\t\tvar openWith \t\t\t= prepare(clicked.openWith);\n\t\t\t\tvar placeHolder \t\t= prepare(clicked.placeHolder);\n\t\t\t\tvar replaceWith \t\t= prepare(clicked.replaceWith);\n\t\t\t\tvar closeWith \t\t\t= prepare(clicked.closeWith);\n\t\t\t\tvar openBlockWith \t\t= prepare(clicked.openBlockWith);\n\t\t\t\tvar closeBlockWith \t\t= prepare(clicked.closeBlockWith);\n\t\t\t\tvar multiline \t\t\t= clicked.multiline;\n\t\t\t\tvar block;\n\n\t\t\t\tif (replaceWith !== \"\") {\n\t\t\t\t\tblock = openWith + replaceWith + closeWith;\n\t\t\t\t} else if (selection === '' && placeHolder !== '') {\n\t\t\t\t\tblock = openWith + placeHolder + closeWith;\n\t\t\t\t} else {\n\t\t\t\t\tstring = string || selection;\n\n\t\t\t\t\tvar lines = [string], blocks = [];\n\n\t\t\t\t\tif (multiline === true) {\n\t\t\t\t\t\tlines = string.split(/\\r?\\n/);\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (var l = 0; l < lines.length; l++) {\n\t\t\t\t\t\tvar line = lines[l];\n\t\t\t\t\t\tvar trailingSpaces;\n\t\t\t\t\t\tif (trailingSpaces = line.match(/ *$/)) {\n\t\t\t\t\t\t\tblocks.push(openWith + line.replace(/ *$/g, '') + closeWith + trailingSpaces);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tblocks.push(openWith + line + closeWith);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tblock = blocks.join(\"\\n\");\n\t\t\t\t}\n\n\t\t\t\tblock = openBlockWith + block + closeBlockWith;\n\n\t\t\t\treturn {\tblock:block,\n\t\t\t\t\t\t\topenBlockWith:openBlockWith,\n\t\t\t\t\t\t\topenWith:openWith,\n\t\t\t\t\t\t\treplaceWith:replaceWith,\n\t\t\t\t\t\t\tplaceHolder:placeHolder,\n\t\t\t\t\t\t\tcloseWith:closeWith,\n\t\t\t\t\t\t\tcloseBlockWith:closeBlockWith\n\t\t\t\t\t};\n\t\t\t}\n\n\t\t\t// define markup to insert\n\t\t\tfunction markup(button) {\n\t\t\t\tvar len, j, n, i, lines, string, start;\n\t\t\t\thash = clicked = button;\n\t\t\t\tget();\n\t\t\t\t$.extend(hash, {\tline:\"\",\n\t\t\t\t\t\t \t\t\troot:options.root,\n\t\t\t\t\t\t\t\t\ttextarea:textarea,\n\t\t\t\t\t\t\t\t\tselection:(selection||''),\n\t\t\t\t\t\t\t\t\tcaretPosition:caretPosition,\n\t\t\t\t\t\t\t\t\tctrlKey:ctrlKey,\n\t\t\t\t\t\t\t\t\tshiftKey:shiftKey,\n\t\t\t\t\t\t\t\t\taltKey:altKey\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\t\t\t\t// callbacks before insertion\n\t\t\t\tprepare(options.beforeInsert);\n\t\t\t\tprepare(clicked.beforeInsert);\n\t\t\t\tif ((ctrlKey === true && shiftKey === true) || button.multiline === true) {\n\t\t\t\t\tprepare(clicked.beforeMultiInsert);\n\t\t\t\t}\n\t\t\t\t$.extend(hash, { line:1 });\n\n\t\t\t\tif ((ctrlKey === true && shiftKey === true)) {\n\t\t\t\t\tlines = selection.split(/\\r?\\n/);\n\t\t\t\t\tfor (j = 0, n = lines.length, i = 0; i < n; i++) {\n\t\t\t\t\t\tif ($.trim(lines[i]) !== '') {\n\t\t\t\t\t\t\t$.extend(hash, { line:++j, selection:lines[i] } );\n\t\t\t\t\t\t\tlines[i] = build(lines[i]).block;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlines[i] = \"\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tstring = { block:lines.join('\\n')};\n\t\t\t\t\tstart = caretPosition;\n\t\t\t\t\tlen = string.block.length + ((browser.opera) ? n-1 : 0);\n\t\t\t\t} else if (ctrlKey === true) {\n\t\t\t\t\tstring = build(selection);\n\t\t\t\t\tstart = caretPosition + string.openWith.length;\n\t\t\t\t\tlen = string.block.length - string.openWith.length - string.closeWith.length;\n\t\t\t\t\tlen = len - (string.block.match(/ $/) ? 1 : 0);\n\t\t\t\t\tlen -= fixIeBug(string.block);\n\t\t\t\t} else if (shiftKey === true) {\n\t\t\t\t\tstring = build(selection);\n\t\t\t\t\tstart = caretPosition;\n\t\t\t\t\tlen = string.block.length;\n\t\t\t\t\tlen -= fixIeBug(string.block);\n\t\t\t\t} else {\n\t\t\t\t\tstring = build(selection);\n\t\t\t\t\tstart = caretPosition + string.block.length ;\n\t\t\t\t\tlen = 0;\n\t\t\t\t\tstart -= fixIeBug(string.block);\n\t\t\t\t}\n\t\t\t\tif ((selection === '' && string.replaceWith === '')) {\n\t\t\t\t\tcaretOffset += fixOperaBug(string.block);\n\n\t\t\t\t\tstart = caretPosition + string.openBlockWith.length + string.openWith.length;\n\t\t\t\t\tlen = string.block.length - string.openBlockWith.length - string.openWith.length - string.closeWith.length - string.closeBlockWith.length;\n\n\t\t\t\t\tcaretOffset = $$.val().substring(caretPosition,  $$.val().length).length;\n\t\t\t\t\tcaretOffset -= fixOperaBug($$.val().substring(0, caretPosition));\n\t\t\t\t}\n\t\t\t\t$.extend(hash, { caretPosition:caretPosition, scrollPosition:scrollPosition } );\n\n\t\t\t\tif (string.block !== selection && abort === false) {\n\t\t\t\t\tinsert(string.block);\n\t\t\t\t\tset(start, len);\n\t\t\t\t} else {\n\t\t\t\t\tcaretOffset = -1;\n\t\t\t\t}\n\t\t\t\tget();\n\n\t\t\t\t$.extend(hash, { line:'', selection:selection });\n\n\t\t\t\t// callbacks after insertion\n\t\t\t\tif ((ctrlKey === true && shiftKey === true) || button.multiline === true) {\n\t\t\t\t\tprepare(clicked.afterMultiInsert);\n\t\t\t\t}\n\t\t\t\tprepare(clicked.afterInsert);\n\t\t\t\tprepare(options.afterInsert);\n\n\t\t\t\t// refresh preview if opened\n\t\t\t\tif (previewWindow && options.previewAutoRefresh) {\n\t\t\t\t\trefreshPreview();\n\t\t\t\t}\n\n\t\t\t\t// reinit keyevent\n\t\t\t\tshiftKey = altKey = ctrlKey = abort = false;\n\t\t\t}\n\n\t\t\t// Substract linefeed in Opera\n\t\t\tfunction fixOperaBug(string) {\n\t\t\t\tif (browser.opera) {\n\t\t\t\t\treturn string.length - string.replace(/\\n*/g, '').length;\n\t\t\t\t}\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\t// Substract linefeed in IE\n\t\t\tfunction fixIeBug(string) {\n\t\t\t\tif (browser.msie) {\n\t\t\t\t\treturn string.length - string.replace(/\\r*/g, '').length;\n\t\t\t\t}\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\t// add markup\n\t\t\tfunction insert(block) {\n\t\t\t\tif (document.selection) {\n\t\t\t\t\tvar newSelection = document.selection.createRange();\n\t\t\t\t\tnewSelection.text = block;\n\t\t\t\t} else {\n\t\t\t\t\ttextarea.value =  textarea.value.substring(0, caretPosition)  + block + textarea.value.substring(caretPosition + selection.length, textarea.value.length);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// set a selection\n\t\t\tfunction set(start, len) {\n\t\t\t\tif (textarea.createTextRange){\n\t\t\t\t\t// quick fix to make it work on Opera 9.5\n\t\t\t\t\tif (browser.opera && browser.version >= 9.5 && len == 0) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\trange = textarea.createTextRange();\n\t\t\t\t\trange.collapse(true);\n\t\t\t\t\trange.moveStart('character', start);\n\t\t\t\t\trange.moveEnd('character', len);\n\t\t\t\t\trange.select();\n\t\t\t\t} else if (textarea.setSelectionRange ){\n\t\t\t\t\ttextarea.setSelectionRange(start, start + len);\n\t\t\t\t}\n\t\t\t\ttextarea.scrollTop = scrollPosition;\n\t\t\t\ttextarea.focus();\n\t\t\t}\n\n\t\t\t// get the selection\n\t\t\tfunction get() {\n\t\t\t\ttextarea.focus();\n\n\t\t\t\tscrollPosition = textarea.scrollTop;\n\t\t\t\tif (document.selection) {\n\t\t\t\t\tselection = document.selection.createRange().text;\n\t\t\t\t\tif (browser.msie) { // ie\n\t\t\t\t\t\tvar range = document.selection.createRange(), rangeCopy = range.duplicate();\n\t\t\t\t\t\trangeCopy.moveToElementText(textarea);\n\t\t\t\t\t\tcaretPosition = -1;\n\t\t\t\t\t\twhile(rangeCopy.inRange(range)) {\n\t\t\t\t\t\t\trangeCopy.moveStart('character');\n\t\t\t\t\t\t\tcaretPosition ++;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else { // opera\n\t\t\t\t\t\tcaretPosition = textarea.selectionStart;\n\t\t\t\t\t}\n\t\t\t\t} else { // gecko & webkit\n\t\t\t\t\tcaretPosition = textarea.selectionStart;\n\n\t\t\t\t\tselection = textarea.value.substring(caretPosition, textarea.selectionEnd);\n\t\t\t\t}\n\t\t\t\treturn selection;\n\t\t\t}\n\n\t\t\t// open preview window\n\t\t\tfunction preview() {\n\t\t\t\tif (typeof options.previewHandler === 'function') {\n\t\t\t\t\tpreviewWindow = true;\n\t\t\t\t} else if (options.previewInElement) {\n\t\t\t\t\tpreviewWindow = $(options.previewInElement);\n\t\t\t\t} else if (!previewWindow || previewWindow.closed) {\n\t\t\t\t\tif (options.previewInWindow) {\n\t\t\t\t\t\tpreviewWindow = window.open('', 'preview', options.previewInWindow);\n\t\t\t\t\t\t$(window).unload(function() {\n\t\t\t\t\t\t\tpreviewWindow.close();\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tiFrame = $('<iframe class=\"markItUpPreviewFrame\"></iframe>');\n\t\t\t\t\t\tif (options.previewPosition == 'after') {\n\t\t\t\t\t\t\tiFrame.insertAfter(footer);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tiFrame.insertBefore(header);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpreviewWindow = iFrame[iFrame.length - 1].contentWindow || frame[iFrame.length - 1];\n\t\t\t\t\t}\n\t\t\t\t} else if (altKey === true) {\n\t\t\t\t\tif (iFrame) {\n\t\t\t\t\t\tiFrame.remove();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpreviewWindow.close();\n\t\t\t\t\t}\n\t\t\t\t\tpreviewWindow = iFrame = false;\n\t\t\t\t}\n\t\t\t\tif (!options.previewAutoRefresh) {\n\t\t\t\t\trefreshPreview();\n\t\t\t\t}\n\t\t\t\tif (options.previewInWindow) {\n\t\t\t\t\tpreviewWindow.focus();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// refresh Preview window\n\t\t\tfunction refreshPreview() {\n \t\t\t\trenderPreview();\n\t\t\t}\n\n\t\t\tfunction renderPreview() {\n\t\t\t\tvar phtml;\n\t\t\t\tif (options.previewHandler && typeof options.previewHandler === 'function') {\n\t\t\t\t\toptions.previewHandler( $$.val() );\n\t\t\t\t} else if (options.previewParser && typeof options.previewParser === 'function') {\n\t\t\t\t\tvar data = options.previewParser( $$.val() );\n\t\t\t\t\twriteInPreview(localize(data, 1) );\n\t\t\t\t} else if (options.previewParserPath !== '') {\n\t\t\t\t\t$.ajax({\n\t\t\t\t\t\ttype: 'POST',\n\t\t\t\t\t\tdataType: 'text',\n\t\t\t\t\t\tglobal: false,\n\t\t\t\t\t\turl: options.previewParserPath,\n\t\t\t\t\t\tdata: options.previewParserVar+'='+encodeURIComponent($$.val()),\n\t\t\t\t\t\tsuccess: function(data) {\n\t\t\t\t\t\t\twriteInPreview( localize(data, 1) );\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tif (!template) {\n\t\t\t\t\t\t$.ajax({\n\t\t\t\t\t\t\turl: options.previewTemplatePath,\n\t\t\t\t\t\t\tdataType: 'text',\n\t\t\t\t\t\t\tglobal: false,\n\t\t\t\t\t\t\tsuccess: function(data) {\n\t\t\t\t\t\t\t\twriteInPreview( localize(data, 1).replace(/<!-- content -->/g, $$.val()) );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tfunction writeInPreview(data) {\n\t\t\t\tif (options.previewInElement) {\n\t\t\t\t\t$(options.previewInElement).html(data);\n\t\t\t\t} else if (previewWindow && previewWindow.document) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tsp = previewWindow.document.documentElement.scrollTop\n\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\tsp = 0;\n\t\t\t\t\t}\n\t\t\t\t\tpreviewWindow.document.open();\n\t\t\t\t\tpreviewWindow.document.write(data);\n\t\t\t\t\tpreviewWindow.document.close();\n\t\t\t\t\tpreviewWindow.document.documentElement.scrollTop = sp;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// set keys pressed\n\t\t\tfunction keyPressed(e) {\n\t\t\t\tshiftKey = e.shiftKey;\n\t\t\t\taltKey = e.altKey;\n\t\t\t\tctrlKey = (!(e.altKey && e.ctrlKey)) ? (e.ctrlKey || e.metaKey) : false;\n\n\t\t\t\tif (e.type === 'keydown') {\n\t\t\t\t\tif (ctrlKey === true) {\n\t\t\t\t\t\tli = $('a[accesskey=\"'+((e.keyCode == 13) ? '\\\\n' : String.fromCharCode(e.keyCode))+'\"]', header).parent('li');\n\t\t\t\t\t\tif (li.length !== 0) {\n\t\t\t\t\t\t\tctrlKey = false;\n\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\tli.triggerHandler('mouseup');\n\t\t\t\t\t\t\t},1);\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (e.keyCode === 13 || e.keyCode === 10) { // Enter key\n\t\t\t\t\t\tif (ctrlKey === true) {  // Enter + Ctrl\n\t\t\t\t\t\t\tctrlKey = false;\n\t\t\t\t\t\t\tmarkup(options.onCtrlEnter);\n\t\t\t\t\t\t\treturn options.onCtrlEnter.keepDefault;\n\t\t\t\t\t\t} else if (shiftKey === true) { // Enter + Shift\n\t\t\t\t\t\t\tshiftKey = false;\n\t\t\t\t\t\t\tmarkup(options.onShiftEnter);\n\t\t\t\t\t\t\treturn options.onShiftEnter.keepDefault;\n\t\t\t\t\t\t} else { // only Enter\n\t\t\t\t\t\t\tmarkup(options.onEnter);\n\t\t\t\t\t\t\treturn options.onEnter.keepDefault;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (e.keyCode === 9) { // Tab key\n\t\t\t\t\t\tif (shiftKey == true || ctrlKey == true || altKey == true) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (caretOffset !== -1) {\n\t\t\t\t\t\t\tget();\n\t\t\t\t\t\t\tcaretOffset = $$.val().length - caretOffset;\n\t\t\t\t\t\t\tset(caretOffset, 0);\n\t\t\t\t\t\t\tcaretOffset = -1;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tmarkup(options.onTab);\n\t\t\t\t\t\t\treturn options.onTab.keepDefault;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction remove() {\n\t\t\t\t$$.unbind(\".markItUp\").removeClass('markItUpEditor');\n\t\t\t\t$$.parent('div').parent('div.markItUp').parent('div').replaceWith($$);\n\t\t\t\t$$.data('markItUp', null);\n\t\t\t}\n\n\t\t\tinit();\n\t\t});\n\t};\n\n\t$.fn.markItUpRemove = function() {\n\t\treturn this.each(function() {\n\t\t\t\t$(this).markItUp('remove');\n\t\t\t}\n\t\t);\n\t};\n\n\t$.markItUp = function(settings) {\n\t\tvar options = { target:false };\n\t\t$.extend(options, settings);\n\t\tif (options.target) {\n\t\t\treturn $(options.target).each(function() {\n\t\t\t\t$(this).focus();\n\t\t\t\t$(this).trigger('insertion', [options]);\n\t\t\t});\n\t\t} else {\n\t\t\t$('textarea').trigger('insertion', [options]);\n\t\t}\n\t};\n})(jQuery);\n","import $ from 'jquery';\n\n/**\n * @param {string} htmlString\n * @returns {boolean}\n */\nexport function modalOpen(htmlString = '') {\n    if ($(this).hasClass('confirm') && !confirm($(this).attr('title') + '.\\n\\nWeet u het zeker?')) {\n        return false;\n    }\n\n    let modal = $('#modal'),\n        modalBackdrop = $('.modal-backdrop');\n\n    if (modal.html() === '' && htmlString === '') {\n        return false;\n    }\n\n    if (modalBackdrop.length){\n        modalBackdrop.remove();\n    }\n\n    modal.modal('show');\n    $(document.body).trigger('modalOpen');\n\n\n    if (typeof htmlString === 'string' && htmlString !== '') {\n        modal.html(htmlString);\n        modal.find('input:visible:first').trigger('focus');\n    }\n\n    return true;\n}\n\nexport function modalClose() {\n    $('#modal').modal('hide');\n    $(document.body).trigger('modalClose');\n}\n","import $ from 'jquery';\nimport {modalClose} from './modal';\n\n/**\n * @see maalcie.js\n * @param {string} type\n * @param {string} url\n * @param {string} data\n * @param {jQuery} source\n * @param {function} onsuccess\n * @param {function|null} onerror\n * @param {function|null} onfinish\n */\nexport function ajaxRequest(type, url, data, source, onsuccess, onerror, onfinish = null) {\n\tif (source) {\n\t\tif (!source.hasClass('noanim')) {\n\t\t\t$(source).replaceWith(`<img id=\"${source.attr('id')}\" title=\"${url}\" src=\"/images/loading-arrows.gif\" />`);\n\t\t\tsource = $(`img[title=\"${url}\"]`);\n\t\t}\n\t\telse if (source.hasClass('InlineForm')) {\n\t\t\t$(source).find('.FormElement:first').css({\n\t\t\t\t'background-image': 'url(\"/images/loading-fb.gif\")',\n\t\t\t\t'background-repeat': 'no-repeat',\n\t\t\t\t'background-position': 'center right',\n\t\t\t});\n\t\t} else {\n\t\t\tsource.addClass('loading');\n\t\t}\n\t}\n\tlet contentType = 'application/x-www-form-urlencoded; charset=UTF-8';\n\tlet processData = true;\n\tif (data instanceof FormData) {\n\t\tcontentType = false;\n\t\tprocessData = false;\n\t}\n\t$.ajax({\n\t\ttype,\n\t\tcache: false,\n\t\tcontentType,\n\t\tprocessData,\n\t\turl,\n\t\tdata,\n\t}).done((data) => {\n\t\tif (source) {\n\t\t\tif (!$(source).hasClass('noanim')) {\n\t\t\t\t$(source).hide();\n\t\t\t}\n\t\t\telse if ($(source).hasClass('InlineForm')) {\n\t\t\t\t$(source).find('.FormElement:first').css({\n\t\t\t\t\t'background-image': '',\n\t\t\t\t\t'background-repeat': '',\n\t\t\t\t\t'background-position': '',\n\t\t\t\t});\n\t\t\t}\n\t\t\tsource.removeClass('loading');\n\t\t}\n\t\tonsuccess(data);\n\t}).fail((data, textStatus, errorThrown) => {\n\t\tif (errorThrown === '') {\n\t\t\terrorThrown = 'Nog bezig met laden!';\n\t\t}\n\t\tif (source) {\n\t\t\t$(source).replaceWith('<img title=\"' + errorThrown + '\" src=\"/plaetjes/famfamfam/cancel.png\" />');\n\t\t}\n\t\telse {\n\t\t\tmodalClose();\n\t\t}\n\t\tif (onerror) {\n\t\t\tonerror(data.responseText);\n\t\t}\n\t}).always(() => {\n\t\tif (onfinish) {\n\t\t\tonfinish();\n\t\t}\n\t});\n}\n\n/**\n * @param url\n * @param ketzer\n * @returns {boolean}\n */\nexport function ketzerAjax(url, ketzer) {\n\t$(ketzer + ' .aanmelddata').html('Aangemeld:<br /><img src=\"/images/loading-arrows.gif\" />');\n\t$.ajax({\n\t\ttype: 'GET',\n\t\tcache: false,\n\t\turl: url,\n\t\tdata: '',\n\t}).done((data) => {\n\t\t$(ketzer).replaceWith(data);\n\t}).fail((jqXHR, textStatus, errorThrown) => {\n\t\t$(ketzer + ' .aanmelddata').html('<span class=\"error\">Error: </span>' + errorThrown);\n\t\talert(jqXHR.responseText);\n\t});\n\treturn true;\n}\n","import {domUpdate} from './context';\n\n/**\n * @source http://stackoverflow.com/a/7228322\n * @see templates/fotoalbum/slider.tpl\n * @param {number} min\n * @param {number} max\n * @returns {number}\n */\nexport function randomIntFromInterval(min, max) {\n    return Math.floor(Math.random() * (max - min + 1) + min);\n}\n\n/**\n * Selecteer de tekst van een DOM-element.\n * @source http://stackoverflow.com/questions/985272/jquery-selecting-text-in-an-element-akin-to-highlighting-with-your-mouse/987376#987376\n *\n * @see templates/fotoalbum/album.tpl\n * @param {Node} elmnt DOM-object\n */\nexport function selectText(elmnt) {\n    let range, selection;\n    if (document.body.createTextRange) { //ms\n        range = document.body.createTextRange();\n        range.moveToElementText(elmnt);\n        range.select();\n    } else if (window.getSelection) { //all others\n        selection = window.getSelection();\n        range = document.createRange();\n        range.selectNodeContents(elmnt);\n        selection.removeAllRanges();\n        selection.addRange(range);\n    }\n}\n\n\n/**\n //  discuss at: http://phpjs.org/functions/dirname/\n // original by: Ozh\n // improved by: XoraX (http://www.xorax.info)\n //   example 1: dirname('/etc/passwd');\n //   returns 1: '/etc'\n //   example 2: dirname('c:/Temp/x');\n //   returns 2: 'c:/Temp'\n //   example 3: dirname('/dir/test/');\n //   returns 3: '/dir'\n * @see templates/fotoalbum/album.tpl\n * @param {string} path\n * @returns {string}\n */\nexport function dirname(path) {\n    return path.replace(/\\\\/g, '/')\n        .replace(/\\/[^/]*\\/?$/, '');\n}\n\n/**\n * @see templates/fotoalbum/album.tpl\n * @param {string} path\n * @param {string} suffix\n * @returns {string}\n */\nexport function basename(path, suffix) {\n    //  discuss at: http://phpjs.org/functions/basename/\n    // original by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n    // improved by: Ash Searle (http://hexmen.com/blog/)\n    // improved by: Lincoln Ramsay\n    // improved by: djmix\n    // improved by: Dmitry Gorelenkov\n    //   example 1: basename('/www/site/home.htm', '.htm');\n    //   returns 1: 'home'\n    //   example 2: basename('ecra.php?p=1');\n    //   returns 2: 'ecra.php?p=1'\n    //   example 3: basename('/some/path/');\n    //   returns 3: 'path'\n    //   example 4: basename('/some/path_ext.ext/','.ext');\n    //   returns 4: 'path_ext'\n\n    let base = path;\n    let lastChar = base.charAt(base.length - 1);\n\n    if (lastChar === '/' || lastChar === '\\\\') {\n        base = base.slice(0, -1);\n    }\n\n    base = base.replace(/^.*[/\\\\]/g, '');\n\n    if (typeof suffix === 'string' && base.substr(base.length - suffix.length) === suffix) {\n        base = base.substr(0, base.length - suffix.length);\n    }\n\n    return base;\n}\n\n/**\n * @param {string} htmlString\n */\nexport function reload(htmlString) {\n    // prevent hidden errors\n    if (typeof htmlString === 'string' && htmlString.substring(0, 16) === '<div id=\"modal\" ') {\n\t\t\t\tdomUpdate(htmlString);\n        return;\n    }\n    location.reload();\n}\n\n/**\n * @param {string} htmlString\n */\nexport function redirect(htmlString) {\n    // prevent hidden errors\n    if (typeof htmlString === 'string' && htmlString.substring(0, 16) === '<div id=\"modal\" ') {\n        domUpdate(htmlString);\n        return;\n    }\n    window.location.href = htmlString;\n}\n\nexport function route(path, cb) {\n\tif (window.location.pathname.startsWith(path)) {\n\t\tcb();\n\t}\n}\n","/**\n * Wordt geladen als de pagina geladen is.\n */\nimport $ from 'jquery';\nimport initContext from './context';\nimport {bbvideoDisplay, CsrBBPreview} from './bbcode';\n\nrequire('lightbox2');\nrequire('./lib/jquery.markitup');\nrequire('jquery-ui/ui/widgets/tooltip');\nrequire('jquery-hoverintent');\n\n$.widget.bridge('uitooltip', $.ui.tooltip);\n\nrequire('timeago');\n\nwindow.bbcode = {\n\tCsrBBPreview,\n\tbbvideoDisplay,\n};\n\nlet $window = $(window),\n\t$body = $('body'),\n\t$header = $('#header'),\n\t$banner = $('#banner');\n\nif (typeof $banner[0] === 'undefined') {\n\t$banner = $('#banner-small');\n}\n\n$window.on('load', function () {\n\t// Lazy load cms pages, these should be loaded always, not on scroll\n\tsetTimeout(function () {\n\t\t$('div.bb-img-loading').each(function () {\n\t\t\tconst content = $(document.createElement('img'));\n\t\t\tcontent.on('error', function () {\n\t\t\t\t$(this).attr('title', 'Afbeelding bestaat niet of is niet toegankelijk!');\n\t\t\t\t$(this).attr('src', '/plaetjes/famfamfam/picture_error.png');\n\t\t\t\t$(this).css('width', '16px');\n\t\t\t\t$(this).css('height', '16px');\n\t\t\t\t$(this).removeClass('bb-img-loading').addClass('bb-img');\n\t\t\t});\n\t\t\tcontent.addClass('bb-img');\n\t\t\tcontent.attr('alt', $(this).attr('title'));\n\t\t\tcontent.attr('style', $(this).attr('style'));\n\t\t\tcontent.attr('src', $(this).attr('src'));\n\t\t\t$(this).html(content);\n\t\t\tcontent.on('load', function () {\n\t\t\t\tconst foto = content.attr('src').indexOf('/plaetjes/fotoalbum/') >= 0;\n\t\t\t\tconst video = $(this).parent().parent().hasClass('bb-video-preview');\n\t\t\t\tconst hasAnchor = $(this).closest('a').length !== 0;\n\t\t\t\t$(this).parent().replaceWith($(this));\n\t\t\t\tif (!foto && !video && !hasAnchor) {\n\t\t\t\t\t$(this).wrap(`<a class=\"lightbox-link\" href=\"${$(this).attr('src')}\" data-lightbox=\"page-lightbox\"></a>`);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t});\n});\n\nconst lazyLoad = (function () {\n\tlet hasLoaded = false;\n\n\treturn function () {\n\t\tif (hasLoaded) {\n\t\t\treturn;\n\t\t}\n\n\t\thasLoaded = true;\n\n\t\t// Lazy load frontpage\n\t\tsetTimeout(function () {\n\t\t\t$('.lazy-load').each(function () {\n\t\t\t\t$(this).replaceWith(this.textContent);\n\t\t\t});\n\t\t});\n\t};\n})();\n\n// Lazy load after animations have finished and user has scrolled\n$window.on('scroll', () => {\n\tif ($(window).scrollTop() > 0) {\n\t\tlazyLoad();\n\t}\n\n\tif (window.pageYOffset > $banner.outerHeight()) {\n\t\t$header.removeClass('alt');\n\t} else {\n\t\t$header.addClass('alt');\n\t}\n});\n\n$window.on('resize', () => $window.trigger('scroll'));\n$window.trigger('scroll');\n\ninitContext($body);\n","import $ from 'jquery';\n\nimport initContext from './context';\n\n/****************************\n * Een paar functies om met datatables te\n * praten, laadt datatables zelf niet in.\n */\n\n/**\n * @see datatable.js\n * @see view/formulier/datatable/DataTable.php\n * @param tableId\n * @param response\n */\nexport function fnUpdateDataTable(tableId, response) {\n    let $table = $(tableId);\n    let table = $table.DataTable();\n    // update or remove existing rows or add new rows\n    response.data.forEach((row) => {\n        let $tr = $('tr[data-uuid=\"' + row.UUID + '\"]');\n        if ($tr.length === 1) {\n            if ('remove' in row) {\n                table.row($tr).remove();\n            }\n            else {\n                table.row($tr).data(row);\n                initContext($tr);\n            }\n        }\n        else if ($tr.length === 0) {\n            table.row.add(row);\n        }\n        else {\n            alert($tr.length);\n        }\n    });\n    table.draw(false);\n}\n\n/**\n * @see csrdelft.js\n * @param tableId\n * @returns {Array}\n */\nexport function fnGetSelection(tableId) {\n    let selection = [];\n    $(tableId + ' tbody tr.selected').each(function () {\n        selection.push($(this).attr('data-uuid'));\n    });\n    return selection;\n}","/**\n * maalcie.js\t|\tP.W.G. Brussee (brussee@live.nl)\n *\n * requires jQuery & dragobject.js\n */\nimport $ from 'jquery';\n\nimport {ajaxRequest} from './ajax';\nimport {domUpdate} from './context';\nimport {dragObject} from './dragobject';\n\n/**\n * @param {string} datum\n * @param {number} index\n */\nfunction takenToggleDatumFirst(datum, index) {\n    if ('taak-datum-head-' + datum === $('#maalcie-tabel tr:visible').eq(index).attr('id')) {\n        $('#taak-datum-head-first').toggle();\n    }\n}\n\nfunction takenColorDatum() {\n    $('tr.taak-datum-summary:visible:odd th').css('background-color', '#FAFAFA');\n    $('tr.taak-datum-summary:visible:even th').css('background-color', '#f5f5f5');\n}\n\n/**\n * @param {string} datum\n */\nexport function takenToggleDatum(datum) {\n\ttakenToggleDatumFirst(datum, 0);\n\t$('.taak-datum-' + datum).toggle();\n\ttakenToggleDatumFirst(datum, 1);\n\ttakenColorDatum();\n\n}\n\n\nexport function takenShowOld() {\n\t$('#taak-datum-head-first').show();\n\t$('tr.taak-datum-oud').show();\n\ttakenColorDatum();\n}\n\nexport function takenColorSuggesties() {\n    let $suggestiesTabel = $('#suggesties-tabel');\n    $suggestiesTabel.find('tr:visible:odd').css('background-color', '#FAFAFA');\n    $suggestiesTabel.find('tr:visible:even').css('background-color', '#EBEBEB');\n}\n\n/**\n * @param {string} soort\n * @param {boolean} show\n */\nexport function takenToggleSuggestie(soort, show) {\n\t$('#suggesties-tabel .' + soort).each(function () {\n        let verborgen = 0;\n        if (typeof show !== 'undefined') {\n\t\t\tif (show) {\n\t\t\t\t$(this).removeClass(soort + 'verborgen');\n\t\t\t}\n\t\t\telse {\n\t\t\t\t$(this).addClass(soort + 'verborgen');\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t$(this).toggleClass(soort + 'verborgen');\n\t\t}\n\t\tif ($(this).hasClass('geenvoorkeurverborgen')) {\n\t\t\tverborgen++;\n\t\t}\n\t\tif ($(this).hasClass('recentverborgen')) {\n\t\t\tverborgen++;\n\t\t}\n\t\tif ($(this).hasClass('jongsteverborgen')) {\n\t\t\tverborgen++;\n\t\t}\n\t\tif ($(this).hasClass('oudereverborgen')) {\n\t\t\tverborgen++;\n\t\t}\n\t\tif (verborgen > 0) {\n\t\t\t$(this).hide();\n\t\t}\n\t\telse {\n\t\t\t$(this).show();\n\t\t}\n\t});\n\ttakenColorSuggesties();\n}\n\nlet lastSelectedId;\n/**\n * @param {KeyboardEvent} e\n */\nexport function takenSelectRange(e) {\n\tlet withinRange = false;\n\t$('#maalcie-tabel').find('tbody tr td a input[name=\"' + $(e.target).attr('name') + '\"]:visible').each(function () {\n\t\tlet thisId = $(this).attr('id');\n\t\tif (thisId === lastSelectedId) {\n\t\t\twithinRange = !withinRange;\n\t\t}\n\t\tif (thisId === e.target.id) {\n\t\t\twithinRange = !withinRange;\n\t\t\tlet check = $(this).prop('checked');\n\t\t\tsetTimeout(function () { // workaround e.preventDefault()\n\t\t\t\t$('#' + thisId).prop('checked', check);\n\t\t\t}, 50);\n\t\t}\n\t\telse if (e.shiftKey && withinRange) {\n\t\t\t$(this).prop('checked', true);\n\t\t}\n\t});\n\tlastSelectedId = e.target.id;\n}\n\n/**\n * @param {Event} e\n * @returns {boolean}\n */\nexport function takenSubmitRange(e) {\n\tif (e.target.tagName.toUpperCase() === 'IMG') { // over an image inside of anchor\n\t\te.target = $(e.target).parent();\n\t}\n\t$(e.target).find('input').prop('checked', true);\n\tif ($(e.target).hasClass('confirm') && !confirm($(e.target).attr('title') + '.\\n\\nWeet u het zeker?')) {\n\t\treturn false;\n\t}\n\t$('input[name=\"' + $(e.target).find('input:first').attr('name') + '\"]:visible').each(function () {\n\t\tif ($(this).prop('checked')) {\n\t\t\tajaxRequest('POST', $(this).parent().attr('href'), $(this).parent().attr('post'), $(this).parent(), domUpdate, alert);\n\t\t}\n\t});\n}\n\n/* Ruilen van CorveeTaak */\n\n/**\n * @param {Event} e\n */\nfunction takenMagRuilen(e) {\n\tif (e.target.tagName.toUpperCase() === 'IMG') { // over an image inside of anchor\n\t\te.target = $(e.target).parent();\n\t}\n\n\tlet source= dragObject.el;\n\tif ($(source).attr('id') !== $(e.target).attr('id')) {\n\t\te.preventDefault();\n\t}\n}\n\n/**\n * @param {Event} e\n */\nfunction takenRuilen(e) {\n\te.preventDefault();\n\tlet elmnt = e.target;\n\tif (elmnt.tagName.toUpperCase() === 'IMG') { // dropped on image inside of anchor\n\t\telmnt = $(elmnt).parent();\n\t}\n\tlet source = dragObject.el;\n\tif (!confirm('Toegekende corveepunten worden meegeruild!\\n\\nDoorgaan met ruilen?')) {\n\t\treturn;\n\t}\n\tlet attr = $(source).attr('uid');\n\tif (typeof attr === 'undefined' || attr === false) {\n\t\tattr = '';\n\t}\n\tajaxRequest('POST', $(elmnt).attr('href'), 'uid=' + attr, elmnt, domUpdate, alert);\n\tattr = $(elmnt).attr('uid');\n\tif (typeof attr === 'undefined' || attr === false) {\n\t\tattr = '';\n\t}\n\tajaxRequest('POST', $(source).attr('href'), 'uid=' + attr, source, domUpdate, alert);\n}\n\n$(function () {\n    $('a.ruilen').each(function () {\n        $(this).removeClass('ruilen');\n        $(this).on('dragover', takenMagRuilen);\n        $(this).on('drop', takenRuilen);\n    });\n});\n","import $ from 'jquery';\n\nimport {modalClose, modalOpen} from './modal';\nimport {ajaxRequest} from './ajax';\nimport initContext, {domUpdate} from './context';\nimport {fnUpdateDataTable} from './datatable-api';\n\nimport {redirect, reload} from './util';\nimport {fnGetSelection} from './datatable-api';\n\nexport function formIsChanged(form) {\n    let changed = false;\n    $(form).find('.FormElement').not('.tt-hint').each(function () {\n        let elmnt = $(this);\n        if (elmnt.is('input:radio')) {\n            if (elmnt.is(':checked') && elmnt.attr('origvalue') !== elmnt.val()) {\n                changed = true;\n                return false; // break each\n            }\n        }\n        else if (elmnt.is('input:checkbox')) {\n            if (elmnt.is(':checked') !== (elmnt.attr('origvalue') === '1')) {\n                changed = true;\n                return false; // break each\n            }\n        }\n        else if (elmnt.val() !== elmnt.attr('origvalue')) {\n            changed = true;\n            return false; // break each\n        }\n    });\n    return changed;\n}\n\n/**\n * @see templates/instellingen/beheer/instelling_row.tpl\n * @param form\n */\nexport function formInlineToggle(form) {\n    form.prev('.InlineFormToggle').toggle();\n    form.toggle();\n    form.children(':first').focus();\n}\n\nexport function formToggle(event) {\n    event.preventDefault();\n    let form = $(this).next('form');\n    formInlineToggle(form);\n    return false;\n}\n\nexport function formReset(event, form) {\n    if (!form) {\n        form = $(this).closest('form');\n        event.preventDefault();\n    }\n    if ($(this).hasClass('confirm') && !confirm($(this).attr('title') + '.\\n\\nWeet u het zeker?')) {\n        return false;\n    }\n    form.find('.FormElement').each(function () {\n        let orig = $(this).attr('origvalue');\n        if (typeof orig === 'string') {\n            $(this).val(orig);\n        }\n    });\n    return false;\n}\n\n/**\n * @see view/formulier/invoervelden/InputField.abstract.php\n * @see view/formulier/invoervelden/ZoekField.php\n * @param event\n * @returns {boolean}\n */\nexport function formSubmit(event) {\n    if ($(this).hasClass('confirm')) {\n        let q = $(this).attr('title');\n        if (q) {\n            q += '.\\n\\n';\n        }\n        else {\n            q = 'Weet u het zeker?';\n        }\n        if (!confirm(q)) {\n            event.preventDefault();\n            return false;\n        }\n    }\n\n    let form = $(this).closest('form');\n    if (!form.hasClass('Formulier')) {\n        if (event) {\n            form = $(event.target.form);\n        }\n        else {\n            return false;\n        }\n    }\n\n    if (form.hasClass('PreventUnchanged') && !formIsChanged(form)) {\n        event.preventDefault();\n        alert('Geen wijzigingen');\n        return false;\n    }\n\n    if ($(this).attr('href')) {\n        form.attr('action', $(this).attr('href'));\n    }\n\n    if (form.hasClass('ModalForm') || form.hasClass('InlineForm')) {\n        event.preventDefault();\n        let formData = new FormData(form.get(0)),\n            done = domUpdate,\n            source = false;\n\n        if (form.hasClass('InlineForm')) {\n            source = form;\n            formData.append('InlineFormId', form.attr('id'));\n            if (form.data('submitCallback')) {\n                done = form.data('submitCallback');\n            }\n        }\n\n        if (form.hasClass('DataTableResponse')) {\n\n            let tableId = form.attr('data-tableid');\n            if (!document.getElementById(tableId)) {\n                alert('DataTable not found');\n            }\n\n            formData.append('DataTableId', tableId);\n            let selection = fnGetSelection('#' + tableId);\n            $.each(selection, function (key, value) {\n                formData.append('DataTableSelection[]', value);\n            });\n\n            done = function (response) {\n                if (typeof response === 'object') { // JSON\n                    fnUpdateDataTable('#' + tableId, response);\n                    if (response.modal) {\n                        modalOpen(response.modal);\n                        initContext($('#modal'));\n                    }\n                    else {\n                        modalClose();\n                    }\n                }\n                else { // HTML\n                    domUpdate(response);\n                }\n            };\n\n            if (!form.hasClass('noanim')) {\n                source = false;\n            }\n        }\n\n        if (form.hasClass('ReloadPage')) {\n            done = reload;\n        }\n        else if (form.hasClass('redirect')) {\n            done = redirect;\n        }\n\n        ajaxRequest('POST', form.attr('action'), formData, source, done, alert, function () {\n            if (form.hasClass('SubmitReset')) {\n                formReset(event, form);\n            }\n        });\n\n        return false;\n    }\n    form.off('submit');\n    form.trigger('submit');\n    return true;\n}\n\n/**\n * @see view/formulier/invoervelden/InputField.abstract.php\n * @param event\n * @returns {boolean}\n */\nexport function formCancel(event) {\n    let source = $(event.target);\n    if (source.length === 0) {\n        source = $(this);\n    }\n    if (source.hasClass('confirm') && !confirm(source.attr('title') + '.\\n\\nWeet u het zeker?')) {\n        event.preventDefault();\n        return false;\n    }\n    let form = source.closest('form');\n    if (form.hasClass('InlineForm')) {\n        event.preventDefault();\n        formInlineToggle(form);\n        return false;\n    }\n    if (form.hasClass('ModalForm')) {\n        event.preventDefault();\n        if (!formIsChanged(form) || confirm('Sluiten zonder wijzigingen op te slaan?')) {\n            modalClose();\n        }\n        return false;\n    }\n    return true;\n}","import $ from 'jquery';\nimport Vue from 'vue';\nimport {knopGet, knopPost, knopVergroot, radioButtonGroep} from './knop';\nimport {modalClose, modalOpen} from './modal';\nimport {formCancel, formReset, formSubmit, formToggle} from './formulier';\n\nimport {bbCodeSet} from './bbcode-set';\n\nfunction initButtons(parent) {\n    $(parent).find('.spoiler').bind('click.spoiler', function (event) {\n        event.preventDefault();\n        let button = $(this);\n        let content = button.next('div.spoiler-content');\n        if (button.html() === 'Toon verklapper') {\n            button.html('Verberg verklapper');\n        }\n        else {\n            button.html('Toon verklapper');\n        }\n        content.toggle(800, 'easeInOutCubic');\n    });\n    $(parent).find('.post').bind('click.post', knopPost);\n    $(parent).find('.get').bind('click.get', knopGet);\n    $(parent).find('.vergroot').bind('click.vergroot', knopVergroot);\n}\n\nfunction initForms(parent) {\n    $(parent).find('form').submit(formSubmit);\n    $(parent).find('.submit').bind('click.submit', formSubmit);\n    $(parent).find('.reset').bind('click.reset', formReset);\n    $(parent).find('.cancel').bind('click.cancel', formCancel);\n    $(parent).find('.InlineFormToggle').bind('click.toggle', formToggle);\n    $(parent).find('.SubmitChange').bind('change.change', formSubmit);\n}\n\nfunction initTimeago(parent) {\n\t$.timeago.settings.strings = {\n\t\tprefiprefixAgo: '',\n\t\tprefixFromNow: 'sinds',\n\t\tsuffixAgo: 'geleden',\n\t\tsuffixFromNow: '',\n\t\tseconds: 'nog geen minuut',\n\t\tminute: '1 minuut',\n\t\tminutes: '%d minuten',\n\t\thour: '1 uur',\n\t\thours: '%d uur',\n\t\tday: '1 dag',\n\t\tdays: '%d dagen',\n\t\tmonth: '1 maand',\n\t\tmonths: '%d maanden',\n\t\tyear: '1 jaar',\n\t\tyears: '%d jaar',\n\t\twordSeparator: ' ',\n\t\tnumbers: [],\n\t};\n    $(parent).find('time.timeago').timeago();\n}\n\nfunction initMarkitup(parent) {\n    $(parent).find('textarea.BBCodeField').markItUp(bbCodeSet);\n}\n\nfunction initTooltips(parent) {\n    $(parent).uitooltip({track: true});\n}\n\nexport function initHoverIntents(parent) {\n    $(parent).find('.hoverIntent').hoverIntent({\n        over() {\n            $(this).find('.hoverIntentContent').fadeIn();\n        },\n        out() {\n            $(this).find('.hoverIntentContent').fadeOut();\n        },\n        timeout: 250\n    });\n}\n\nfunction initLazyImages(parent) {\n    $(parent).find('div.bb-img-loading').each(function () {\n        let content = $(document.createElement('IMG'));\n        content.on('error', function () {\n            $(this).attr('title', 'Afbeelding bestaat niet of is niet toegankelijk!');\n            $(this).attr('src', '/plaetjes/famfamfam/picture_error.png');\n            $(this).css('width', '16px');\n            $(this).css('height', '16px');\n            $(this).removeClass('bb-img-loading').addClass('bb-img');\n        });\n        content.addClass('bb-img');\n        content.attr('alt', $(this).attr('title'));\n        content.attr('style', $(this).attr('style'));\n        content.attr('src', $(this).attr('src'));\n        $(this).html(content);\n        content.on('load', function () {\n            let foto = content.attr('src').indexOf('/plaetjes/fotoalbum/') >= 0;\n            let video = $(this).parent().parent().hasClass('bb-video-preview');\n            let hasAnchor = $(this).closest('a').length !== 0;\n            $(this).parent().replaceWith($(this));\n            if (!foto && !video && !hasAnchor) {\n                $(this).wrap(`<a class=\"lightbox-link\" href=\"${$(this).attr('src')}\" data-lightbox=\"page-lightbox\"></a>`);\n            }\n        });\n    });\n}\n\nfunction initVue(parent) {\n\t$(parent).find('.vue-context').each(function () {\n\t\tnew Vue({el: this});\n\t});\n}\n\nexport default function initContext(parent) {\n    initButtons(parent);\n    initForms(parent);\n    initTimeago(parent);\n    initMarkitup(parent);\n    initTooltips(parent);\n    initHoverIntents(parent);\n    initLazyImages(parent);\n    radioButtonGroep(parent);\n    initVue(parent);\n}\n\nexport function domUpdate(htmlString) {\n    htmlString = $.trim(htmlString);\n    if (htmlString.substring(0, 9) === '<!DOCTYPE') {\n        alert('response error');\n        document.write(htmlString);\n    }\n    let html = $.parseHTML(htmlString, document, true);\n    $(html).each(function () {\n        let id = $(this).attr('id');\n\n        let elmnt = $('#' + id);\n        if (elmnt.length === 1) {\n            if ($(this).hasClass('remove')) {\n                elmnt.effect('fade', {}, 400, function() {\n                    $(this).remove();\n                });\n            }\n            else {\n                elmnt.replaceWith($(this).show()).effect('highlight');\n            }\n        }\n        else {\n            let parentid = $(this).attr('parentid');\n            if (parentid) {\n                $(this).prependTo(`#${parentid}`).show().effect('highlight');\n            }\n            else {\n                $(this).prependTo('#maalcie-tabel tbody:visible:first').show().effect('highlight'); //FIXME: make generic\n            }\n        }\n        initContext($(this));\n\n        if (id === 'modal') {\n            modalOpen();\n        }\n        else {\n            modalClose();\n        }\n    });\n}\n","import $ from 'jquery';\n\nimport {modalClose, modalOpen} from './modal';\nimport {ajaxRequest} from './ajax';\nimport initContext, {domUpdate} from './context';\nimport {takenSelectRange, takenSubmitRange} from './maalcie';\nimport {fnGetSelection, fnUpdateDataTable} from './datatable-api';\nimport {redirect, reload} from './util';\n\nexport function radioButtonGroep(parent) {\n\t$(parent).find('[data-buttons=radio]').each(function () {\n\t\tlet container = $(this);\n\n\t\tcontainer.find('a.btn').on('click', function (event) {\n\t\t\tcontainer.find('.active').removeClass('active');\n\n\t\t\t$(event.target).addClass('active');\n\t\t});\n\t});\n}\n\nexport function knopAjax(knop, type) {\n    if (knop.hasClass('confirm') && !confirm(knop.attr('title') + '.\\n\\nWeet u het zeker?')) {\n        modalClose();\n        return false;\n    }\n    let source = knop,\n        done = domUpdate,\n        data = knop.data();\n\n    if (knop.hasClass('popup')) {\n        source = false;\n    }\n    if (knop.hasClass('prompt')) {\n        data = data.split('=');\n        let val = prompt(data[0], data[1]);\n        if (!val) {\n            return false;\n        }\n        data = encodeURIComponent(data[0]) + '=' + encodeURIComponent(val);\n    }\n    if (knop.hasClass('addfav')) {\n        data = {\n            'tekst': document.title.replace('C.S.R. Delft - ', ''),\n            'link': window.location.href\n        };\n    }\n    if (knop.hasClass('DataTableResponse')) {\n\n        let tableId = knop.attr('data-tableid');\n        if (!document.getElementById(tableId)) {\n            tableId = knop.closest('form').attr('data-tableid');\n            if (!document.getElementById(tableId)) {\n                alert('DataTable not found');\n            }\n        }\n\n        let selection = fnGetSelection('#' + tableId);\n        data = {\n            'DataTableId': tableId,\n            'DataTableSelection[]': selection\n        };\n\n        done = function (response) {\n            if (typeof response === 'object') { // JSON\n                fnUpdateDataTable('#' + tableId, response);\n                if (response.modal) {\n                    modalOpen(response.modal);\n                    initContext($('#modal'));\n                }\n                else {\n                    modalClose();\n                }\n            }\n            else { // HTML\n                domUpdate(response);\n            }\n        };\n\n        if (!knop.hasClass('SingleRow')) {\n            source = false;\n        }\n    }\n    if (knop.hasClass('ReloadPage')) {\n        done = reload;\n    }\n    else if (knop.hasClass('redirect')) {\n        done = redirect;\n    }\n\n    ajaxRequest(type, knop.attr('href'), data, source, done, alert);\n}\n\n/**\n * @see datatable.js\n * @param event\n * @returns {boolean}\n */\nexport function knopPost(event) {\n    event.preventDefault();\n    if ($(this).hasClass('range')) {\n        if (event.target.tagName.toUpperCase() === 'INPUT') {\n            takenSelectRange(event);\n        }\n        else {\n            takenSubmitRange(event);\n        }\n        return false;\n    }\n    knopAjax($(this), 'POST');\n    return false;\n}\n\nexport function knopGet(event) {\n    event.preventDefault();\n    knopAjax($(this), 'GET');\n    return false;\n}\n\nexport function knopVergroot() {\n    let knop = $(this),\n        id = knop.attr('data-vergroot'),\n        oud = knop.attr('data-vergroot-oud');\n\n    if (oud) {\n        $(id).animate({'height': oud}, 600);\n        knop.removeAttr('data-vergroot-oud');\n        knop.find('span.fa').removeClass('fa-compress').addClass('fa-expand');\n        knop.attr('title', 'Uitklappen');\n    }\n    else {\n        knop.attr('title', 'Inklappen');\n        knop.find('span.fa').removeClass('fa-expand').addClass('fa-compress');\n        knop.attr('data-vergroot-oud', $(id).height());\n        $(id).animate({\n            'height': $(id).prop('scrollHeight') + 1\n        }, 600);\n    }\n}\n","import $ from 'jquery';\nexport var dragObject = {\n    el: undefined\n};\n$(function () {\n    var dragged, oldX, oldY;\n    function docScrollLeft() {\n        return (document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft);\n    }\n    function docScrollTop() {\n        return (document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop);\n    }\n    function mouseX(e) {\n        if (e.pageX) {\n            return e.pageX;\n        }\n        if (e.clientX) {\n            return e.clientX + docScrollLeft();\n        }\n        return 0;\n    }\n    function mouseY(e) {\n        if (e.pageY) {\n            return e.pageY;\n        }\n        if (e.clientY) {\n            return e.clientY + docScrollTop();\n        }\n        return 0;\n    }\n    function mouseMoveHandler(e) {\n        if (!dragObject.el) {\n            return;\n        }\n        var instance = dragObject.el;\n        e = e || window.event;\n        var newX = mouseX(e);\n        var newY = mouseY(e);\n        dragged = instance.hasClass('savepos');\n        var scrollTop = instance.scrollTop() || 0, scrollLeft = instance.scrollLeft() || 0;\n        if (instance.hasClass('dragvertical')) {\n            instance.scrollTop(scrollTop + oldY - newY);\n        }\n        else if (instance.hasClass('draghorizontal')) {\n            instance.scrollLeft(scrollLeft + oldX - newX);\n        }\n        else {\n            var offset = instance.offset() || { left: 0, top: 0 };\n            instance.css({\n                'top': (offset.top - docScrollTop() + newY - oldY) + 'px',\n                'left': (offset.left - docScrollLeft() + newX - oldX) + 'px'\n            });\n        }\n        oldX = newX;\n        oldY = newY;\n    }\n    function startDrag(e) {\n        e = e || window.event;\n        var target = e.target;\n        if (target instanceof Element) {\n            var tag = target.tagName.toUpperCase();\n            var overflow = $(target).css('overflow');\n            if ((tag !== 'DIV' && tag !== 'H1') || overflow === 'auto' || overflow === 'scroll') {\n                return;\n            }\n            dragObject.el = $(target);\n            if (typeof dragObject.el === 'undefined' || !dragObject.el.hasClass('dragobject')) {\n                dragObject.el = $(target).closest('.dragobject');\n            }\n            if (typeof dragObject.el !== 'undefined') {\n                oldX = mouseX(e);\n                oldY = mouseY(e);\n                window.addEventListener('mousemove', mouseMoveHandler, true);\n            }\n            else {\n                dragObject.el = undefined;\n            }\n        }\n        dragged = false;\n    }\n    function stopDrag() {\n        if (!dragObject.el) {\n            return;\n        }\n        window.removeEventListener('mousemove', mouseMoveHandler, true);\n        if (dragged) {\n            var instance = dragObject.el;\n            var top = void 0, left = void 0;\n            if (instance.hasClass('dragvertical') || instance.hasClass('draghorizontal')) {\n                top = instance.scrollTop();\n                left = instance.scrollLeft();\n            }\n            else {\n                var offset = instance.offset() || { top: 0, left: 0 };\n                top = offset.top - docScrollTop();\n                left = offset.left - docScrollLeft();\n            }\n            $.post('/tools/dragobject.php', {\n                id: instance.attr('id'),\n                coords: {\n                    top: top,\n                    left: left\n                }\n            });\n            dragged = false;\n        }\n        dragObject.el = undefined;\n    }\n    window.addEventListener('mousedown', startDrag, false);\n    window.addEventListener('mouseup', stopDrag, false);\n});\n","// ----------------------------------------------------------------------------\n// markItUp!\n// ----------------------------------------------------------------------------\n// Copyright (C) 2008 Jay Salvat\n// http://markitup.jaysalvat.com/\n// ----------------------------------------------------------------------------\n// BBCode tags example\n// http://en.wikipedia.org/wiki/Bbcode\n// ----------------------------------------------------------------------------\n// Feel free to add more tags\n// ----------------------------------------------------------------------------\nexport const bbCodeSet = {\n    nameSpace: 'CsrBB',\n    previewParserPath: '/tools/bbcode.php', // path to your BBCode parser\n    markupSet: [\n        {className: 'ico text_bold', name: 'Dikgedrukt', key: 'B', openWith: '[b]', closeWith: '[/b]'},\n        {className: 'ico text_italic', name: 'Cursief', key: 'I', openWith: '[i]', closeWith: '[/i]'},\n        {className: 'ico text_underline', name: 'Onderstreept', key: 'U', openWith: '[u]', closeWith: '[/u]'},\n        {className: 'ico text_strikethrough', name: 'Doorgestreept', key: 'S', openWith: '[s]', closeWith: '[/s]'},\n        {separator: '|'},\n        {className: 'ico text_smallcaps', name: 'Offtopic', key: 'O', openWith: '[offtopic]', closeWith: '[/offtopic]'},\n        {className: 'ico comments', name: 'Citaat', key: 'Q', openWith: '[citaat=Naam_of_lidnummer]', closeWith: '[/citaat]'},\n        {separator: '|'},\n        {className: 'ico link', name: 'Link', key: 'L', openWith: '[url=[![Url]!]]', closeWith: '[/url]', placeHolder: 'Link tekst'},\n        {className: 'ico email_link', name: 'Email', key: 'E', openWith: '[email=[![Email adres]!]]', closeWith: '[/email]', placeHolder: 'Link tekst'},\n        {separator: '|'},\n        {className: 'ico photos', name: 'Fotoalbum', replaceWith: (markitup) => {\n                let url = decodeURIComponent(window.prompt('Url', '').trim());\n                let pos = url.indexOf('/fotoalbum/');\n                if (pos > 0) {\n                    url = url.substring(pos + 10);\n                    return '[fotoalbum]' + url + '[/fotoalbum]';\n                }\n                alert('Ongeldige url!');\n                return markitup.selection;\n            }},\n        {className: 'ico photo', name: 'Poster of foto uit album', replaceWith: (markitup) => {\n                let url = decodeURIComponent(window.prompt('Url', '').trim());\n                let pos = url.indexOf('/fotoalbum/');\n                if (pos > 0) {\n                    url = url.substring(pos + 10).replace('_resized/', '').replace('_thumbs/', '').replace('#', '');\n                    return '[foto]' + url + '[/foto]';\n                }\n                alert('Ongeldige url!');\n                return markitup.selection;\n            }},\n        {className: 'ico picture', name: 'Afbeelding', replaceWith: '[img][![Url]!][/img]'},\n        {className: 'ico film', name: 'Video', replaceWith: '[video][![Url]!][/video]'},\n        {separator: '|'},\n        {className: 'ico map', name: 'Kaart', openWith: '[locatie]', closeWith: '[/locatie]', placeHolder: 'C.S.R. Delft'},\n        {className: 'ico sound_mute', name: 'Verklapper', openWith: '[verklapper]', closeWith: '[/verklapper]'},\n        {className: 'ico shield', name: 'Privé', openWith: '[prive]', closeWith: '[/prive]', placeHolder: 'Afgeschermde gegevens'},\n        //{className: 'btn-kop', name: 'Kop',\n        //\tdropMenu: [\n        //\t\t{className: 'btn-h1', name: 'H1', openWith: '[h=1]', closeWith: '[/h]'},\n        //\t\t{className: 'btn-h2', name: 'H2', openWith: '[h=2]', closeWith: '[/h]'},\n        //\t\t{className: 'btn-h3', name: 'H3', openWith: '[h=3]', closeWith: '[/h]'},\n        //\t\t{className: 'btn-h4', name: 'H4', openWith: '[h=4]', closeWith: '[/h]'},\n        //\t\t{className: 'btn-h5', name: 'H5', openWith: '[h=5]', closeWith: '[/h]'},\n        //\t\t{className: 'btn-h6', name: 'H6', openWith: '[h=6]', closeWith: '[/h]'}\n        //\t]},\n        //{separator: '|'},\n        //{className: 'btn-lijst-1', name: 'Genummerde lijst', openWith: '[list=[![Starting number]!]]\\n', closeWith: '\\n[/list]'},\n        //{className: 'btn-lijst-a', name: 'Ongenummerde lijst', openWith: '[list]\\n', closeWith: '\\n[/list]'},\n        //{className: 'btn-lijst-punt', name: 'Lijstpunt', openWith: '[*] '},\n        {separator: '|'},\n        {className: 'ico script_code_red', name: 'Code', openWith: '[code]', closeWith: '[/code]'},\n        {className: 'ico tag', name: 'Opmaakcode tonen', openWith: '[tekst]', closeWith: '[/tekst]'},\n        //{className: 'btn-preview', name: 'Voorbeeld', call: 'preview'}\n    ]\n};","import $ from 'jquery';\nimport initContext from './context';\n\n/**\n * @see templates/courant/courantbeheer.tpl\n * @see blade_templates/forum/partial/post_forum.blade.php\n * @see templates/mededelingen/mededeling.tpl\n * @see templates/roodschopper/roodschopper.tpl\n * @see forum.js\n * @see view/formulier/invoervelden/BBCodeField.class.php\n * @param sourceId\n * @param targetId\n * @constructor\n */\nexport const CsrBBPreview = (sourceId, targetId) => {\n    if (sourceId.charAt(0) !== '#') {\n        sourceId = `#${sourceId}`;\n    }\n    if (targetId.charAt(0) !== '#') {\n        targetId = `#${targetId}`;\n    }\n    let bbcode = $(sourceId).val();\n    if (typeof bbcode !== 'string' || bbcode.trim() === '') {\n        $(targetId).html('').hide();\n        return;\n    }\n    $.post('/tools/bbcode.php', {\n        data: encodeURIComponent(bbcode)\n    }).done((data) => {\n        $(targetId).html(data);\n        initContext($(targetId));\n        $(targetId).show();\n    }).fail((error) => {\n        alert(error);\n    });\n};\n\n/**\n * @see view/bbcode/CsrBB.class.php\n * @param elem\n * @returns {boolean}\n */\nexport const bbvideoDisplay = function(elem) {\n    let $previewdiv = $(elem);\n    let params = $previewdiv.data('params');\n    if(params.iframe) {\n        //vervang de thumb door een iframe\n        $previewdiv.parent().html(\n            '<iframe frameborder=\"0\" width=\"' + params.width + '\" height=\"' + params.height + '\" src=\"' + params.src + '\" allowfullscreen></iframe>'\n        );\n    } else {\n        //godtube is nog flash (of alternatief iets met javascript, maar geen iframe versie beschikbaar)\n        $previewdiv.parent().html(\n            '<object type=\"application/x-shockwave-flash\" data=\"http://www.godtube.com/resource/mediaplayer/5.3/player.swf\"  width=\"' + params.width + '\" height=\"' + params.height + '\">' +\n            '<param name=\"allowfullscreen\" value=\"true\" />' +\n            '<param name=\"allowscriptaccess\" value=\"always\" />' +\n            '<param name=\"wmode\" value=\"opaque\" />' +\n            '<param name=\"movie\" value=\"http://www.godtube.com/resource/mediaplayer/5.3/player.swf\" />' +\n            '<param name=\"autostart\" value=\"true\" />' +\n            '<param name=\"flashvars\" value=\"file=http://www.godtube.com/resource/mediaplayer/' + params.id + '.file' +\n            '&image=http://www.godtube.com/resource/mediaplayer/' + params.id + '.jpg' +\n            '&screencolor=000000' +\n            '&type=video' +\n            '&autostart=true' +\n            '&playonce=true' +\n            '&skin=http://www.godtube.com//resource/mediaplayer/skin/carbon/carbon.zip' +\n            '&logo.file=http://media.salemwebnetwork.com/godtube/theme/default/media/embed-logo.png' +\n            '&logo.link=http://www.godtube.com/watch/?v=' + params.id +\n            '&logo.position=top-left' +\n            '&logo.hide=false' +\n            '&controlbar.position=over\">' +\n            '</object>'\n        );\n    }\n\n    return false;\n};\n"],"sourceRoot":""}