(window.webpackJsonp=window.webpackJsonp||[]).push([[26,15],{134:function(e,t,a){var n={"./nl":97,"./nl.js":97};function r(e){var t=i(e);return a(t)}function i(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=i,e.exports=r,r.id=134},158:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(30),i=a(1);const o=(e,t="id")=>({attrs:{[t]:{}},group:"block",draggable:!0,toDOM:a=>["div",{["data-"+e]:a.attrs[t],class:"pm-block"},`${e}: ${a.attrs[t]}`],parseDOM:[{tag:"div[data-"+e,getAttrs:a=>({[t]:a.dataset[e]})}]}),l=o("activiteit"),s=o("bestuur"),c=o("commissie"),d=o("groep"),u=o("ketzer"),p=o("ondervereniging"),b=o("verticale"),m=o("ondervereniging"),f=o("woonoord"),g=o("boek"),v=o("document"),h=o("maaltijd");var _=a(25);const O={doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:()=>["p",0]},blockquote:{content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:()=>["blockquote",0]},citaat:{attrs:{van:{},naam:{default:"Lid"},url:{default:""}},content:"block+",group:"block",defining:!0,parseDOM:[{tag:"div[data-bb-citaat]",getAttrs:e=>({van:e.dataset.bbCitaat,naam:e.dataset.bbCitaatNaam,url:e.dataset.bbCitaatUrl})}],toDOM:e=>["div",{"data-bb-citaat":e.attrs.van,"data-bb-citaat-naam":e.attrs.naam,"data-bb-citaat-url":e.attrs.url},0]},lid:{attrs:{uid:{},naam:{default:null}},group:"inline",inline:!0,parseDOM:[{tag:"span[data-lid]",getAttrs:e=>({uid:e.dataset.lid,naam:e.dataset.lidNaam})}],toDOM:e=>["span",{"data-lid":e.attrs.uid,"data-lidNaam":e.attrs.naam},e.attrs.naam]},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:()=>["hr"]},heading:{attrs:{level:{default:1}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM:e=>["h"+e.attrs.level,0]},code_block:{content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:()=>["pre",["code",0]]},text:{group:"inline"},image:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:e=>{if(e instanceof HTMLElement)return{src:e.getAttribute("src"),title:e.getAttribute("title"),alt:e.getAttribute("alt")};throw new Error("Unable to process dom")}}],toDOM:e=>{const{src:t,alt:a,title:n}=e.attrs;return["img",{src:t,alt:a,title:n}]}},plaatje:{inline:!0,attrs:{src:{},key:{}},group:"inline",draggable:!0,parseDOM:[{tag:"[data-plaatje]",getAttrs:e=>({key:e.dataset.plaatje,src:e.dataset.plaatjeSrc})}],toDOM:e=>["div",{"data-plaatje":e.attrs.key,"data-plaatje-src":e.attrs.src},["img",{src:e.attrs.src}]]},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:()=>["br"]},verklapper:{content:"block+",group:"block",parseDOM:[{tag:"div[data-bb-verklapper]"}],toDOM:()=>["div",{"data-bb-verklapper":"",class:"pm-verklapper"},0]},bb:{attrs:{bb:{default:null}},group:"block",toDOM:e=>["div",{"data-bb":e.attrs.bb},e.attrs.bb],parseDOM:[{tag:"div[data-bb]",getAttrs:e=>({bb:e.dataset.bb})}]},activiteit:l,bestuur:s,commissie:c,groep:d,ketzer:u,ondervereniging:p,verticale:b,werkgroep:m,woonoord:f,boek:g,document:v,maaltijd:h,twitter:{attrs:{url:{}},group:"block",parseDOM:[{tag:"div[data-bb-twitter]",getAttrs:e=>({url:e.dataset.bbTwitter})}],toDOM:e=>["div",{"data-bb-twitter":e.attrs.url}]},youtube:{attrs:{id:{}},group:"block",parseDOM:[{tag:"div[data-bb-youtube]"}],toDOM:e=>["div",{"data-bb-youtube":e.attrs.id,class:"bb-video",title:"YouTube"},["img",{src:`https://i.ytimg.com/vi/${e.attrs.id}/sddefault.jpg`}]]},video:{attrs:{url:{}},group:"block",parseDOM:[{tag:"div[data-bb-video]",getAttrs:e=>({url:e.dataset.bbVideo})}],toDOM:e=>["div",{"data-bb-video":e.attrs.url}]},audio:{attrs:{url:{}},group:"block",parseDOM:[{tag:"div[data-bb-audio]",getAttrs:e=>({url:e.dataset.bbAudio})}],toDOM:e=>["div",{"data-bb-audio":e.attrs.url}]},spotify:{attrs:{url:{},formaat:{default:"hoog"}},group:"block",parseDOM:[{tag:"div[data-bb-spotify]",getAttrs:e=>({url:e.dataset.bbSpotify,formaat:e.dataset.bbSpotifyFormaat})}],toDOM:e=>["div",{"data-bb-spotify":e.attrs.url,"data-bb-spotify-formaat":e.attrs.formaat}]}},k={link:{attrs:{href:{},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:e=>{if(e instanceof HTMLElement)return{href:e.getAttribute("href"),title:e.getAttribute("title")};throw new Error("Cannot process dom")}}],toDOM:e=>{const{href:t,title:a}=e.attrs;return["a",{href:t,title:a},0]}},em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:()=>["em",0]},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:e=>{if(e instanceof HTMLElement)return"normal"!=e.style.fontWeight&&null;throw new Error("Cannot process dom")}},{style:"font-weight",getAttrs:e=>{if("string"==typeof e)return/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null;throw new Error("Cannot process value")}}],toDOM:()=>["strong",0]},superscript:{excludes:"superscript subscript",parseDOM:[{tag:"sup"}],toDOM:()=>["sup",0]},subscript:{excludes:"subscript superscript",parseDOM:[{tag:"sub"}],toDOM:()=>["sub",0]},strikethrough:{parseDOM:[{tag:"del"}],toDOM:()=>["del",0]},underline:{parseDOM:[{tag:"ins"}],toDOM:()=>["ins",0]},code:{parseDOM:[{tag:"code"}],toDOM:()=>["code",0]},offtopic:{parseDOM:[{tag:"span[data-offtopic]"}],toDOM:()=>["span",{"data-offtopic":"",class:"offtopic"},0]},neuzen:{parseDom:[{tag:"span[data-neuzen]"}],toDOM:()=>["span",{"data-neuzen":""},0]},prive:{attrs:{prive:{default:null}},parseDOM:[{tag:"span[data-prive]"}],toDOM:e=>["span",{"data-prive":e.attrs.prive,class:"bb-prive",title:"Prive: "+(e.attrs.prive||"P_LOGGED_IN")},0]}},w=a(58).a.from(O),j=new i.k({nodes:Object(_.a)(w,"paragraph block*","block"),marks:k});var D=a(122),y=a(7),M=a(23),E=a(4),T=a(44),L=a.n(T);const A="ProseMirror-popup";function S(e){const t=E.j`
		<button type="submit" class="${A}-submit btn btn-primary">OK</button>`,a=E.j`
		<button type="button" class="${A}-cancel btn btn-primary">Cancel</button>`,n=document.createElement("form"),r=n.appendChild(E.j`
		<div class="modal-body"></div>`),i=n.appendChild(E.j`
		<div class="modal-footer"></div>`);e.description&&r.appendChild(E.j`<p>${e.description}</p>`),Object.entries(e.fields).forEach(([e,t])=>{r.appendChild(E.j`
			<div class="form-group row">
				<label class="col-sm-2 col-form-label" for="${e}">${t.options.label}${t.options.required?E.j`<span class="text-danger">*</span>`:""}</label>
				<div class="col-sm-10">${t.render(e)}</div>
			</div>`)}),i.appendChild(E.j`
		<div class="${A}-buttons">${t} ${a}</div>`);const o=E.j`
		<div class="modal" style="display: block;" tabindex="-1">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title">${e.title}</h5>
					</div>
					${n}
				</div>
			</div>
		</div>`;document.body.appendChild(o);const l=e=>{n.contains(e.target)||s()};setTimeout(()=>window.addEventListener("mousedown",l),50);const s=()=>{window.removeEventListener("mousedown",l),o.parentNode&&o.parentNode.removeChild(o)};a.addEventListener("click",s);const c=()=>{const t=function(e,t){const a=Object.create(null);for(const n of Object.keys(e)){const r=e[n],i=t[n],o=r.read(i),l=r.validate(o);if(l)return C(i,l),null;a[n]=r.clean(o)}return a}(e.fields,n);t&&(s(),e.callback(t))};n.addEventListener("submit",e=>{e.preventDefault(),c()}),n.addEventListener("keydown",e=>{"Escape"==e.key?(e.preventDefault(),s()):"Enter"!=e.key||e.ctrlKey||e.metaKey||e.shiftKey||"textarea"==document.activeElement.tagName.toLowerCase()?"Tab"==e.key&&window.setTimeout(()=>{o.contains(document.activeElement)||s()},500):(e.preventDefault(),c())});const d=n.elements[0];d&&d.focus()}function C(e,t){const a=e.parentNode,n=a.appendChild(document.createElement("div"));n.style.left=e.offsetLeft+e.offsetWidth+2+"px",n.style.top=e.offsetTop-5+"px",n.className="ProseMirror-invalid",n.textContent=t,setTimeout(()=>a.removeChild(n),1500)}class P{constructor(e){this.options=e}read(e){return e.value}validateType(e){return null}validate(e){return!e&&this.options.required?"Required field":this.validateType(e)||this.options.validate&&this.options.validate(e)}clean(e){return this.options.clean?this.options.clean(e):e}render(e){return null}}class x extends P{render(e){return E.j`<input type="text" name="${e}" id="${e}" value="${this.options.value||""}" autocomplete="off"
											 class="form-control"/>`}}class U extends P{render(e){return E.j`<div>${this.options.value}</div>`}read(e){return""}}class I extends P{render(e){const t=document.createElement("textarea");return t.id=e,t.name=e,t.classList.add("form-control"),t.placeholder=this.options.label,t.value=this.options.value||"",t.autocomplete="off",t.rows=20,t}}class W extends P{render(e){const t=document.createElement("input");return t.id=e,t.name=e,t.classList.add("form-control"),t.type="file",t}read(e){return e.files[0]}}class q extends P{render(e){this.name=e;const t=E.j`<input type="text" class="form-control" autocomplete="off" name="${e}_naam" value="${this.options.value.naam}">`,a=E.j`<input type="hidden" name="${e}_uid" value="${this.options.value.uid}">`,n=E.j`<input type="hidden" name="${e}">`,r=new L.a({datumTokenizer:L.a.tokenizers.obj.whitespace("value"),queryTokenizer:L.a.tokenizers.whitespace,remote:{url:"/tools/naamsuggesties?vorm=user&zoekin=voorkeur&q=%QUERY",wildcard:"%QUERY"}});r.initialize();let i=this.options.value.naam;return setTimeout(()=>{$(t).typeahead({hint:!0,highlight:!0},{name:"leden",display:"value",limit:20,source:r.ttAdapter(),templates:{suggestion:function(e){let t="<p";return e.title&&(t+=' title="'+e.title+'"'),t+=">",e.icon&&(t+=e.icon),t+=e.value,e.label&&(t+='<span class="lichtgrijs"> - '+e.label+"</span>"),t+"</p>"}}}),$(t).on("typeahead:select",(e,t)=>{a.value=t.uid,i=t.value}),$(t).on("typeahead:change",(e,t)=>{i!=t&&(a.value="")})}),E.j`
			<div>
				${t}
				${a}
				${n}
			</div>`}read(e){return{naam:e.form[this.name+"_naam"].value,uid:e.form[this.name+"_uid"].value}}validate(e){return this.options.required&&!e.uid?"Selecteer een lid":super.validate(e)}}const R=(e,t,a)=>S({title:"Bewerk bb",fields:{bb:new I({label:"Bb",value:t.bb})},callback(t){a.dispatch(a.state.tr.replaceSelectionWith(e.createAndFill(t))),a.focus()}});var F=a(8);const B=new n.d({state:{init:()=>r.b.empty,apply(e,t){t=t.map(e.mapping,e.doc);const a=e.getMeta(this);if(a&&a.add){const n=document.createElement("div");n.classList.add("plaatje-placeholder");const i=r.a.widget(a.add.pos,n,{id:a.add.id});t=t.add(e.doc,[i])}else a&&a.remove&&(t=t.remove(t.find(null,null,e=>e.id==a.remove.id)));return t}},props:{decorations(e){return this.getState(e)}}});var z=a(12),H=a.n(z);async function N(e,t){const a={},n=e.state.tr;n.selection.empty||n.deleteSelection(),n.setMeta(B,{add:{id:a,pos:n.selection.from}}),e.dispatch(n);try{const{src:n,key:r}=await async function(e){const t=new FormData;return t.append("image_HF",e,e.name),t.append("image","image_HF"),(await H.a.post("/forum/plaatjes/upload_json",t,{headers:{"content-type":"multipart/form-data"}})).data}(t),i=((e,t)=>{const a=B.getState(e).find(null,null,e=>e.id==t);return a.length?a[0].from:null})(e.state,a);if(null==i)return;e.dispatch(e.state.tr.replaceWith(i,i,e.state.schema.nodes.plaatje.create({src:n,key:r})).setMeta(B,{remove:{id:a}}))}catch(t){throw e.dispatch(n.setMeta(B,{remove:{id:a}})),t}}var K=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a};function G(e,t){const a=e.selection.$from;for(let e=a.depth;e>=0;e--){const n=a.index(e);if(a.node(e).canReplaceWith(n,n,t))return!0}return!1}const Y=e=>new y.c({title:"Afbeelding invoegen",label:"Afbeelding",enable:t=>G(t,e),run(t,a,r){let i=null;t.selection instanceof n.c&&t.selection.node.type==e&&(i=t.selection.node.attrs),S({title:"Afbeelding invoegen",fields:{src:new x({label:"Locatie",required:!0,value:i&&i.src})},callback:t=>{r.dispatch(r.state.tr.replaceSelectionWith(e.createAndFill(t))),r.focus()}})}});function V(e){return new y.c({label:"Citaat",title:"Citaat invoegen",enable:t=>G(t,e),run:(t,a,r)=>{let i=null,o=null;t.selection instanceof n.c&&t.selection.node.type==e&&(i=t.selection.node.attrs,o=t.selection.node.content),S({description:"",title:i?"Update: "+e.name:"Invoegen: "+e.name,fields:{lid:new q({label:"Lid",required:!1,value:i&&Object(E.w)(i.van)?{naam:i.naam,uid:i.van}:{naam:"",uid:""}}),of:new U({label:"",value:"- Of -"}),naam:new x({label:"Van",required:!1,value:i&&!Object(E.w)(i.van)?i.naam:""}),url:new x({label:"Url",required:!1,value:i&&!Object(E.w)(i.van)?i.url:""})},callback({lid:t,naam:a,url:n}){const i=t.uid?{naam:t.naam,van:t.uid}:{van:a,naam:a,url:n};r.dispatch(r.state.tr.replaceSelectionWith(e.createAndFill(Object.assign({type:e.name},i),o))),r.focus()}})}})}function J(e,t){var{enabled:a}=t,n=K(t,["enabled"]);const r=Object.assign({label:"string"==typeof n.title?n.title:"",run:e},n);return a&&!0!==a||n.select||(r[a?"enable":"select"]=t=>e(t)),new y.c(r)}function Q(e,t){const{from:a,$from:n,to:r,empty:i}=e.selection;return i?!!t.isInSet(e.storedMarks||n.marks()):e.doc.rangeHasMark(a,r,t)}const X=(e,t)=>J(Object(F.i)(e),Object.assign({active:t=>Q(t,e),enabled:!0},t)),Z=(e,t)=>J(Object(_.e)(e,null),t),ee=e=>new y.c({title:"Markeer tekst als prive",label:"Prive",active:t=>Q(t,e),enable:e=>!e.selection.empty,run(t,a,n){if(Q(t,e))return Object(F.i)(e)(t,a),!0;S({title:"Markeer als prive",fields:{prive:new x({label:"Rechten (leeg voor ingelogd)"})},callback(t){Object(F.i)(e,t)(n.state,n.dispatch),n.focus()}})}}),te=(e,t,a,r="")=>new y.c({title:a,label:t,enable:t=>G(t,e),run:(t,a,i)=>{let o=null,l=null;t.selection instanceof n.c&&t.selection.node.type==e&&(o=t.selection.node.attrs,l=t.selection.node.content),S({description:r,title:o?"Update: "+e.name:"Invoegen: "+e.name,fields:Object.fromEntries(Object.entries(e.spec.attrs).map(([e,t])=>[e,new x({label:Object(E.v)(e),required:void 0===t.default,value:o?o[e]:t.default})])),callback(t){i.dispatch(i.state.tr.replaceSelectionWith(e.createAndFill(Object.assign({type:e.name},t),l))),i.focus()}})}}),ae=e=>new y.c({title:"BB code als platte tekst invoegen",label:"BB code",enable:t=>G(t,e),run:(t,a,r)=>{let i={bb:""};t.selection instanceof n.c&&t.selection.node.type==e&&(i=t.selection.node.attrs),R(e,i,r)}}),ne=(e,t)=>new y.c({title:"Afbeelding invoegen",label:"Afbeelding",enable:a=>G(a,e)||G(a,t),run:(e,a,n)=>{S({title:"Plaatje uploaden",fields:{image:new W({label:"Afbeelding"}),of:new U({label:"",value:"- Of -"}),url:new x({label:"Url"})},callback:e=>{e.url?(n.dispatch(n.state.tr.replaceSelectionWith(t.createAndFill({src:e.url}))),n.focus()):e.image&&N(n,e.image)}})}});var re={strong:{dom:E.j`<i class="fa fa-bold"></i>`},em:{dom:E.j`<i class="fa fa-italic"></i>`},link:{dom:E.j`<i class="fa fa-link"></i>`},undo:{dom:E.j`<i class="fa fa-undo"></i>`},redo:{dom:E.j`<i class="fa fa-redo"></i>`},ol:{dom:E.j`<i class="fa fa-list-ol"></i>`},ul:{dom:E.j`<i class="fa fa-list-ul"></i>`},quote:{dom:E.j`<i class="fa fa-quote-right"></i>`},underline:{dom:E.j`<i class="fa fa-underline"></i>`},selectParentNode:{dom:E.j`<i class="fa fa-object-group"></i>`},lift:{dom:E.j`<i class="fa fa-outdent"></i>`},prive:{dom:E.j`<i class="fa fa-user-shield"></i>`},join:{dom:E.j`<i class="fa fa-caret-up"></i>`}};var ie=a(17);const oe=e=>new n.d({appendTransaction(t,a,n){e.value=JSON.stringify(n.doc.toJSON())}});var le=a(108);let se=0,ce=[],de=H.a.CancelToken.source();const ue=(e,t)=>{const a=document.querySelector(".lid-hints");if(!a)return;const n=e.dom.parentElement.getBoundingClientRect();a.style.left=t.left-n.left+"px",a.style.top=t.bottom-n.top+"px"},pe=()=>{const e=document.querySelector(".lid-hints");e&&e.remove()},be=()=>{const e=document.querySelector(".lid-hints");for(const t of Array.from(e.children))t.classList.remove("active");const t=e.children.item(se);t&&t.classList.add("active")},me={noDecorations:!0,char:"@",name:"lid-hint",appendText:"",keyBindings:{ArrowUp:()=>{se=(se-1+ce.length)%ce.length,be()},ArrowDown:()=>{se=(se+1)%ce.length,be()},Enter:({command:e,event:t})=>{t.preventDefault(),e(ce[se])},Tab:({command:e,event:t})=>{t.preventDefault(),e(ce[se])},Esc:()=>{pe()}},onChange:async({command:e,queryText:t,range:a,view:n})=>{ue(n,n.coordsAtPos(a.end)),de.cancel(),de=H.a.CancelToken.source();try{ce=await async function(e,t){if(e&&1!==e.length){return(await H.a.get("/tools/naamsuggesties?vorm=user&zoekin=voorkeur&q="+encodeURI(e),{cancelToken:t})).data}return[]}(t.full,de.token),se=0,((e,t,a)=>{Array.from(document.querySelectorAll(".lid-hints")).forEach(e=>e.remove());const n=document.createElement("div");n.classList.add("lid-hints","list-group"),n.style.position="absolute";for(const t of ce){const a=n.appendChild(document.createElement("div"));a.classList.add("list-group-item","list-group-item-action"),a.addEventListener("click",()=>{e(t)}),a.textContent=t.value}t.dom.parentElement.appendChild(n),ue(t,a),be()})(e,n,n.coordsAtPos(a.end))}catch(e){}},onExit:()=>{de.cancel(),pe(),ce=[],se=0},createCommand:({match:e,view:t})=>a=>{if(!a)return;const n=t.state.tr,{from:r,to:i}=e.range;n.replaceWith(r,i,t.state.schema.nodes.lid.createAndFill({uid:a.uid,naam:a.value})),t.dispatch(n)}},fe=Object(le.a)(me);ie.a.addHandler(".pm-editor",e=>{const t=e.dataset.extern,a=(o=j,l=window.loggedIn&&!t,[Object(E.c)([X(o.marks.strong,{title:"Schakel dikgedrukt",icon:re.strong}),X(o.marks.em,{title:"Schakel schuingedrukt",icon:re.em}),X(o.marks.underline,{title:"Schakel onderlijn",icon:re.underline}),(c=o.marks.link,new y.c({title:"Maak of verwijder link",icon:{dom:E.j`<i class="fa fa-link"></i>`},active:e=>Q(e,c),enable:()=>!0,run(e,t,a){if(Q(e,c))return Object(F.i)(c)(e,t),!0;e.selection.empty?S({title:"Maak een link",fields:{tekst:new x({label:"Link tekst",required:!0}),href:new x({label:"Link doel",required:!0})},callback(t){a.dispatch(a.state.tr.replaceSelectionWith(e.schema.text(t.tekst).mark([c.create({href:t.href})]),!1)),a.focus()}}):S({title:"Maak een link",fields:{href:new x({label:"Link doel",required:!0})},callback(e){Object(F.i)(c,e)(a.state,a.dispatch),a.focus()}})}})),!l&&X(o.marks.prive,{title:"Maak prive",icon:re.prive}),new y.a(Object(E.c)([X(o.marks.code,{title:"Schakel code",label:"Code"}),X(o.marks.superscript,{title:"Schakel superscript",label:"Superscript"}),X(o.marks.subscript,{title:"Schakel subscript",label:"Subscript"}),X(o.marks.strikethrough,{title:"Schakel doorstreep",label:"Doorstreep"}),X(o.marks.offtopic,{title:"Schakel offtopic",label:"Offtopic"}),l&&ee(o.marks.prive)]),{label:"Meer"})]),Object(E.c)([l&&(s=o.nodes.lid,new y.c({title:"Lid invoegen",label:"Lid",enable:e=>G(e,s),run:(e,t,a)=>{let r=null,i=null;e.selection instanceof n.c&&e.selection.node.type==s&&(r=e.selection.node.attrs,i=e.selection.node.content),S({title:r?"Update: "+s.name:"Invoegen: "+s.name,description:"Tip: Type '@' met een zoekterm in je bericht om snel een lid te noemen.",fields:{lid:new q({label:"Lid",required:!0,value:r?{uid:r.uid,naam:r.naam}:{uid:"",naam:""}})},callback(e){a.dispatch(a.state.tr.replaceSelectionWith(s.createAndFill(Object.assign({type:s.name},e.lid),i))),a.focus()}})}}))]),Object(E.c)([new y.a(Object(E.c)([l&&ne(o.nodes.plaatje,o.nodes.image),!l&&Y(o.nodes.image),l&&V(o.nodes.citaat),Object(y.l)(o.nodes.blockquote,{title:"Maak een quote",label:"Quote"}),l&&new y.b([te(o.nodes.twitter,"Twitter","Twitter invoegen"),te(o.nodes.youtube,"YouTube","YouTube invoegen"),te(o.nodes.spotify,"Spotify","Spotify invoegen"),te(o.nodes.video,"Video","Video invoegen"),te(o.nodes.audio,"Geluid","Geluid invoegen")],{label:"Embed"}),l&&new y.b([te(o.nodes.activiteit,"Activiteit","Activiteit invoegen"),te(o.nodes.bestuur,"Bestuur","Bestuur invoegen"),te(o.nodes.commissie,"Commissie","Commissie invoegen"),te(o.nodes.groep,"Groep","Groep invoegen"),te(o.nodes.ketzer,"Ketzer","Ketzer invoegen"),te(o.nodes.ondervereniging,"Ondervereniging","Ondervereniging invoegen"),te(o.nodes.verticale,"Verticale","Verticale invoegen"),te(o.nodes.werkgroep,"Werkgroep","Werkgroep invoegen"),te(o.nodes.woonoord,"Woonoord","Woonoord invoegen")],{label:"Groep"}),l&&te(o.nodes.boek,"Boek","Boek invoegen"),l&&te(o.nodes.document,"Document","Document invoegen"),l&&te(o.nodes.maaltijd,"Maaltijd","Maaltijd invoegen"),new y.c({title:"Horizontale lijn invoegen",label:"Lijn",enable:e=>G(e,o.nodes.horizontal_rule),run(e,t){t(e.tr.replaceSelectionWith(o.nodes.horizontal_rule.create()))}}),Object(y.l)(o.nodes.verklapper,{title:"Stop selectie in verklapper",label:"Verklapper"}),ae(o.nodes.bb)]),{label:"Invoegen"}),new y.a([Object(y.d)(o.nodes.paragraph,{title:"Verander naar een paragraaf",label:"Tekst"}),Object(y.d)(o.nodes.code_block,{title:"Verander naar een code blok",label:"Code"}),Object(y.d)(o.nodes.heading,{title:"Verander naar kop 1",label:"Titel",attrs:{level:1}}),Object(y.d)(o.nodes.heading,{title:"Verander naar kop 2",label:"Kop",attrs:{level:2}}),Object(y.d)(o.nodes.heading,{title:"Verander naar kop 3",label:"Subkop",attrs:{level:3}})],{label:"Stijl"})]),[new y.c({title:"Laatste wijziging ongedaan maken",run:M.c,enable:e=>Object(M.c)(e),icon:re.undo}),new y.c({title:"Herhaal de laatste ongedaan gemaakte wijziging",run:M.b,enable:e=>Object(M.b)(e),icon:re.redo})],[Z(o.nodes.bullet_list,{title:"Maak een puntenlijst",icon:re.ul}),Z(o.nodes.ordered_list,{title:"Maak een geordende lijst",icon:re.ol}),new y.c({title:"Voeg samen met blok hier boven",run:F.e,select:e=>Object(F.e)(e),icon:re.join}),new y.c({title:"Til uit omvattende blok",run:F.f,select:e=>Object(F.f)(e),icon:re.lift}),new y.c({title:"Selecteer dit blok",run:F.g,select:e=>Object(F.g)(e),icon:re.selectParentNode})]]);var o,l,s,c;const d=document.querySelector("#"+e.dataset.prosemirrorDoc),u=Object(E.k)(d.value.replace(/&quot;/g,'\\"'));window.currentEditor=new r.c(e,{state:n.b.create({doc:i.f.fromJSON(j,JSON.parse(u)),plugins:[fe,...Object(D.a)({schema:j,menuContent:a}).concat(B,oe(d))]}),handleDoubleClickOn:(e,t,a)=>(a.type==j.nodes.bb&&R(a.type,a.attrs,e),!0)})})},21:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return domUpdate}));var jquery__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),jquery__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__),_ctx__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(17),_modal__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(29),_util__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(4),_dom__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(16);function domUpdate(htmlString){if("string"!=typeof htmlString)return;if(htmlString=htmlString.trim(),"<!DOCTYPE"===htmlString.substring(0,9))throw alert("response error"),new Error(htmlString);const elements=Object(_util__WEBPACK_IMPORTED_MODULE_3__.m)(htmlString);for(const element of elements){if(!(element instanceof HTMLElement))continue;const id=element.id,parentId=element.getAttribute("parentid");if(!id&&element instanceof HTMLScriptElement)return eval(element.innerText),void Object(_modal__WEBPACK_IMPORTED_MODULE_2__.a)();const target=id?document.querySelector("#"+id):null,targetParent=parentId?document.querySelector("#"+parentId):null;target?element.classList.contains("remove")?Object(_util__WEBPACK_IMPORTED_MODULE_3__.g)(target,400):jquery__WEBPACK_IMPORTED_MODULE_0___default()(target).replaceWith(jquery__WEBPACK_IMPORTED_MODULE_0___default()(element)):targetParent?targetParent.append(element):element instanceof HTMLScriptElement?document.head.append(element):Object(_dom__WEBPACK_IMPORTED_MODULE_4__.b)("#maalcie-tabel tbody:visible:first").append(element),Object(_ctx__WEBPACK_IMPORTED_MODULE_1__.b)(element),"modal"===id?Object(_modal__WEBPACK_IMPORTED_MODULE_2__.b)():Object(_modal__WEBPACK_IMPORTED_MODULE_2__.a)()}}},29:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return o}));var n=a(0),r=a.n(n);function i(e=""){const t=r()("#modal"),a=r()(".modal-backdrop");return(""!==t.html()||""!==e)&&(a.length&&a.remove(),""!==e&&(t.replaceWith(e),t.find("input:visible:first").trigger("focus")),t.modal("show"),r()(document.body).trigger("modalOpen"),!0)}function o(){r()("#modal").modal("hide"),r()(document.body).trigger("modalClose")}},34:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return d}));var n=a(0),r=a.n(n),i=a(29),o=a(12),l=a.n(o),s=a(16);function c(e,t,a,n,o,c,d){if(n)if(n.classList.contains("noanim"))if(n.classList.contains("InlineForm"))try{Object.assign(Object(s.b)(".FormElement:first",n).style,{backgroundImage:'url("/images/loading-fb.gif")',backgroundPosition:"center right",backgroundRepeat:"no-repeat"})}catch(e){}else n.classList.add("loading");else{const e=r()(`<img alt="Laden" id="${n.id}" title="${t}" src="/images/loading-arrows.gif" />`);r()(n).replaceWith(e),n=e.get(0)}l()(t,{method:e,data:a}).then(e=>{n&&(r()(n).hasClass("noanim")?r()(n).hasClass("InlineForm")&&r()(n).find(".FormElement:first").css({"background-image":"","background-position":"","background-repeat":""}):r()(n).hide(),n.classList.remove("loading")),o(e.data)}).catch(e=>{n?r()(n).replaceWith('<img alt="Mislukt" title="'+e.message+'" src="/plaetjes/famfamfam/cancel.png" />'):Object(i.a)(),c&&(e.message.startsWith("<!DOC")&&c("Er ging iets fout, code is: "+e.code),c(e.message))}).then(()=>{d&&d()})}function d(e,t){return r()(t+" .aanmeldbtn").addClass("loading"),r.a.ajax({cache:!1,data:"",type:"GET",url:e}).done(e=>{r()(t).replaceWith(e)}).fail((e,a,n)=>{throw r()(t+" .aanmeldbtn").replaceWith(r()(`<div class="alert alert-danger"><strong>Actie mislukt!</strong> ${n}</div>`)),new Error(e.responseText)}),!0}},36:function(e,t,a){"use strict";a.r(t),a.d(t,"isDataTableResponse",(function(){return s})),a.d(t,"initDataTable",(function(){return c})),a.d(t,"initOfflineDataTable",(function(){return d})),a.d(t,"fnUpdateDataTable",(function(){return u})),a.d(t,"fnGetSelection",(function(){return p})),a.d(t,"getApiFromSettings",(function(){return b})),a.d(t,"fnGetLastUpdate",(function(){return m})),a.d(t,"fnSetLastUpdate",(function(){return f})),a.d(t,"fnAjaxUpdateCallback",(function(){return g})),a.d(t,"replacePlaceholders",(function(){return v}));var n=a(0),r=a.n(n),i=a(17),o=a(4),l=a(98);function s(e){return"object"==typeof e&&"lastUpdate"in e&&"autoUpdate"in e&&"data"in e}async function c(e){await Promise.all([a.e(4),a.e(10)]).then(a.bind(null,132));const t=r()(e),n=t.data("settings"),o=t.data("search");n.ajax&&(n.ajax.data.lastUpdate=m(t),n.ajax.dataSrc=g(t)),n.columns.forEach(e=>e.render=l.a[e.render]);const s=t.DataTable(n);t.dataTable().api().search(o),s.on("page",()=>s.rows({selected:!0}).deselect()),s.on("childRow.dt",(e,t)=>Object(i.b)(t.container.get(0)))}async function d(e){await Promise.all([a.e(4),a.e(10)]).then(a.bind(null,132)),r()(e).DataTable(Object(o.r)(e))}function u(e,t){const a=r()(e).DataTable();t.data.forEach(e=>{const t=r()('tr[data-uuid="'+e.UUID+'"]');1===t.length?"remove"in e?a.row(t).remove():(a.row(t).data(e),Object(i.b)(t.get(0))):0===t.length?a.row.add(e):alert(t.length)}),a.draw(!1)}function p(e){const t=[];return r()(e+" tbody tr.selected").each((function(){const e=r()(this).attr("data-uuid");if(!e)throw new Error("Tablerow heeft geen uuid");t.push(e)})),t}function b(e){return new r.a.fn.dataTable.Api(e)}const m=e=>()=>Number(e.data("lastupdate")),f=e=>t=>e.data("lastupdate",t),g=e=>t=>{f(e)(t.lastUpdate);const a=e.DataTable();if(t.autoUpdate){const n=parseInt(t.autoUpdate,10);!isNaN(n)&&n<6e5&&setTimeout(()=>{r.a.post(a.ajax.url(),{lastUpdate:m(e)},t=>{const a=e.attr("id");if(!a)throw new Error("Table heeft geen id");u(a,t),g(e)(t)})},n)}return function(e){const t=e.parent();if(t.hasClass("dataTables_scrollBody")){const e=t.scrollTop(),a=t.innerHeight();if(!e||!a)throw new Error("$scroll heeft geen top of height");e+a>=t[0].scrollHeight-20&&window.setTimeout(()=>{t.animate({scrollTop:t[0].scrollHeight},800)},200)}}(e),t.data};function v(e,t){const a=/:(\w+)/g.exec(e);if(!a)return e;for(let n=1;n<a.length;n++)e=e.replace(":"+a[n],t[a[n]]);return e}},45:function(e,t,a){"use strict";a.r(t),a.d(t,"formIsChanged",(function(){return m})),a.d(t,"formInlineToggle",(function(){return f})),a.d(t,"formToggle",(function(){return g})),a.d(t,"formReset",(function(){return v})),a.d(t,"formSubmit",(function(){return h})),a.d(t,"formCancel",(function(){return _})),a.d(t,"insertPlaatje",(function(){return O})),a.d(t,"initSterrenField",(function(){return k}));var n=a(12),r=a.n(n),i=a(0),o=a.n(i),l=a(36),s=a(34),c=a(21),d=a(29),u=a(73),p=a(16),b=a(4);function m(e){let t=!1;return o()(e).find(".FormElement").not(".tt-hint").each((function(){const e=o()(this);if(e.is("input:radio")){if(e.is(":checked")&&e.attr("origvalue")!==e.val())return t=!0,!1}else if(e.is("input:checkbox")){if(e.is(":checked")!==("1"===e.attr("origvalue")))return t=!0,!1}else if(e.val()!==e.attr("origvalue"))return t=!0,!1})),t}function f(e){const t=o()(e);t.prev(".InlineFormToggle").toggle(),t.toggle(),t.children(":first").trigger("focus")}function g(e,t){return t.preventDefault(),f(Object(p.b)("form",Object(p.a)(e))),!1}function v(e,t){const a=e.target;if(!(a&&a instanceof HTMLElement))throw new Error("formReset: geen EventTarget");if(t||(t=a.closest("form"),e.preventDefault()),!t)throw new Error("Geen form gevonden in formReset");return a.classList.contains("confirm")&&!confirm(a.title+".\n\nWeet u het zeker?")||Object(p.c)(".FormElement",t).forEach((function(e){const t=e.getAttribute("origvalue");t&&(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)&&(e.value=t)})),!1}function h(e){const t=e.target;if(t.classList.contains("confirm")){let a=t.title;if(a?a+=".\n\n":a="Weet u het zeker?",!confirm(a))return e.preventDefault(),!1}const a=t.closest("form");if(!a||!a.classList.contains("Formulier"))return!1;if(a.classList.contains("PreventUnchanged")&&!m(a))return e.preventDefault(),alert("Geen wijzigingen"),!1;const n=t.getAttribute("href");if(n&&"#"!=n&&a.setAttribute("action",n),a.classList.contains("ModalForm")||a.classList.contains("InlineForm")){e.preventDefault();const t=new FormData(a);let n=c.a,r=null;if(a.classList.contains("InlineForm")){r=a;const e=a.id;e&&t.append("InlineFormId",e),o()(a).data("submitCallback")&&(n=o()(a).data("submitCallback"))}if(a.classList.contains("ModalForm")&&(n=e=>{"string"==typeof e?Object(c.a)(e):Object(d.a)()}),a.classList.contains("DataTableResponse")){const e=a.dataset.tableid;if(!e||!document.getElementById(e))throw new Error("DataTable not found");t.append("DataTableId",e);const i=Object(l.fnGetSelection)("#"+e);o.a.each(i,(e,a)=>{t.append("DataTableSelection[]",a)}),n=t=>{if(Object(l.isDataTableResponse)(t))Object(l.fnUpdateDataTable)("#"+e,t),t.modal?Object(c.a)(t.modal):Object(d.a)();else{if("string"!=typeof t)throw new Error("onbekende response"+t);Object(c.a)(t)}},a.classList.contains("noanim")||(r=null)}a.classList.contains("ReloadPage")?n=u.b:a.classList.contains("redirect")&&(n=u.a);const i=a.getAttribute("action");if(!i)throw new Error("Form heeft geen action");return Object(s.a)("POST",i,t,r,n,b.u,()=>{a.classList.contains("SubmitReset")&&v(e,a)}),!1}return o()(a).off("submit"),o()(a).trigger("submit"),!0}function _(e){const t=e.target;if(!(t&&t instanceof HTMLElement))throw new Error("formCancel: Geen EventTarget");if(t.classList.contains("confirm")&&!confirm(t.title+".\n\nWeet u het zeker?"))return e.preventDefault(),!1;const a=t.closest("form");if(!a)throw new Error("Geen form in formCancel");if(a.classList.contains("InlineForm"))return e.preventDefault(),f(a),!1;if(a.classList.contains("ModalForm")){e.preventDefault();const n=t.getAttribute("href");return n&&r.a.get(n),m(a)&&!confirm("Sluiten zonder wijzigingen op te slaan?")||Object(d.a)(),!1}return!0}function O(e){o.a.markItUp({replaceWith:"[plaatje]"+e+"[/plaatje]"})}function k(e){o()(e).raty(Object.assign(Object.assign({},JSON.parse(e.dataset.config)),{path:"/images/raty/",cancelHint:"Wis beoordeling",cancelPlace:"right",noRatedMsg:"",click:function(e){console.log(e),o()(this).raty("score",e),o()(this).closest("form").submit()}}))}a(158)},73:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return i}));var n=a(21);function r(e){"string"!=typeof e||'<div id="modal" '!==e.substring(0,16)?location.reload():Object(n.a)(e)}function i(e){'<div id="modal" '!==e.substring(0,16)?window.location.href=e:Object(n.a)(e)}},98:function(e,t,a){"use strict";var n=a(40),r=a.n(n),i=a(4),o=a(36);t.a={default(e,t){if(null===e||"object"!=typeof e)return e;switch(t){case"sort":return e.sort;case"export":return e.export;default:return e.display}},bedrag:e=>Object(i.h)(e),check:e=>'<span class="ico '+(e?"tick":"cross")+'"></span>',aanmeldFilter:e=>e?`<span class="ico group_key" title="Aanmeld filter actief: '${e}'"></span>`:"",aanmeldingen:(e,t,a)=>a.aantal_aanmeldingen+" ("+a.aanmeld_limiet+")",totaalPrijs:(e,t,a)=>Object(i.h)(a.aantal_aanmeldingen*parseInt(a.prijs,10)),datetime:e=>Number(e)==e?r.a.unix(e).format("YYYY-MM-DD HH:mm"):e?"<time"===e.substr(0,5)?e:"-"===e.substr(0,1)?"Nooit":r()(e).format("YYYY-MM-DD HH:mm"):"",timeago(e,t,a,n){const r=Object(o.getApiFromSettings)(n.settings).cell(n.row,n.col).node().firstChild;switch(t){case"sort":case"export":return r.dateTime;default:return e}},filesize(e,t){switch(t){case"sort":return Number(e);default:return Object(i.i)(e)}}}}}]);
//# sourceMappingURL=formulier.025df9a51ff0ab971aac.chunk.js.map