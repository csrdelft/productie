{"version":3,"sources":["webpack:///./js/lib/domUpdate.ts","webpack:///./js/lib/knop.ts","webpack:///(webpack)/buildin/global.js","webpack:///./js/lib/modal.ts","webpack:///./js/lib/ajax.ts","webpack:///./js/lib/maalcie.ts","webpack:///./js/dragobject.ts","webpack:///./js/lib/reload.ts","webpack:////home/travis/build/csrdelft/csrdelft.nl/.yarn/cache/timers-browserify-npm-2.0.11-f20435228f-73faad065e.zip/node_modules/timers-browserify/main.js","webpack:///./js/datatable/dataTables.childRow.ts","webpack:///./js/datatable/dataTables.columnGroup.ts","webpack:///./js/datatable/dataTables.rowButtons.ts","webpack:///./js/datatable/buttons.ts","webpack:///./js/datatable/defaults.ts","webpack:///./js/datatable/bootstrap.ts","webpack:////home/travis/build/csrdelft/csrdelft.nl/.yarn/cache/setimmediate-npm-1.0.5-54587459b6-87884d8add.zip/node_modules/setimmediate/setImmediate.js"],"names":["domUpdate","htmlString","trim","substring","alert","document","write","elements","each","index","element","Element","$element","id","attr","parentId","target","targetParent","length","hasClass","effect","remove","replaceWith","show","get","append","HTMLScriptElement","parentid","this","prependTo","knopAjax","knop","type","confirm","source","done","data","Error","key","value","split","userVal","prompt","encodeURIComponent","tekst","title","replace","link","window","location","href","dataTableId","parents","DataTableId","DataTableSelection","response","modal","tableId","getElementById","closest","url","knopPost","event","preventDefault","tagName","toUpperCase","knopGet","knopVergroot","el","HTMLElement","vergroot","vergrootOud","dataset","icon","querySelector","animate","height","classList","String","prop","g","Function","e","module","exports","modalOpen","modalBackdrop","html","find","trigger","body","modalClose","ajaxRequest","onsuccess","onerror","onfinish","css","addClass","contentType","processData","FormData","ajax","cache","hide","removeClass","fail","textStatus","errorThrown","responseText","startsWith","status","always","ketzerAjax","ketzer","jqXHR","takenSubmitRange","parentElement","parent","post","takenColorSuggesties","$suggestiesTabel","takenToggleSuggestie","soort","verborgen","toggleClass","takenToggleDatumFirst","datum","eq","takenColorDatum","takenToggleDatum","takenShowOld","takenMagRuilen","takenRuilen","elmnt","getAttribute","lastSelectedId","takenSelectRange","withinRange","thisId","check","setTimeout","shiftKey","dragObject","undefined","dragged","oldX","oldY","docScrollLeft","documentElement","scrollLeft","docScrollTop","scrollTop","mouseX","pageX","clientX","mouseY","pageY","clientY","mouseMoveHandler","instance","newX","newY","offset","left","top","addEventListener","tag","overflow","removeEventListener","coords","reload","redirect","self","apply","prototype","Timeout","clearFn","_id","_clearFn","call","scope","arguments","clearTimeout","setInterval","clearInterval","timeout","close","unref","ref","enroll","item","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","_onTimeout","setImmediate","global","clearImmediate","dt","api","fn","dataTable","Api","dtSettings","settings","_childRow","nTable","tableNode","table","node","ext","internal","_fnCallbackReg","_fnCreatedRowCallback","on","fnToggleChildRow","tr","children","detailSource","td","row","innerDiv","child","isShown","next","slideUp","slideDown","container","_","version","ChildRow","DataTable","namespace","init","oInit","childRow","register","iterator","ctx","fh","config","c","extend","defaults","s","collapsedGroups","regrouping","lastDraw","_columnGroup","_fnConstruct","search","push","_fnGroupExpandCollapseDraw","ctrlKey","_fnGroupExpandCollapse","_fnGroupExpandCollapseAll","_fnGroupByColumnDraw","first","column","Date","now","collapse","slice","colspan","j","i","groupRow","rows","page","nodes","last","group","localeCompare","before","shift","tbody","forEach","$tr","grep","sort","draw","_fnHideEmptyCollapsedAll","$th","inArray","ColumnGroup","columnGroup","opts","_rowButtons","cell","innerHTML","createButtonGroup","_a","btnGroup","btn","Object","values","action","newButton","method","style","marginTop","marginBottom","wrapper","RowButtons","buttonInit","rowButtons","buttons","copyHtml5","className","copyFlash","csvHtml5","csvFlash","pdfHtml5","pdfFlash","excelHtml5","excelFlash","print","default","toggle","enable","multiplicity","selected","count","indexOf","dt2","indexes","tables","to$","button","popup","open","sourceChange","load","Buttons","name","text","i18n","appendTo","_collection","collection","defaultCollection","deferRender","UUID","columnIndex","a","language","colvis","copy","csr","zeker","oPaginate","sFirst","sLast","sNext","sPrevious","sEmptyTable","sInfo","sInfoEmpty","sInfoFiltered","sInfoPostFix","sInfoThousands","sLengthMenu","sLoadingRecords","sProcessing","sSearch","sZeroRecords","select","0","1","lengthMenu","JSZip","registerImmediate","channel","messagePrefix","onGlobalMessage","nextHandle","tasksByHandle","currentlyRunningATask","doc","attachTo","getPrototypeOf","toString","process","handle","nextTick","runIfPresent","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","canUsePostMessage","MessageChannel","port1","port2","createElement","script","onreadystatechange","removeChild","appendChild","Math","random","attachEvent","callback","args","Array","task","run"],"mappings":"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","file":"js/bootstrap.cd7e4676ef487fdd5d95.chunk.js","sourcesContent":["import $ from 'jquery';\nimport { init } from '../ctx';\nimport { modalClose, modalOpen } from './modal';\nimport { htmlParse } from './util';\nexport function domUpdate(htmlString) {\n    if (typeof htmlString !== 'string') {\n        return;\n    }\n    htmlString = $.trim(htmlString);\n    if (htmlString.substring(0, 9) === '<!DOCTYPE') {\n        alert('response error');\n        document.write(htmlString);\n    }\n    const elements = htmlParse(htmlString);\n    $(elements).each(function (index, element) {\n        if (!(element instanceof Element)) {\n            // element kan ook een stuk tekst zijn, hier kunnen we niets mee.\n            return;\n        }\n        const $element = $(element);\n        const id = $(element).attr('id');\n        const parentId = $(element).attr('parentid');\n        const target = $('#' + id);\n        const targetParent = $('#' + parentId);\n        if (target.length === 1) {\n            if ($element.hasClass('remove')) {\n                target.effect('fade', {}, 400, () => {\n                    target.remove();\n                });\n            }\n            else {\n                target.replaceWith($element.show().get()).effect('highlight');\n            }\n        }\n        else if (targetParent.length === 1) {\n            targetParent.append($element.show());\n        }\n        else if (element instanceof HTMLScriptElement) {\n            $('head').append($element);\n        }\n        else {\n            const parentid = $(this).attr('parentid');\n            if (parentid) {\n                $(this).prependTo(`#${parentid}`).show().effect('highlight');\n            }\n            else {\n                $(this).prependTo('#maalcie-tabel tbody:visible:first').show().effect('highlight'); // FIXME: make generic\n            }\n        }\n        init(element);\n        if (id === 'modal') {\n            modalOpen();\n        }\n        else {\n            modalClose();\n        }\n    });\n}\n","import $ from 'jquery';\nimport { fnGetSelection, fnUpdateDataTable, isDataTableResponse } from '../datatable/api';\nimport { ajaxRequest } from './ajax';\nimport { domUpdate } from './domUpdate';\nimport { takenSelectRange, takenSubmitRange } from './maalcie';\nimport { modalClose } from './modal';\nimport { redirect, reload } from './reload';\nfunction knopAjax(knop, type) {\n    if (knop.hasClass('confirm') && !confirm(knop.attr('title') + '.\\n\\nWeet u het zeker?')) {\n        modalClose();\n        return false;\n    }\n    let source = knop;\n    let done = domUpdate;\n    let data = knop.attr('data');\n    if (knop.hasClass('popup')) {\n        source = false;\n    }\n    if (knop.hasClass('prompt')) {\n        if (!data) {\n            throw new Error(\"Prompt knop heeft geen data\");\n        }\n        const [key, value] = data.split('=');\n        const userVal = prompt(key, value);\n        if (!userVal) {\n            return false;\n        }\n        data = encodeURIComponent(data[0]) + '=' + encodeURIComponent(userVal);\n    }\n    if (knop.hasClass('addfav')) {\n        data = {\n            tekst: document.title.replace('C.S.R. Delft - ', ''),\n            link: window.location.href,\n        };\n    }\n    if (knop.hasClass('DataTableRowKnop')) {\n        const dataTableId = knop.parents('table').attr('id');\n        data = {\n            DataTableId: dataTableId,\n            DataTableSelection: knop.parents('tr').attr('data-uuid'),\n        };\n        done = (response) => {\n            if (isDataTableResponse(response)) { // JSON\n                fnUpdateDataTable('#' + dataTableId, response);\n                if (response && response.modal) {\n                    domUpdate(response.modal);\n                }\n                else {\n                    modalClose();\n                }\n            }\n            else if (typeof response == \"string\") { // HTML\n                domUpdate(response);\n            }\n        };\n    }\n    if (knop.hasClass('DataTableResponse')) {\n        let tableId = knop.attr('data-tableid');\n        if (!tableId || !document.getElementById(tableId)) {\n            tableId = knop.closest('form').attr('data-tableid');\n            if (!tableId || !document.getElementById(tableId)) {\n                alert('DataTable not found');\n                throw new Error(\"DataTable not found\");\n            }\n        }\n        data = {\n            'DataTableId': tableId,\n            'DataTableSelection[]': fnGetSelection('#' + tableId),\n        };\n        done = (response) => {\n            if (isDataTableResponse(response)) { // JSON\n                fnUpdateDataTable('#' + tableId, response);\n                if (response.modal) {\n                    domUpdate(response.modal);\n                }\n                else {\n                    modalClose();\n                }\n            }\n            else if (typeof response == 'string') { // HTML\n                domUpdate(response);\n            }\n            else {\n                throw new Error(\"Niets met deze response: \" + response);\n            }\n        };\n        if (!knop.hasClass('SingleRow')) {\n            source = false;\n        }\n    }\n    if (knop.hasClass('ReloadPage')) {\n        done = reload;\n    }\n    else if (knop.hasClass('redirect')) {\n        done = redirect;\n    }\n    const url = knop.attr('href');\n    if (!url) {\n        throw new Error(\"Knop heeft geen href\");\n    }\n    ajaxRequest(type, url, data, source, done, alert);\n}\nexport function knopPost(event) {\n    event.preventDefault();\n    const target = event.target;\n    if ($(target).hasClass('range')) {\n        if ((target).tagName.toUpperCase() === 'INPUT') {\n            takenSelectRange(event);\n        }\n        else {\n            takenSubmitRange(event);\n        }\n        return false;\n    }\n    knopAjax($(this), 'POST');\n    return false;\n}\nexport function knopGet(event) {\n    event.preventDefault();\n    knopAjax($(this), 'GET');\n    return false;\n}\nexport function knopVergroot(event, el) {\n    const target = el;\n    if (!(target instanceof HTMLElement)) {\n        throw new Error(\"Knop vergroot klik heeft geen target\");\n    }\n    const { vergroot, vergrootOud } = target.dataset;\n    if (!vergroot) {\n        throw new Error(\"Knop vergroot heeft geen data-vergroot\");\n    }\n    const icon = target.querySelector('span.fa');\n    if (!icon) {\n        throw new Error(\"knopVergroot heeft geen icon\");\n    }\n    if (vergrootOud) {\n        $(vergroot).animate({ height: vergrootOud }, 600);\n        delete target.dataset.vergrootOud;\n        icon.classList.replace('fa-compress', 'fa-expand');\n        target.title = 'Uitklappen';\n    }\n    else {\n        target.title = 'Inklappen';\n        icon.classList.replace('fa-expand', 'fa-compress');\n        target.dataset.vergrootOud = String($(vergroot).height());\n        $(vergroot).animate({\n            height: $(vergroot).prop('scrollHeight') + 1,\n        }, 600);\n    }\n}\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","import $ from 'jquery';\nexport function modalOpen(htmlString = '') {\n    const modal = $('#modal');\n    const modalBackdrop = $('.modal-backdrop');\n    if (modal.html() === '' && htmlString === '') {\n        return false;\n    }\n    if (modalBackdrop.length) {\n        modalBackdrop.remove();\n    }\n    if (htmlString !== '') {\n        modal.replaceWith(htmlString);\n        modal.find('input:visible:first').trigger('focus');\n    }\n    modal.modal('show');\n    $(document.body).trigger('modalOpen');\n    return true;\n}\nexport function modalClose() {\n    $('#modal').modal('hide');\n    $(document.body).trigger('modalClose');\n}\n","import $ from 'jquery';\nimport { modalClose } from './modal';\nexport function ajaxRequest(type, url, data, source, onsuccess, onerror, onfinish) {\n    if (source) {\n        if (!source.hasClass('noanim')) {\n            $(source).replaceWith(`<img alt=\"Laden\" id=\"${source.attr('id')}\" title=\"${url}\" src=\"/images/loading-arrows.gif\" />`);\n            source = $(`img[title=\"${url}\"]`);\n        }\n        else if (source.hasClass('InlineForm')) {\n            $(source).find('.FormElement:first').css({\n                'background-image': 'url(\"/images/loading-fb.gif\")',\n                'background-position': 'center right',\n                'background-repeat': 'no-repeat',\n            });\n        }\n        else {\n            source.addClass('loading');\n        }\n    }\n    let contentType = 'application/x-www-form-urlencoded; charset=UTF-8';\n    let processData = true;\n    if (data instanceof FormData) {\n        contentType = false;\n        processData = false;\n    }\n    $.ajax({\n        cache: false,\n        contentType,\n        data,\n        processData,\n        type,\n        url,\n    }).done((response) => {\n        if (source) {\n            if (!$(source).hasClass('noanim')) {\n                $(source).hide();\n            }\n            else if ($(source).hasClass('InlineForm')) {\n                $(source).find('.FormElement:first').css({\n                    'background-image': '',\n                    'background-position': '',\n                    'background-repeat': '',\n                });\n            }\n            source.removeClass('loading');\n        }\n        onsuccess(response);\n    }).fail((response, textStatus, errorThrown) => {\n        if (errorThrown === '') {\n            errorThrown = 'Nog bezig met laden!';\n        }\n        if (source) {\n            $(source).replaceWith('<img alt=\"Mislukt\" title=\"' + errorThrown + '\" src=\"/plaetjes/famfamfam/cancel.png\" />');\n        }\n        else {\n            modalClose();\n        }\n        if (onerror) {\n            if (response.responseText.startsWith('<!DOC')) {\n                onerror('Er ging iets fout, code is: ' + response.status);\n            }\n            onerror(response.responseText);\n        }\n    }).always(() => {\n        if (onfinish) {\n            onfinish();\n        }\n    });\n}\n/**\n * @param url\n * @param ketzer\n * @returns {boolean}\n */\nexport function ketzerAjax(url, ketzer) {\n    $(ketzer + ' .aanmeldbtn').addClass('loading');\n    $.ajax({\n        cache: false,\n        data: '',\n        type: 'GET',\n        url,\n    }).done((data) => {\n        $(ketzer).replaceWith(data);\n    }).fail((jqXHR, textStatus, errorThrown) => {\n        $(ketzer + ' .aanmeldbtn')\n            .replaceWith($(`<div class=\"alert alert-danger\"><strong>Actie mislukt!</strong> ${errorThrown}</div>`));\n        alert(jqXHR.responseText);\n    });\n    return true;\n}\n","import $ from 'jquery';\nimport { dragObject } from '../dragobject';\nimport { ajaxRequest } from './ajax';\nimport { domUpdate } from './domUpdate';\nexport function takenSubmitRange(e) {\n    let target = e.target;\n    if (target.tagName.toUpperCase() === 'IMG') { // over an image inside of anchor\n        target = target.parentElement;\n    }\n    $(target).find('input').prop('checked', true);\n    if ($(target).hasClass('confirm') && !confirm($(target).attr('title') + '.\\n\\nWeet u het zeker?')) {\n        return false;\n    }\n    $('input[name=\"' + $(target).find('input:first').attr('name') + '\"]:visible').each(function () {\n        if ($(this).prop('checked')) {\n            const href = $(target).parent().attr('href');\n            const post = $(target).parent().attr('post');\n            if (!href || !post) {\n                throw new Error(\"Element heeft geen href of post\");\n            }\n            ajaxRequest('POST', href, post, $(target).parent(), domUpdate, alert);\n        }\n    });\n}\nexport function takenColorSuggesties() {\n    const $suggestiesTabel = $('#suggesties-tabel');\n    $suggestiesTabel.find('tr:visible:odd').css('background-color', '#FAFAFA');\n    $suggestiesTabel.find('tr:visible:even').css('background-color', '#EBEBEB');\n}\nexport function takenToggleSuggestie(soort, show) {\n    $('#suggesties-tabel .' + soort).each(function () {\n        let verborgen = 0;\n        if (typeof show !== 'undefined') {\n            if (show) {\n                $(this).removeClass(soort + 'verborgen');\n            }\n            else {\n                $(this).addClass(soort + 'verborgen');\n            }\n        }\n        else {\n            $(this).toggleClass(soort + 'verborgen');\n        }\n        if ($(this).hasClass('geenvoorkeurverborgen')) {\n            verborgen++;\n        }\n        if ($(this).hasClass('recentverborgen')) {\n            verborgen++;\n        }\n        if ($(this).hasClass('jongsteverborgen')) {\n            verborgen++;\n        }\n        if ($(this).hasClass('oudereverborgen')) {\n            verborgen++;\n        }\n        if (verborgen > 0) {\n            $(this).hide();\n        }\n        else {\n            $(this).show();\n        }\n    });\n    takenColorSuggesties();\n}\nfunction takenToggleDatumFirst(datum, index) {\n    if ('taak-datum-head-' + datum === $('#maalcie-tabel tr:visible').eq(index).attr('id')) {\n        $('#taak-datum-head-first').toggleClass('verborgen');\n    }\n}\nfunction takenColorDatum() {\n    $('tr.taak-datum-summary:visible:odd th').css('background-color', '#FAFAFA');\n    $('tr.taak-datum-summary:visible:even th').css('background-color', '#f5f5f5');\n}\nexport function takenToggleDatum(datum) {\n    takenToggleDatumFirst(datum, 0);\n    $('.taak-datum-' + datum).toggleClass('verborgen');\n    takenToggleDatumFirst(datum, 1);\n    takenColorDatum();\n}\nexport function takenShowOld() {\n    $('#taak-datum-head-first').removeClass('verborgen');\n    $('tr.taak-datum-oud').removeClass('verborgen');\n    takenColorDatum();\n}\n/* Ruilen van CorveeTaak */\nexport function takenMagRuilen(e) {\n    let target = e.target;\n    if (target.tagName.toUpperCase() === 'IMG') { // over an image inside of anchor\n        target = target.parentElement;\n    }\n    const source = dragObject.el;\n    if (source && source.attr('id') !== target.id) {\n        e.preventDefault();\n    }\n}\nexport function takenRuilen(e) {\n    e.preventDefault();\n    let elmnt = e.target;\n    if (elmnt.tagName.toUpperCase() === 'IMG') { // dropped on image inside of anchor\n        elmnt = elmnt.parentElement;\n    }\n    const source = dragObject.el;\n    if (!source || !confirm('Toegekende corveepunten worden meegeruild!\\n\\nDoorgaan met ruilen?')) {\n        return;\n    }\n    let attr = source.attr('uid');\n    if (!attr) {\n        attr = '';\n    }\n    const href = elmnt.getAttribute('href');\n    if (!href) {\n        throw new Error(\"Element heeft geen href\");\n    }\n    ajaxRequest('POST', href, 'uid=' + attr, $(elmnt), domUpdate, alert);\n    attr = $(elmnt).attr('uid');\n    if (!attr) {\n        attr = '';\n    }\n    ajaxRequest('POST', href, 'uid=' + attr, source, domUpdate, alert);\n}\nlet lastSelectedId;\nexport function takenSelectRange(e) {\n    const target = e.target;\n    if (!target) {\n        throw new Error(\"Er is geen target\");\n    }\n    let withinRange = false;\n    $('#maalcie-tabel').find('tbody tr td a input[name=\"' + $(target).attr('name') + '\"]:visible').each(function () {\n        const thisId = $(this).attr('id');\n        if (thisId === lastSelectedId) {\n            withinRange = !withinRange;\n        }\n        if (thisId === e.target.id) {\n            withinRange = !withinRange;\n            const check = $(this).prop('checked');\n            setTimeout(() => {\n                $('#' + thisId).prop('checked', check);\n            }, 50);\n        }\n        else if (e.shiftKey && withinRange) {\n            $(this).prop('checked', true);\n        }\n    });\n    lastSelectedId = e.target.id;\n}\n","/**\n * dragobject.js  |  P.W.G. Brussee (brussee@live.nl)\n */\nimport $ from 'jquery';\nexport const dragObject = {\n    el: undefined,\n};\n$(() => {\n    let dragged;\n    let oldX;\n    let oldY;\n    function docScrollLeft() {\n        return (document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft);\n    }\n    function docScrollTop() {\n        return (document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop);\n    }\n    function mouseX(e) {\n        if (e.pageX) {\n            return e.pageX;\n        }\n        if (e.clientX) {\n            return e.clientX + docScrollLeft();\n        }\n        return 0;\n    }\n    /**\n     * @param {MouseEvent} e\n     * @returns {number|null}\n     */\n    function mouseY(e) {\n        if (e.pageY) {\n            return e.pageY;\n        }\n        if (e.clientY) {\n            return e.clientY + docScrollTop();\n        }\n        return 0;\n    }\n    /**\n     * @param {MouseEvent} e\n     */\n    function mouseMoveHandler(e) {\n        if (!dragObject.el) {\n            return;\n        }\n        const instance = dragObject.el;\n        e = e || window.event;\n        const newX = mouseX(e);\n        const newY = mouseY(e);\n        dragged = instance.hasClass('savepos');\n        const scrollTop = instance.scrollTop() || 0;\n        const scrollLeft = instance.scrollLeft() || 0;\n        if (instance.hasClass('dragvertical')) {\n            instance.scrollTop(scrollTop + oldY - newY);\n        }\n        else if (instance.hasClass('draghorizontal')) {\n            instance.scrollLeft(scrollLeft + oldX - newX);\n        }\n        else {\n            const offset = instance.offset() || { left: 0, top: 0 };\n            instance.css({\n                left: (offset.left - docScrollLeft() + newX - oldX) + 'px',\n                top: (offset.top - docScrollTop() + newY - oldY) + 'px',\n            });\n        }\n        oldX = newX;\n        oldY = newY;\n    }\n    /**\n     * @param {MouseEvent} e\n     */\n    function startDrag(e) {\n        e = e || window.event;\n        const target = e.target;\n        if (target instanceof Element) {\n            const tag = target.tagName.toUpperCase();\n            const overflow = $(target).css('overflow');\n            // sliding scrollbar of dropdown menu or input field\n            if ((tag !== 'DIV' && tag !== 'H1') || overflow === 'auto' || overflow === 'scroll') {\n                return;\n            }\n            dragObject.el = $(target);\n            if (typeof dragObject.el === 'undefined' || !dragObject.el.hasClass('dragobject')) {\n                dragObject.el = $(target).closest('.dragobject');\n            }\n            if (typeof dragObject.el !== 'undefined') {\n                oldX = mouseX(e);\n                oldY = mouseY(e);\n                window.addEventListener('mousemove', mouseMoveHandler, true);\n            }\n            else {\n                dragObject.el = undefined;\n            }\n        }\n        dragged = false;\n    }\n    function stopDrag() {\n        if (!dragObject.el) {\n            return;\n        }\n        window.removeEventListener('mousemove', mouseMoveHandler, true);\n        if (dragged) {\n            const instance = dragObject.el;\n            let top;\n            let left;\n            if (instance.hasClass('dragvertical') || instance.hasClass('draghorizontal')) {\n                top = instance.scrollTop();\n                left = instance.scrollLeft();\n            }\n            else {\n                const offset = instance.offset() || { top: 0, left: 0 };\n                top = offset.top - docScrollTop();\n                left = offset.left - docScrollLeft();\n            }\n            $.post('/tools/dragobject', {\n                coords: { left, top },\n                id: instance.attr('id'),\n            });\n            dragged = false;\n        }\n        dragObject.el = undefined;\n    }\n    window.addEventListener('mousedown', startDrag, false);\n    window.addEventListener('mouseup', stopDrag, false);\n});\n","import { domUpdate } from './domUpdate';\nexport function reload(htmlString) {\n    if (typeof htmlString === 'string' && htmlString.substring(0, 16) === '<div id=\"modal\" ') {\n        domUpdate(htmlString);\n        return;\n    }\n    location.reload();\n}\nexport function redirect(htmlString) {\n    if (htmlString.substring(0, 16) === '<div id=\"modal\" ') {\n        domUpdate(htmlString);\n        return;\n    }\n    window.location.href = htmlString;\n}\n","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","/*! ChildRow 1.0.0\n */\n/**\n * @summary     ChildRow\n * @description Load an external data source for a child row.\n * @version     1.0.0\n * @file        dataTables.childRow.js\n * @author      G.J.W. Oolbekkink <g.j.w.oolbekkink@gmail.com>\n * @author      P.W.G. Brussee <brussee@live.nl>\n */\nimport $ from 'jquery';\nclass ChildRow {\n    constructor(dt) {\n        // Sanity check - you just know it will happen\n        if (!(this instanceof ChildRow)) {\n            throw new Error('ChildRow must be initialised with the \\'new\\' keyword.');\n        }\n        this.api = new $.fn.dataTable.Api(dt);\n        const dtSettings = this.api.settings()[0];\n        if (dtSettings._childRow) {\n            throw new Error('ChildRow already initialised on table ' + dtSettings.nTable.id);\n        }\n        dtSettings._childRow = this;\n        const tableNode = $(this.api.table(0).node());\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        $.fn.dataTable.ext.internal._fnCallbackReg(this.api.settings()[0], 'aoRowCreatedCallback', ChildRow._fnCreatedRowCallback, 'child-row');\n        tableNode.find('tbody').on('click', 'tr td.toggle-childrow', (event) => {\n            this.fnToggleChildRow($(event.target));\n        });\n    }\n    /**\n     * Add a toggle button if needed.\n     *\n     * @param tr\n     * @param data\n     * @private\n     * @static\n     */\n    static _fnCreatedRowCallback(tr, data) {\n        // Details from external source\n        if ('detailSource' in data) {\n            $(tr).children('td:first').addClass('toggle-childrow').data('detailSource', data.detailSource);\n        }\n    }\n    /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n     * API methods\n     */\n    fnToggleChildRow(td) {\n        const table = this.api.table(0);\n        const tr = td.closest('tr');\n        const row = this.api.row(tr);\n        let innerDiv;\n        if (row.child.isShown()) {\n            if (tr.hasClass('loading')) {\n                // TODO: abort ajax\n            }\n            else {\n                innerDiv = tr.next().children(':first').children(':first');\n                innerDiv.slideUp(400, () => {\n                    row.child.hide();\n                    tr.removeClass('expanded');\n                });\n            }\n        }\n        else {\n            row.child('<div class=\"innerDetails verborgen\"></div>').show();\n            tr.addClass('expanded loading');\n            innerDiv = tr.next().addClass('childrow').children(':first').children(':first');\n            $.ajax({\n                url: td.data('detailSource'),\n            })\n                .done((data) => {\n                if (row.child.isShown()) {\n                    tr.removeClass('loading');\n                    innerDiv.html(data).slideDown();\n                    $(table.node()).trigger('childRow.dt', { container: innerDiv });\n                }\n            })\n                .fail((_, textStatus, errorThrown) => {\n                if (row.child.isShown()) {\n                    tr.removeClass('loading');\n                    tr.find('td.toggle-childrow')\n                        .html(`<img title=\"${errorThrown}\" alt=\"cancel\" src=\"/plaetjes/famfamfam/cancel.png\" />`);\n                }\n            });\n        }\n    }\n}\n/**\n * Version\n * @type {String}\n * @static\n */\nChildRow.version = '1.0.0';\n// Attach for constructor access\n$.fn.dataTable.ChildRow = ChildRow;\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\n$.fn.DataTable.ChildRow = ChildRow;\n// DataTables creation - also create a ChildRow instance.\n$(document).on('preInit.dt.childRow', (e, settings) => {\n    if (e.namespace !== 'dt') {\n        return;\n    }\n    const init = settings.oInit.childRow;\n    if (!settings._childRow) {\n        if (init !== false) {\n            new ChildRow(settings);\n        }\n    }\n});\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\n$.fn.dataTable.Api.register('childRow.toggle()', function (td) {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    return this.iterator('table', (ctx) => {\n        const fh = ctx._childRow;\n        if (fh) {\n            fh.fnToggleChildRow(td);\n        }\n    });\n});\n","/*! ColumnGroup 1.0.0\n */\nimport $ from 'jquery';\n/**\n * ColumnGroup allows grouping by column for DataTables\n * @class ColumnGroup\n * @constructor\n * @param {object} settings DataTables settings object\n * @param {object} config ColumnGroup options\n */\nclass ColumnGroup {\n    constructor(settings, config) {\n        // Sanity check - you just know it will happen\n        if (!(this instanceof ColumnGroup)) {\n            throw new Error('ColumnGroup must be initialised with the \\'new\\' keyword.');\n        }\n        const dt = new $.fn.dataTable.Api(settings);\n        this.c = $.extend(true, {}, ColumnGroup.defaults, config);\n        this.s = {\n            dt,\n            collapsedGroups: [],\n            regrouping: false,\n            lastDraw: null,\n        };\n        const dtSettings = dt.settings()[0];\n        if (dtSettings._columnGroup) {\n            throw new Error('ColumnGroup already initialized on table ' + dtSettings.nTable.id);\n        }\n        dtSettings._columnGroup = this;\n        this._fnConstruct();\n    }\n    _fnConstruct() {\n        const dt = this.s.dt;\n        const table = dt.table(0);\n        const tableNode = $(table.node());\n        $.fn.dataTable.ext.search.push((settings, data) => {\n            return this._fnGroupExpandCollapseDraw(settings, data);\n        });\n        // Group by column\n        tableNode.find('tbody')\n            .on('click', 'tr.group', (event) => {\n            if (!event.shiftKey && !event.ctrlKey) {\n                this._fnGroupExpandCollapse($(event.target));\n            }\n        });\n        tableNode.find('thead')\n            .on('click', 'th.toggle-group:first', (event) => {\n            this._fnGroupExpandCollapseAll($(event.target));\n        });\n        tableNode.on('draw.dt', () => this._fnGroupByColumnDraw());\n        tableNode.find('thead tr th').first().addClass('toggle-group toggle-group-expanded');\n    }\n    _fnGroupByColumnDraw() {\n        const dt = this.s.dt;\n        const table = dt.table(0);\n        const tableNode = $(table.node());\n        const collapsedGroups = this.s.collapsedGroups;\n        const lastDraw = this.s.lastDraw;\n        const column = this.c.column;\n        if (lastDraw === Date.now()) {\n            return; // workaround childrow\n        }\n        const collapse = collapsedGroups.slice(); // copy by value\n        let colspan = '';\n        const j = tableNode.find('thead tr th').length - 2;\n        for (let i = 0; i < j; i++) {\n            colspan += '<td></td>';\n        }\n        let groupRow;\n        // Create group rows for visible rows\n        const rows = $(dt.rows({ page: 'current' }).nodes());\n        tableNode.find('tr.group').remove();\n        let last;\n        // Iterate over data in the group by column\n        dt.column(column, { page: 'current' }).data().each((group, i) => {\n            if (last !== group) {\n                // Create group rows for collapsed groups\n                while (collapse.length > 0 && collapse[0].localeCompare(group) < 0) {\n                    groupRow = $(`<tr class=\"group\">\n<td class=\"toggle-group\"></td>\n<td class=\"group-label\">${collapse[0]}</td>\n${colspan}\n</tr>`)\n                        .data('groupData', collapse[0]);\n                    rows.eq(i).before(groupRow);\n                    collapse.shift();\n                }\n                groupRow = $(`<tr class=\"group\">\n<td class=\"toggle-group toggle-group-expanded\"></td>\n<td class=\"group-label\">${group}</td>\n${colspan}\n</tr>`)\n                    .data('groupData', group);\n                rows.eq(i).before(groupRow);\n                last = group;\n            }\n        });\n        // Create group rows for collapsed groups\n        const tbody = tableNode.children('tbody:first');\n        collapse.forEach((group) => {\n            groupRow = $(`<tr class=\"group\">\n<td class=\"toggle-group\"></td>\n<td class=\"group-label\">${group}</td>\n${colspan}\n</tr>`)\n                .data('groupData', group);\n            tbody.append(groupRow);\n        });\n        this.s.lastDraw = Date.now();\n    }\n    _fnGroupExpandCollapse($tr) {\n        const dt = this.s.dt;\n        const table = dt.table(0);\n        const tableNode = $(table.node());\n        let collapsedGroups = this.s.collapsedGroups;\n        const td = $('td:first', $tr);\n        td.toggleClass('toggle-group-expanded');\n        const group = $tr.data('groupData');\n        if (td.hasClass('toggle-group-expanded')) {\n            collapsedGroups = $.grep(collapsedGroups, (value) => value !== group);\n        }\n        else {\n            collapsedGroups.push(group);\n        }\n        this.s.collapsedGroups = collapsedGroups.sort();\n        dt.draw(false);\n        this._fnHideEmptyCollapsedAll(tableNode.find('thead tr th:first'));\n    }\n    _fnHideEmptyCollapsedAll($th) {\n        const dt = this.s.dt;\n        const table = dt.table(0);\n        const tableNode = $(table.node());\n        const collapsedGroups = this.s.collapsedGroups;\n        if (tableNode.find('tr.group').length === collapsedGroups.length) {\n            tableNode.find('td.dataTables_empty').parent().remove();\n            $th.removeClass('toggle-group-expanded');\n        }\n        else {\n            $th.addClass('toggle-group-expanded');\n        }\n    }\n    _fnGroupExpandCollapseAll($th) {\n        const dt = this.s.dt;\n        const column = this.c.column;\n        const collapsedGroups = [];\n        if ($th.hasClass('toggle-group-expanded')) {\n            let last;\n            dt.column(column).data().each((group) => {\n                if (last !== group) {\n                    collapsedGroups.push(group);\n                    last = group;\n                }\n            });\n        }\n        this.s.collapsedGroups = collapsedGroups;\n        dt.draw(false);\n        this._fnHideEmptyCollapsedAll($th);\n    }\n    _fnGroupExpandCollapseDraw(settings, data) {\n        const column = this.c.column;\n        const collapsedGroups = this.s.collapsedGroups;\n        const group = data[column];\n        return $.inArray(group, collapsedGroups) <= -1;\n    }\n}\nColumnGroup.defaults = {\n    column: null,\n};\nColumnGroup.version = '1.0.0';\n// Expose\n$.fn.dataTable.ColumnGroup = ColumnGroup;\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\n$.fn.DataTable.ColumnGroup = ColumnGroup;\n// Attach a listener to the document which listens for DataTables initialisation\n// events so we can automatically initialise\n$(document).on('preInit.dt.columnGroup', (e, settings) => {\n    if (e.namespace !== 'dt') {\n        return;\n    }\n    const init = settings.oInit.columnGroup;\n    const defaults = $.fn.dataTable.defaults.columnGroup;\n    if (init || defaults) {\n        const opts = $.extend({}, init, defaults);\n        if (init !== false) {\n            new ColumnGroup(settings, opts);\n        }\n    }\n});\n","import $ from 'jquery';\nimport { init } from '../ctx';\nimport { html } from '../lib/util';\nimport { replacePlaceholders } from './api';\nclass RowButtons {\n    constructor(settings, config) {\n        const dt = new $.fn.dataTable.Api(settings);\n        this.c = $.extend(true, {}, RowButtons.defaults, config);\n        this.s = {\n            dt,\n            collapsedGroups: [],\n            regrouping: false,\n            lastDraw: null,\n        };\n        const dtSettings = dt.settings()[0];\n        if (dtSettings._rowButtons) {\n            throw new Error('RowButtons already initialized on table ' + dtSettings.nTable.id);\n        }\n        dtSettings._rowButtons = this;\n        dt.on('draw.dt', () => {\n            dt.column('actionButtons:name').nodes().each((cell, index, api) => {\n                cell.innerHTML = '';\n                cell.append(RowButtons.createButtonGroup(config, api.row(cell).data()));\n            });\n        });\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static createButtonGroup(config, row) {\n        var _a;\n        const btnGroup = html `<div class=\"btn-group\"></div>`;\n        for (const btn of Object.values(config)) {\n            const action = replacePlaceholders((_a = btn.action) !== null && _a !== void 0 ? _a : \"\", row);\n            const newButton = html `\n<a href=\"${action}\"\n\tclass=\"btn btn-light noanim btn-sm DataTableRowKnop ${btn.method} ${btn.css}\"\n\ttitle=\"${btn.title}\">\n\t\t<i class=\"${btn.icon}\"></i>\n</a>`;\n            btnGroup.append(newButton);\n        }\n        btnGroup.style.marginTop = '-10px';\n        btnGroup.style.marginBottom = '-10px';\n        const wrapper = html `<div class=\"d-inline-flex\"></div>`;\n        wrapper.append(btnGroup);\n        init(wrapper);\n        return wrapper;\n    }\n}\nRowButtons.version = '1.0.0';\nRowButtons.defaults = {};\n// Expose\n$.fn.dataTable.RowButtons = RowButtons;\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\n$.fn.DataTable.RowButtons = RowButtons;\n// Attach a listener to the document which listens for DataTables initialisation\n// events so we can automatically initialise\n$(document).on('preInit.dt.rowButtons', (e, settings) => {\n    if (e.namespace !== 'dt') {\n        return;\n    }\n    const buttonInit = settings.oInit.rowButtons;\n    const defaults = $.fn.dataTable.defaults.rowButtons;\n    if (buttonInit || defaults) {\n        const opts = $.extend({}, buttonInit, defaults);\n        if (buttonInit !== false) {\n            new RowButtons(settings, opts);\n        }\n    }\n});\n","import $ from 'jquery';\nimport { knopPost } from '../lib/knop';\nimport { evaluateMultiplicity } from '../lib/util';\nimport { replacePlaceholders } from './api';\n// Zet de icons van de default buttons\n$.fn.dataTable.ext.buttons.copyHtml5.className += ' dt-button-ico dt-ico-page_white_copy';\n$.fn.dataTable.ext.buttons.copyFlash.className += ' dt-button-ico dt-ico-page_white_copy';\n$.fn.dataTable.ext.buttons.csvHtml5.className += ' dt-button-ico dt-ico-page_white_text';\n$.fn.dataTable.ext.buttons.csvFlash.className += ' dt-button-ico dt-ico-page_white_text';\n$.fn.dataTable.ext.buttons.pdfHtml5.className += ' dt-button-ico dt-ico-page_white_acrobat';\n$.fn.dataTable.ext.buttons.pdfFlash.className += ' dt-button-ico dt-ico-page_white_acrobat';\n$.fn.dataTable.ext.buttons.excelHtml5.className += ' dt-button-ico dt-ico-page_white_excel';\n$.fn.dataTable.ext.buttons.excelFlash.className += ' dt-button-ico dt-ico-page_white_excel';\n$.fn.dataTable.ext.buttons.print.className += ' dt-button-ico dt-ico-printer';\n// Laat een modal zien, of doe een ajax call gebasseerd op selectie.\n$.fn.dataTable.ext.buttons.default = {\n    init(dt, node, config) {\n        const toggle = () => {\n            this.enable(evaluateMultiplicity(config.multiplicity, dt.rows({ selected: true }).count()));\n        };\n        dt.on('select.dt.DT deselect.dt.DT', toggle);\n        // Initiele staat\n        toggle();\n        // Vervang :col door de waarde te vinden in de geselecteerde row\n        // Dit wordt alleen geprobeerd als dit voorkomt\n        if (config.href.indexOf(':') !== -1) {\n            dt.on('select.dt.DT', (e, dt2, type, indexes) => {\n                if (indexes.length === 1) {\n                    const row = dt2.row(indexes).data();\n                    node.attr('href', replacePlaceholders(config.href, row));\n                }\n            });\n        }\n        // Settings voor knop_ajax\n        node.attr('href', config.href);\n        node.attr('data-tableid', dt.tables().nodes().to$().attr('id'));\n    },\n    action(e, dt, button) {\n        knopPost.call(button, e);\n    },\n    className: 'post DataTableResponse',\n};\n$.fn.dataTable.ext.buttons.popup = {\n    extend: 'default',\n    action(e, dt, button) {\n        window.open(button.attr('href'));\n    },\n};\n$.fn.dataTable.ext.buttons.url = {\n    extend: 'default',\n    action(e, dt, button) {\n        var _a;\n        window.location.href = (_a = button.attr('href')) !== null && _a !== void 0 ? _a : \"\";\n    },\n};\n// Verander de bron van een datatable\n// De knop is ingedrukt als de bron van de datatable\n// gelijk is aan de bron van de knop.\n$.fn.dataTable.ext.buttons.sourceChange = {\n    init(dt, node, config) {\n        const enable = () => {\n            dt.buttons(node).active(dt.ajax.url() === config.href);\n        };\n        dt.on('xhr.sourceChange', enable);\n        enable();\n    },\n    action(e, dt, button, config) {\n        dt.ajax.url(config.href).load();\n    },\n};\n$.fn.dataTable.ext.buttons.confirm = {\n    extend: 'collection',\n    init(dt, node, config) {\n        const toggle = () => {\n            this.enable(evaluateMultiplicity(config.multiplicity, dt.rows({ selected: true }).count()));\n        };\n        dt.on('select.dt.DT deselect.dt.DT', toggle);\n        // Initiele staat\n        toggle();\n        new $.fn.dataTable.Buttons(dt, {\n            buttons: [\n                {\n                    action: config.action,\n                    name: 'confirm' + config.text,\n                    className: 'dt-button-ico dt-ico-exclamation dt-button-warning',\n                    extend: 'default',\n                    href: config.href,\n                    multiplicity: '',\n                    text: (api) => api.i18n('csr.zeker', 'Are you sure?'),\n                },\n            ],\n        });\n        dt.button('confirm' + config.text + ':name').node().appendTo(config._collection);\n        // Reset action to extend one.\n        config.action = $.fn.dataTable.ext.buttons.collection.action;\n    },\n    action(e, dt, button) {\n        knopPost.call(button, e);\n    },\n};\n$.fn.dataTable.ext.buttons.defaultCollection = {\n    extend: 'collection',\n    init(dt, node, config) {\n        $.fn.dataTable.ext.buttons.default.init.call(this, dt, node, config);\n    },\n};\n","import $ from 'jquery';\nimport { init } from '../ctx';\nexport default {\n    deferRender: true,\n    createdRow(tr, data) {\n        $(tr).attr('data-uuid', data.UUID);\n        init(tr);\n        $(tr).children().each((columnIndex, td) => {\n            // Init custom buttons in rows\n            $(td).children('a.post').each((i, a) => {\n                const id = this.attr('id');\n                if (!id) {\n                    throw new Error(\"Geen datatableid\");\n                }\n                $(a).attr('data-tableid', id);\n            });\n        });\n    },\n    language: {\n        buttons: {\n            colvis: 'Kolom weergave',\n            copy: 'Kopiëren',\n            print: 'Printen',\n        },\n        csr: {\n            zeker: 'Weet u het zeker?',\n        },\n        oPaginate: {\n            sFirst: 'Eerste',\n            sLast: 'Laatste',\n            sNext: 'Volgende',\n            sPrevious: 'Vorige',\n        },\n        sEmptyTable: 'Geen resultaten aanwezig in de tabel',\n        sInfo: '_START_ tot _END_ van _TOTAL_ resultaten',\n        sInfoEmpty: 'Geen resultaten om weer te geven',\n        sInfoFiltered: ' (gefilterd uit _MAX_ resultaten)',\n        sInfoPostFix: '',\n        sInfoThousands: '.',\n        sLengthMenu: '_MENU_ resultaten weergeven',\n        sLoadingRecords: 'Een moment geduld aub - bezig met laden...',\n        sProcessing: 'Bezig...',\n        sSearch: 'Zoeken',\n        sZeroRecords: 'Geen resultaten gevonden',\n        select: {\n            rows: {\n                _: '%d rijen geselecteerd',\n                0: '',\n                1: '1 rij geselecteerd',\n            },\n        },\n    },\n    lengthMenu: [\n        [10, 25, 50, 100, -1],\n        [10, 25, 50, 100, 'Alles'],\n    ],\n};\n","/**\n * Knoop alle datatable plugins aan jquery.\n */\nimport 'datatables.net';\nimport 'datatables.net-autofill';\nimport 'datatables.net-buttons';\nimport 'datatables.net-buttons/js/buttons.colVis';\nimport 'datatables.net-buttons/js/buttons.flash';\nimport 'datatables.net-buttons/js/buttons.html5';\nimport 'datatables.net-buttons/js/buttons.print';\nimport 'datatables.net-colreorder';\nimport 'datatables.net-fixedcolumns';\nimport 'datatables.net-fixedheader';\nimport 'datatables.net-keytable';\nimport 'datatables.net-responsive';\nimport 'datatables.net-scroller';\nimport 'datatables.net-select';\nimport $ from 'jquery';\nimport JSZip from 'jszip';\nimport './dataTables.childRow';\nimport './dataTables.columnGroup';\nimport './dataTables.rowButtons';\nimport './buttons';\nimport defaults from './defaults';\n// Excel button in datatables.net-buttons/js/buttons.html5 checkt voor JSZip in window.\nwindow.JSZip = JSZip;\n$.extend(true, $.fn.dataTable.defaults, defaults);\n$(() => {\n    $('body').on('click', () => {\n        // Verwijder tooltips als de datatable modal wordt gesloten\n        $('.ui-tooltip-content').parents('div').remove();\n    });\n});\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 6–8\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n"],"sourceRoot":""}