{"version":3,"sources":["webpack:///./js/datatable/api.ts","webpack:///./js/datatable/render.ts","webpack:///./js/editor/schema/block-nodes.ts","webpack:///./js/editor/schema/index.ts","webpack:///./js/editor/schema/embed.ts","webpack:///./js/editor/prompt.ts","webpack:///./js/editor/bb-prompt.ts","webpack:///./js/editor/plugin/placeholder.ts","webpack:///./js/editor/forum-plaatje.ts","webpack:///./js/editor/menu-item.ts","webpack:///./js/editor/icon.ts","webpack:///./js/editor/plugin/track-changes.ts","webpack:///./js/editor/plugin/lid-hint.ts","webpack:///./js/editor/plugin/image-upload.ts","webpack:///./js/editor/citeer.ts","webpack:///./js/editor/index.ts","webpack:///./js/editor/menu.ts","webpack:///./js/lib/ajax.ts","webpack:///./js/lib/domUpdate.ts","webpack:///./js/lib/formulier.ts","webpack:///./js/lib/modal.ts","webpack:///./js/lib/reload.ts","webpack:////home/runner/work/csrdelft.nl/csrdelft.nl/.yarn/cache/moment-npm-2.27.0-0e670d438d-2674e94f9a.zip/node_modules/moment/locale|sync|/[/\\\\](nl(\\.js)"],"names":["isDataTableResponse","response","async","initDataTable","el","$el","settingsJson","data","search","ajax","lastUpdate","fnGetLastUpdate","dataSrc","fnAjaxUpdateCallback","columns","forEach","col","render","table","DataTable","dataTable","api","on","rows","selected","deselect","event","container","get","initOfflineDataTable","fnUpdateDataTable","tableId","row","$tr","UUID","length","remove","add","alert","draw","fnGetSelection","selection","each","uuid","this","attr","Error","push","getApiFromSettings","settings","$table","Number","fnSetLastUpdate","json","tableConfig","autoUpdate","timeout","parseInt","isNaN","setTimeout","url","$scroll","parent","hasClass","top","scrollTop","height","innerHeight","scrollHeight","window","animate","fnAutoScroll","replacePlaceholders","action","replacements","exec","i","replace","type","sort","export","display","bedrag","check","aanmeldFilter","aanmeldingen","aantal_aanmeldingen","aanmeld_limiet","totaalPrijs","prijs","datum","isValid","format","tijd","date","substr","meta","cell","node","firstChild","dateTime","createBlockSpec","attrs","group","draggable","toDOM","class","parseDOM","tag","getAttrs","dom","dataset","createGroepBlockSpec","tagType","naam","default","fetch","then","_a","ledenDiv","lid","leden","appendChild","uid","innerHTML","id","samenvatting_html","catch","innerText","activiteit","bestuur","commissie","groep","ketzer","ondervereniging","verticale","werkgroep","woonoord","boek","maaltijd","peiling","nodes","doc","content","paragraph","blockquote","defining","citaat","van","bbCitaat","bbCitaatNaam","bbCitaatUrl","inline","lidNaam","horizontal_rule","heading","level","code_block","marks","code","preserveWhitespace","text","image","src","alt","title","HTMLElement","getAttribute","plaatje","key","plaatjeSrc","hard_break","selectable","verklapper","bb","twitter","bbTwitter","bbVideo","bbAudio","formaat","bbSpotify","bbSpotifyFormaat","link","href","inclusive","em","style","strong","fontWeight","value","test","superscript","excludes","subscript","strikethrough","underline","offtopic","neuzen","parseDom","prive","nodesMap","schema","prefix","openPrompt","options","submitButton","cancelButton","form","document","createElement","formBody","formFooter","description","Object","entries","fields","name","field","label","required","modal","body","mouseOutside","e","contains","target","close","addEventListener","removeEventListener","parentNode","removeChild","submit","params","result","create","keys","read","bad","validate","reportInvalid","clean","getValues","callback","preventDefault","ctrlKey","metaKey","shiftKey","activeElement","tagName","toLowerCase","input","elements","focus","message","msg","left","offsetLeft","offsetWidth","offsetTop","className","textContent","Field","_value","validateType","TextField","Label","TextAreaField","classList","placeholder","autocomplete","FileField","files","LidField","textInput","hiddenInput","auxInput","ledenDataset","datumTokenizer","queryTokenizer","remote","wildcard","initialize","textValue","$","typeahead","hint","highlight","limit","source","ttAdapter","templates","suggestion","html","icon","super","YoutubeField","videoId","service","bbPrompt","view","dispatch","state","tr","replaceSelectionWith","createAndFill","placeholderPlugin","init","set","map","mapping","getMeta","widget","deco","pos","find","spec","props","getState","imageUpload","file","FormData","append","headers","uploadFile","found","from","findPlaceholder","replaceWith","setMeta","__rest","s","t","p","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","propertyIsEnumerable","canInsert","nodeType","$from","d","depth","index","canReplaceWith","insertImageItem","enable","_","callbackAttrs","insertCitaat","run","of","newAttrs","assign","cmdItem","cmd","enabled","passedOptions","select","markActive","to","empty","isInSet","storedMarks","rangeHasMark","markItem","markType","active","wrapListItem","priveItem","blockTypeItemPrompt","fromEntries","undefined","groepPrompt","template","methods","youtubeItemPrompt","bbInsert","insertPlaatjeItem","imageType","deleteSelection","startImageUpload","undo","redo","ol","ul","quote","selectParentNode","lift","join","trackChangesPlugin","trs","oldState","newState","JSON","stringify","toJSON","selectedIndex","lidList","cancel","updateLidHintsPosition","lidHints","querySelector","viewPos","parentElement","getBoundingClientRect","bottom","removeLidHints","updateLidHints","Array","children","lidHint","item","suggestLeden","noDecorations","char","appendText","keyBindings","ArrowUp","ArrowDown","Enter","command","Tab","Esc","onChange","queryText","range","coordsAtPos","end","term","cancelToken","encodeURI","full","token","querySelectorAll","position","lidDiv","createLidHints","onExit","createCommand","match","lidHintPlugin","imageRemovePlugin","newTransaction","descendants","startsWith","deleteRange","imageUploadPlugin","newView","CITEER_DIV_ID","getForumPost","sel","rangeCount","selContainer","getRangeAt","commonAncestorContainer","post","closest","getSelectionBoundingRect","getSelection","DOMRect","citeerSelectionHandler","citeerDiv","domCiteerDiv","getElementById","forumPost","editor","currentEditor","parsedContent","parse","cloneContents","citaatNode","insert","head","scrollTo","getCiteerDiv","selectionInForumPost","isCollapsed","placement","update","ctx","extern","menuContent","loggedIn","tekst","mark","youtube","spotify","video","audio","bullet_list","ordered_list","buildMenuItems","prosemirrorDoc","plugins","handleDoubleClickOn","ajaxRequest","onsuccess","onerror","onfinish","backgroundImage","backgroundPosition","backgroundRepeat","img","method","css","hide","error","ketzerAjax","addClass","cache","done","fail","jqXHR","textStatus","errorThrown","responseText","domUpdate","htmlString","trim","substring","element","parentId","HTMLScriptElement","eval","targetParent","formIsChanged","changed","origValue","checked","Boolean","formInlineToggle","$form","prev","toggle","trigger","formToggle","formReset","confirm","orig","HTMLInputElement","HTMLTextAreaElement","formSubmit","q","setAttribute","formData","tableid","off","formCancel","sourceEl","initSterrenField","raty","config","path","cancelHint","cancelPlace","noRatedMsg","click","score","initDoctrineField","bloodhound","autoselect","idField","val","suggestieIdField","initAutocompleteField","clicktogo","sources","datasets","header","location","modalOpen","_b","modalEl","Modal","modalBackdrop","getComputedStyle","dispatchEvent","FocusEvent","show","Event","modalClose","reload","redirect","webpackContext","req","webpackContextResolve","__webpack_require__","o","resolve","module","exports"],"mappings":"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","file":"js/278.aea1825603c2b6d0bbd3.bundle.js","sourcesContent":["import $ from 'jquery';\nimport { init } from '../ctx';\nimport { parseData } from '../lib/util';\nimport render from './render';\nexport function isDataTableResponse(response) {\n    const check = response;\n    return typeof response == 'object'\n        && \"lastUpdate\" in check\n        && \"autoUpdate\" in check\n        && \"data\" in check;\n}\nexport async function initDataTable(el) {\n    await import('./bootstrap');\n    const $el = $(el);\n    const settingsJson = $el.data('settings');\n    const search = $el.data('search');\n    // Zet de callback voor ajax\n    if (settingsJson.ajax) {\n        settingsJson.ajax.data.lastUpdate = fnGetLastUpdate($el);\n        settingsJson.ajax.dataSrc = fnAjaxUpdateCallback($el);\n    }\n    // Zet de render method op de columns\n    settingsJson.columns.forEach((col) => col.render = render[col.render]);\n    // Init DataTable\n    const table = $el.DataTable(settingsJson);\n    $el.dataTable().api().search(search);\n    table.on('page', () => table.rows({ selected: true }).deselect());\n    table.on('childRow.dt', (event, data) => init(data.container.get(0)));\n}\nexport async function initOfflineDataTable(el) {\n    await import('./bootstrap');\n    $(el).DataTable(parseData(el));\n}\n/****************************\n * Een paar functies om met datatables te\n * praten, laadt datatables zelf niet in.\n */\nexport function fnUpdateDataTable(tableId, response) {\n    const $table = $(tableId);\n    const table = $table.DataTable();\n    // update or remove existing rows or add new rows\n    response.data.forEach((row) => {\n        const $tr = $('tr[data-uuid=\"' + row.UUID + '\"]');\n        if ($tr.length === 1) {\n            if ('remove' in row) {\n                table.row($tr).remove();\n            }\n            else {\n                table.row($tr).data(row);\n                init($tr.get(0));\n            }\n        }\n        else if ($tr.length === 0) {\n            table.row.add(row);\n        }\n        else {\n            alert($tr.length);\n        }\n    });\n    table.draw(false);\n}\nexport function fnGetSelection(tableId) {\n    const selection = [];\n    $(tableId + ' tbody tr.selected').each(function () {\n        const uuid = $(this).attr('data-uuid');\n        if (!uuid) {\n            throw new Error(\"Tablerow heeft geen uuid\");\n        }\n        selection.push(uuid);\n    });\n    return selection;\n}\n// new Api(selector: Settings) is valide, maar wordt als type niet geaccepteerd, type lijkt niet uit te breiden.\n// https://datatables.net/reference/type/DataTables.Settings\nexport function getApiFromSettings(settings) {\n    return new $.fn.dataTable.Api(settings);\n}\n/**\n * Wordt gebruikt in gesprekken.\n *\n * @param {jQuery} $table\n */\nfunction fnAutoScroll($table) {\n    const $scroll = $table.parent();\n    if ($scroll.hasClass('dataTables_scrollBody')) {\n        const top = $scroll.scrollTop();\n        const height = $scroll.innerHeight();\n        if (!top || !height) {\n            throw new Error(\"$scroll heeft geen top of height\");\n        }\n        // autoscroll if already on bottom\n        if (top + height >= $scroll[0].scrollHeight - 20) {\n            // check before draw and scroll after\n            window.setTimeout(() => {\n                $scroll.animate({\n                    scrollTop: $scroll[0].scrollHeight,\n                }, 800);\n            }, 200);\n        }\n    }\n}\nexport const fnGetLastUpdate = ($table) => () => Number($table.data('lastupdate'));\nexport const fnSetLastUpdate = ($table) => (lastUpdate) => $table.data('lastupdate', lastUpdate);\n/**\n * Called after ajax load complete.\n *\n * @returns object\n * @param {jQuery} $table\n */\nexport const fnAjaxUpdateCallback = ($table) => (json) => {\n    fnSetLastUpdate($table)(json.lastUpdate);\n    const tableConfig = $table.DataTable();\n    if (json.autoUpdate) {\n        const timeout = parseInt(json.autoUpdate, 10);\n        if (!isNaN(timeout) && timeout < 600000) { // max 10 min\n            setTimeout(() => {\n                $.post(tableConfig.ajax.url(), {\n                    lastUpdate: fnGetLastUpdate($table),\n                }, (data) => {\n                    const tableId = $table.attr('id');\n                    if (!tableId) {\n                        throw new Error(\"Table heeft geen id\");\n                    }\n                    fnUpdateDataTable(tableId, data);\n                    fnAjaxUpdateCallback($table)(data);\n                });\n            }, timeout);\n        }\n    }\n    fnAutoScroll($table);\n    return json.data;\n};\nexport function replacePlaceholders(action, row) {\n    const replacements = /:(\\w+)/g.exec(action);\n    if (!replacements) {\n        return action;\n    }\n    for (let i = 1; i < replacements.length; i++) {\n        action = action.replace(':' + replacements[i], row[replacements[i]]);\n    }\n    return action;\n}\n","import moment from 'moment';\nimport { formatBedrag, formatFilesize } from '../lib/util';\nimport { getApiFromSettings } from './api';\n/**\n * Standaard gedefinieerde render functies.\n */\nexport default {\n    default(data, type) {\n        if (data === null || typeof data !== 'object') {\n            return data;\n        }\n        switch (type) {\n            case 'sort':\n                return data.sort;\n            case 'export':\n                return data.export;\n            default:\n                return data.display;\n        }\n    },\n    bedrag(data) {\n        return formatBedrag(data);\n    },\n    check(data) {\n        return '<span class=\"ico ' + (data ? 'tick' : 'cross') + '\"></span>';\n    },\n    aanmeldFilter(data) {\n        return data ? `<span class=\"ico group_key\" title=\"Aanmeld filter actief: '${data}'\"></span>` : '';\n    },\n    aanmeldingen(data, type, row) {\n        return (row.aantal_aanmeldingen || 0) + ' (' + row.aanmeld_limiet + ')';\n    },\n    totaalPrijs(data, type, row) {\n        return formatBedrag(row.aantal_aanmeldingen * parseInt(row.prijs, 10));\n    },\n    date(data) {\n        const datum = moment(data);\n        if (datum.isValid()) {\n            return datum.format('L');\n        }\n        return data;\n    },\n    time(data) {\n        const tijd = moment(data);\n        if (tijd.isValid()) {\n            return tijd.format('LT');\n        }\n        return data;\n    },\n    datetime(date) {\n        if (Number(date) == date) {\n            return moment.unix(date).format('YYYY-MM-DD HH:mm');\n        }\n        if (!date) {\n            return '';\n        }\n        if (date.substr(0, 5) === '<time') {\n            return date;\n        }\n        if (date.substr(0, 1) === '-') {\n            return \"Nooit\";\n        }\n        const datumTijd = moment(date);\n        if (datumTijd.isValid()) {\n            return moment(date).format('YYYY-MM-DD HH:mm');\n        }\n        return date;\n    },\n    timeago(data, type, row, meta) {\n        const api = getApiFromSettings(meta.settings);\n        const cell = api.cell(meta.row, meta.col).node().firstChild;\n        switch (type) {\n            case 'sort':\n            case 'export':\n                return cell.dateTime;\n            default:\n                return data;\n        }\n    },\n    filesize(data, type) {\n        switch (type) {\n            case 'sort':\n                return Number(data);\n            default:\n                return formatFilesize(data);\n        }\n    },\n};\n","import { html } from \"../../lib/util\";\nconst createBlockSpec = (type, attr = 'id') => ({\n    attrs: { [attr]: {} },\n    group: \"block\",\n    draggable: true,\n    toDOM: node => [\"div\", { [`data-${type}`]: node.attrs[attr], class: \"pm-block\" }, `${type}: ${node.attrs[attr]}`],\n    parseDOM: [{ tag: `div[data-${type}`, getAttrs: (dom) => ({ [attr]: dom.dataset[type] }) }],\n});\nconst createGroepBlockSpec = (tagType, type, attr = 'id') => ({\n    attrs: { [attr]: {}, naam: { default: \"\" } },\n    group: \"block\",\n    draggable: true,\n    toDOM: node => {\n        const el = html `\n\t\t\t<div data-${tagType}=\"${node.attrs[attr]}\" class=\"bb-block\"><i class=\"fa fa-spinner fa-spin\"></i></div>`;\n        fetch(`/groepen/${type}/${node.attrs[attr]}/info`)\n            .then(response => response.json())\n            .then(json => {\n            var _a;\n            el.dataset.naam = json.naam;\n            const ledenDiv = html `\n\t\t\t\t\t<div id=\"groep-leden-content-2152\" class=\"groep-tab-content GroepPasfotosView\" style=\"height: 212.8px;\">`;\n            for (const lid of json.leden) {\n                ledenDiv.appendChild(html `<a href=\"#\" title=\"${lid.naam}\" class=\"lidLink\"><img\n\t\t\t\t\t\tclass=\"pasfoto\"\n\t\t\t\t\t\tsrc=\"/profiel/pasfoto/${lid.uid}.jpg\"\n\t\t\t\t\t\talt=\"Pasfoto van ${lid.naam}\"></a>`);\n            }\n            el.innerHTML = '';\n            el.appendChild(html `\n<div class=\"bb-groep\">\n<div class=\"groep-samenvatting\">\n<div class=\"float-end\"><a class=\"btn\" target=\"_blank\" href=\"/groepen/${type}/${json.id}/wijzigen\"\ntitle=\"Wijzig ${json.naam}\"><span\nclass=\"fa fa-edit\"></span></a></div>\n<h3>${json.naam}</h3>\n${(_a = json.samenvatting_html) !== null && _a !== void 0 ? _a : \"\"}\n</div>\n\n<div id=\"groep-leden-2152\" class=\"groep-leden\">\n<ul class=\"groep-tabs nobullets\">\n<li class=\"geschiedenis\"><a class=\"btn disabled\" href=\"#\" title=\"Bekijk geschiedenis\"><span\nclass=\"fa fa-clock\"></span></a></li>\n<li><a class=\"btn btn-primary disabled\" href=\"#\" title=\"Pasfoto's tonen\"><span\nclass=\"fa fa-user\"></span></a></li>\n<li><a class=\"btn disabled\" href=\"#\" title=\"Lijst tonen\"><span class=\"fa fa-align-justify\"></span></a>\n</li>\n<li><a class=\"btn disabled\" href=\"#\" title=\"Statistiek tonen\"><span class=\"fa fa-chart-pie\"></span></a>\n</li>\n<li><a class=\"btn disabled\" href=\"#\" title=\"E-mails tonen\"><span class=\"fa fa-envelope\"></span></a></li>\n<li><a class=\"btn disabled\" href=\"#\" title=\"Allergie/dieet tonen\"><span class=\"fa fa-heartbeat\"></span></a>\n</li>\n<li class=\"knop-vergroot\"></li>\n</ul>\n${ledenDiv}\n</div>\n<div class=\"clear\">&nbsp;</div>\n</div>`);\n        })\n            .catch(() => {\n            el.innerText = \"Groep niet gevonden\";\n        });\n        return el;\n    },\n    parseDOM: [{ tag: `div[data-${type}`, getAttrs: (dom) => ({ [attr]: dom.dataset[type], naam: dom.dataset.naam }) }]\n});\n// Groepen\nexport const activiteit = createGroepBlockSpec(\"activiteit\", \"activiteiten\");\nexport const bestuur = createGroepBlockSpec(\"bestuur\", \"besturen\");\nexport const commissie = createGroepBlockSpec(\"commissie\", \"commissies\");\nexport const groep = createGroepBlockSpec(\"groep\", \"overig\");\nexport const ketzer = createGroepBlockSpec(\"ketzer\", \"ketzers\");\nexport const ondervereniging = createGroepBlockSpec(\"ondervereniging\", \"onderverenigingen\");\nexport const verticale = createGroepBlockSpec(\"verticale\", \"verticalen\");\nexport const werkgroep = createGroepBlockSpec(\"werkgroep\", \"werkgroepen\");\nexport const woonoord = createGroepBlockSpec(\"woonoord\", \"woonoorden\");\n// Overig\nexport const boek = createBlockSpec(\"boek\");\nexport const document = createBlockSpec(\"document\");\nexport const maaltijd = createBlockSpec(\"maaltijd\");\nexport const peiling = createBlockSpec(\"peiling\");\n","import { Schema } from \"prosemirror-model\";\nimport { activiteit, bestuur, boek, commissie, document, groep, ketzer, maaltijd, ondervereniging, peiling, verticale, werkgroep, woonoord } from \"./block-nodes\";\nimport { audio, spotify, twitter, video, youtube } from \"./embed\";\nimport { addListNodes } from \"prosemirror-schema-list\";\nimport OrderedMap from \"orderedmap\";\n// Helper functie om typescript te laten snappen dat alle elementen van i U zijn, maar dat de sleutels nog te ontdekken zijn.\nconst RecordWithType = () => (id) => id;\n// :: Object\n// [Specs](#model.NodeSpec) for the nodes defined in this schema.\nexport const nodes = RecordWithType()({\n    // :: NodeSpec The top level document node.\n    doc: {\n        content: \"block+\"\n    },\n    // :: NodeSpec A plain paragraph textblock. Represented in the DOM\n    // as a `<p>` element.\n    paragraph: {\n        content: \"inline*\",\n        group: \"block\",\n        parseDOM: [{ tag: \"p\" }],\n        toDOM: () => [\"p\", 0]\n    },\n    // :: NodeSpec A blockquote (`<blockquote>`) wrapping one or more blocks.\n    blockquote: {\n        content: \"block+\",\n        group: \"block\",\n        defining: true,\n        parseDOM: [{ tag: \"blockquote\" }],\n        toDOM: () => [\"blockquote\", 0]\n    },\n    citaat: {\n        attrs: { van: {}, naam: { default: \"Lid\" }, url: { default: \"\" } },\n        content: \"block+\",\n        group: \"block\",\n        defining: true,\n        parseDOM: [{\n                tag: \"div[data-bb-citaat]\",\n                getAttrs: (dom) => ({ van: dom.dataset.bbCitaat, naam: dom.dataset.bbCitaatNaam, url: dom.dataset.bbCitaatUrl })\n            }],\n        toDOM: node => [\"div\", { \"data-bb-citaat\": node.attrs.van, \"data-bb-citaat-naam\": node.attrs.naam, \"data-bb-citaat-url\": node.attrs.url }, 0]\n    },\n    lid: {\n        attrs: { uid: {}, naam: { default: null } },\n        group: \"inline\",\n        inline: true,\n        parseDOM: [{\n                tag: \"[data-lid]\",\n                getAttrs: (dom) => ({ uid: dom.dataset.lid, naam: dom.dataset.lidNaam })\n            }],\n        toDOM: node => [\"span\", { \"data-lid\": node.attrs.uid, \"data-lidNaam\": node.attrs.naam }, node.attrs.naam],\n    },\n    // :: NodeSpec A horizontal rule (`<hr>`).\n    horizontal_rule: {\n        group: \"block\",\n        parseDOM: [{ tag: \"hr\" }],\n        toDOM: () => [\"hr\"]\n    },\n    // :: NodeSpec A heading textblock, with a `level` attribute that\n    // should hold the number 1 to 6. Parsed and serialized as `<h1>` to\n    // `<h6>` elements.\n    heading: {\n        attrs: { level: { default: 1 } },\n        content: \"inline*\",\n        group: \"block\",\n        defining: true,\n        parseDOM: [{ tag: \"h1\", attrs: { level: 1 } },\n            { tag: \"h2\", attrs: { level: 2 } },\n            { tag: \"h3\", attrs: { level: 3 } },\n            { tag: \"h4\", attrs: { level: 4 } },\n            { tag: \"h5\", attrs: { level: 5 } },\n            { tag: \"h6\", attrs: { level: 6 } }],\n        toDOM: node => [\"h\" + node.attrs.level, 0]\n    },\n    // :: NodeSpec A code listing. Disallows marks or non-text inline\n    // nodes by default. Represented as a `<pre>` element with a\n    // `<code>` element inside of it.\n    code_block: {\n        content: \"text*\",\n        marks: \"\",\n        group: \"block\",\n        code: true,\n        defining: true,\n        parseDOM: [{ tag: \"pre\", preserveWhitespace: \"full\" }],\n        toDOM: () => [\"pre\", [\"code\", 0]]\n    },\n    // :: NodeSpec The text node.\n    text: {\n        group: \"inline\"\n    },\n    // :: NodeSpec An inline image (`<img>`) node. Supports `src`,\n    // `alt`, and `href` attributes. The latter two default to the empty\n    // string.\n    image: {\n        inline: true,\n        attrs: {\n            src: {},\n            alt: { default: null },\n            title: { default: null }\n        },\n        group: \"inline\",\n        draggable: true,\n        parseDOM: [{\n                tag: \"img[src]\",\n                getAttrs: dom => {\n                    if (dom instanceof HTMLElement) {\n                        return {\n                            src: dom.getAttribute(\"src\"),\n                            title: dom.getAttribute(\"title\"),\n                            alt: dom.getAttribute(\"alt\")\n                        };\n                    }\n                    else {\n                        throw new Error(\"Unable to process dom\");\n                    }\n                }\n            }],\n        toDOM: (node) => {\n            const { src, alt, title } = node.attrs;\n            return [\"img\", { src, alt, title }];\n        }\n    },\n    plaatje: {\n        inline: true,\n        attrs: {\n            src: {},\n            key: {},\n        },\n        group: \"inline\",\n        draggable: true,\n        parseDOM: [{\n                tag: \"[data-plaatje]\",\n                getAttrs: (dom) => ({ key: dom.dataset.plaatje, src: dom.dataset.plaatjeSrc })\n            }],\n        toDOM: (node) => [\"div\", {\n                \"data-plaatje\": node.attrs.key,\n                \"data-plaatje-src\": node.attrs.src\n            }, [\"img\", { src: node.attrs.src }]],\n    },\n    // :: NodeSpec A hard line break, represented in the DOM as `<br>`.\n    hard_break: {\n        inline: true,\n        group: \"inline\",\n        selectable: false,\n        parseDOM: [{ tag: \"br\" }],\n        toDOM: () => [\"br\"]\n    },\n    verklapper: {\n        content: \"block+\",\n        group: \"block\",\n        parseDOM: [{ tag: \"div[data-bb-verklapper]\" }],\n        toDOM: () => [\"div\", { \"data-bb-verklapper\": \"\", class: \"pm-verklapper\" }, 0]\n    },\n    bb: {\n        attrs: { bb: { default: null } },\n        group: \"block\",\n        toDOM: node => [\"div\", { \"data-bb\": node.attrs.bb }, node.attrs.bb],\n        parseDOM: [{\n                tag: \"div[data-bb]\",\n                getAttrs: (dom) => ({ bb: dom.dataset.bb })\n            }]\n    },\n    // Groepen\n    activiteit, bestuur, commissie, groep,\n    ketzer, ondervereniging, verticale, werkgroep,\n    woonoord,\n    // Overige blokken\n    boek, document, maaltijd, peiling,\n    // Embeds\n    twitter, youtube, video, audio, spotify,\n});\n// :: Object [Specs](#model.MarkSpec) for the marks in the schema.\nexport const marks = RecordWithType()({\n    // :: MarkSpec A link. Has `href` and `title` attributes. `title`\n    // defaults to the empty string. Rendered and parsed as an `<a>`\n    // element.\n    link: {\n        attrs: {\n            href: {},\n        },\n        inclusive: false,\n        parseDOM: [{\n                tag: \"a[href]\",\n                getAttrs: dom => {\n                    if (dom instanceof HTMLElement) {\n                        return { href: dom.getAttribute(\"href\") };\n                    }\n                    else {\n                        throw new Error(\"Cannot process dom\");\n                    }\n                }\n            }],\n        toDOM: node => {\n            const { href } = node.attrs;\n            return [\"a\", { href, title: href }, 0];\n        }\n    },\n    // :: MarkSpec An emphasis mark. Rendered as an `<em>` element.\n    // Has parse rules that also match `<i>` and `font-style: italic`.\n    em: {\n        parseDOM: [{ tag: \"i\" }, { tag: \"em\" }, { style: \"font-style=italic\" }],\n        toDOM: () => [\"em\", 0]\n    },\n    // :: MarkSpec A strong mark. Rendered as `<strong>`, parse rules\n    // also match `<b>` and `font-weight: bold`.\n    strong: {\n        parseDOM: [{ tag: \"strong\" },\n            // This works around a Google Docs misbehavior where\n            // pasted content will be inexplicably wrapped in `<b>`\n            // tags with a font-weight normal.\n            {\n                tag: \"b\", getAttrs: node => {\n                    if (node instanceof HTMLElement) {\n                        return node.style.fontWeight != \"normal\" && null;\n                    }\n                    else {\n                        throw new Error(\"Cannot process dom\");\n                    }\n                }\n            },\n            {\n                style: \"font-weight\", getAttrs: value => {\n                    if (typeof value == 'string') {\n                        return /^(bold(er)?|[5-9]\\d{2,})$/.test(value) && null;\n                    }\n                    else {\n                        throw new Error(\"Cannot process value\");\n                    }\n                }\n            }],\n        toDOM: () => [\"strong\", 0]\n    },\n    superscript: {\n        excludes: \"superscript subscript\",\n        parseDOM: [{ tag: \"sup\" }],\n        toDOM: () => [\"sup\", 0]\n    },\n    subscript: {\n        excludes: \"subscript superscript\",\n        parseDOM: [{ tag: \"sub\" }],\n        toDOM: () => [\"sub\", 0]\n    },\n    strikethrough: {\n        parseDOM: [{ tag: \"del\" }],\n        toDOM: () => [\"del\", 0]\n    },\n    underline: {\n        parseDOM: [{ tag: \"ins\" }],\n        toDOM: () => [\"ins\", 0]\n    },\n    // :: MarkSpec Code font mark. Represented as a `<code>` element.\n    code: {\n        parseDOM: [{ tag: \"code\" }],\n        toDOM: () => [\"code\", 0]\n    },\n    offtopic: {\n        parseDOM: [{ tag: \"span[data-offtopic]\" }],\n        toDOM: () => [\"span\", { \"data-offtopic\": \"\", class: \"offtopic\" }, 0],\n    },\n    neuzen: {\n        parseDom: [{ tag: \"span[data-neuzen]\" }],\n        toDOM: () => [\"span\", { \"data-neuzen\": \"\" }, 0],\n    },\n    prive: {\n        attrs: { prive: { default: null } },\n        parseDOM: [{ tag: \"span[data-prive]\" }],\n        toDOM: (node) => [\"span\", {\n                \"data-prive\": node.attrs.prive,\n                class: \"bb-prive\",\n                title: `Prive: ${node.attrs.prive || \"P_LOGGED_IN\"}`\n            }, 0],\n    },\n});\nconst nodesMap = OrderedMap.from(nodes);\nexport const schema = new Schema({\n    nodes: addListNodes(nodesMap, \"paragraph block*\", \"block\"),\n    marks\n});\n","export const twitter = {\n    attrs: { url: {} },\n    group: \"block\",\n    parseDOM: [{\n            tag: \"div[data-bb-twitter]\",\n            getAttrs: (dom) => ({ url: dom.dataset.bbTwitter })\n        }],\n    toDOM: node => [\"div\", { \"data-bb-twitter\": node.attrs.url }]\n};\nexport const video = {\n    attrs: { url: {} },\n    group: \"block\",\n    parseDOM: [{\n            tag: \"div[data-bb-video]\",\n            getAttrs: (dom) => ({ url: dom.dataset.bbVideo })\n        }],\n    toDOM: node => [\"div\", { \"data-bb-video\": node.attrs.url }],\n};\nexport const audio = {\n    attrs: { url: {} },\n    group: \"block\",\n    parseDOM: [{\n            tag: \"div[data-bb-audio]\",\n            getAttrs: (dom) => ({ url: dom.dataset.bbAudio })\n        }],\n    toDOM: node => [\"div\", { \"data-bb-audio\": node.attrs.url }]\n};\nexport const youtube = {\n    attrs: { id: {} },\n    group: \"block\",\n    parseDOM: [{ tag: \"div[data-bb-youtube]\" }],\n    toDOM: node => [\"div\", {\n            \"data-bb-youtube\": node.attrs.id,\n            \"class\": \"bb-video\",\n            title: \"YouTube\"\n        }, [\"img\", { src: `https://i.ytimg.com/vi/${node.attrs.id}/sddefault.jpg` }]]\n};\nexport const spotify = {\n    attrs: { url: {}, formaat: { default: \"hoog\" } },\n    group: \"block\",\n    parseDOM: [{\n            tag: \"div[data-bb-spotify]\",\n            getAttrs: (dom) => ({\n                url: dom.dataset.bbSpotify,\n                formaat: dom.dataset.bbSpotifyFormaat\n            })\n        }],\n    toDOM: node => [\"div\", { \"data-bb-spotify\": node.attrs.url, \"data-bb-spotify-formaat\": node.attrs.formaat }]\n};\n","import { html } from \"../lib/util\";\nimport Bloodhound from \"corejs-typeahead\";\nimport getVideoId from \"get-video-id\";\nconst prefix = \"ProseMirror-popup\";\nexport function openPrompt(options) {\n    const submitButton = html `\n\t\t<button type=\"submit\" class=\"${prefix}-submit btn btn-primary\">OK</button>`;\n    const cancelButton = html `\n\t\t<button type=\"button\" class=\"${prefix}-cancel btn btn-primary\">Cancel</button>`;\n    const form = document.createElement(\"form\");\n    const formBody = form.appendChild(html `\n\t\t<div class=\"modal-body\"></div>`);\n    const formFooter = form.appendChild(html `\n\t\t<div class=\"modal-footer\"></div>`);\n    if (options.description) {\n        formBody.appendChild(html `<p>${options.description}</p>`);\n    }\n    Object.entries(options.fields).forEach(([name, field]) => {\n        formBody.appendChild(html `\n\t\t\t<div class=\"mb-3 row\">\n\t\t\t\t<label class=\"col-sm-2 col-form-label\" for=\"${name}\">${field.options.label}${field.options.required ? html `<span class=\"text-danger\">*</span>` : \"\"}</label>\n\t\t\t\t<div class=\"col-sm-10\">${field.render(name)}</div>\n\t\t\t</div>`);\n    });\n    formFooter.appendChild(html `\n\t\t<div class=\"${prefix}-buttons\">${submitButton} ${cancelButton}</div>`);\n    const modal = html `\n\t\t<div class=\"modal\" style=\"display: block;\" tabindex=\"-1\">\n\t\t\t<div class=\"modal-dialog\">\n\t\t\t\t<div class=\"modal-content\">\n\t\t\t\t\t<div class=\"modal-header\">\n\t\t\t\t\t\t<h5 class=\"modal-title\">${options.title}</h5>\n\t\t\t\t\t</div>\n\t\t\t\t\t${form}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>`;\n    document.body.appendChild(modal);\n    const mouseOutside = e => {\n        if (!form.contains(e.target))\n            close();\n    };\n    setTimeout(() => window.addEventListener(\"mousedown\", mouseOutside), 50);\n    const close = () => {\n        window.removeEventListener(\"mousedown\", mouseOutside);\n        if (modal.parentNode)\n            modal.parentNode.removeChild(modal);\n    };\n    cancelButton.addEventListener(\"click\", close);\n    const submit = () => {\n        const params = getValues(options.fields, form);\n        if (params) {\n            close();\n            options.callback(params);\n        }\n    };\n    form.addEventListener(\"submit\", e => {\n        e.preventDefault();\n        submit();\n    });\n    form.addEventListener(\"keydown\", e => {\n        if (e.key == \"Escape\") {\n            e.preventDefault();\n            close();\n        }\n        else if (e.key == \"Enter\" && !(e.ctrlKey || e.metaKey || e.shiftKey) && document.activeElement.tagName.toLowerCase() != \"textarea\") {\n            e.preventDefault();\n            submit();\n        }\n        else if (e.key == \"Tab\") {\n            window.setTimeout(() => {\n                if (!modal.contains(document.activeElement))\n                    close();\n            }, 500);\n        }\n    });\n    const input = form.elements[0];\n    if (input)\n        input.focus();\n}\nfunction getValues(fields, form) {\n    const result = Object.create(null);\n    for (const name of Object.keys(fields)) {\n        const field = fields[name];\n        const dom = form[name];\n        const value = field.read(dom);\n        const bad = field.validate(value);\n        if (bad) {\n            reportInvalid(dom, bad);\n            return null;\n        }\n        result[name] = field.clean(value);\n    }\n    return result;\n}\nfunction reportInvalid(dom, message) {\n    // FIXME this is awful and needs a lot more work\n    const parent = dom.parentNode;\n    const msg = parent.appendChild(document.createElement(\"div\"));\n    msg.style.left = (dom.offsetLeft + dom.offsetWidth + 2) + \"px\";\n    msg.style.top = (dom.offsetTop - 5) + \"px\";\n    msg.className = \"ProseMirror-invalid\";\n    msg.textContent = message;\n    setTimeout(() => parent.removeChild(msg), 1500);\n}\n// ::- The type of field that `FieldPrompt` expects to be passed to it.\nexport class Field {\n    // :: (Object)\n    // Create a field with the given options. Options support by all\n    // field types are:\n    //\n    // **`value`**`: ?any`\n    //   : The starting value for the field.\n    //\n    // **`label`**`: string`\n    //   : The label for the field.\n    //\n    // **`required`**`: ?bool`\n    //   : Whether the field is required.\n    //\n    // **`validate`**`: ?(any) → ?string`\n    //   : A function to validate the given value. Should return an\n    //     error message if it is not valid.\n    constructor(options) {\n        this.options = options;\n    }\n    // render:: (state: EditorState, props: Object) → dom.Node\n    // Render the field to the DOM. Should be implemented by all subclasses.\n    // :: (dom.Node) → any\n    // Read the field's value from its DOM node.\n    read(dom) {\n        return dom.value;\n    }\n    // :: (any) → ?string\n    // A field-type-specific validation function.\n    validateType(_value) {\n        return null;\n    }\n    validate(value) {\n        if (!value && this.options.required)\n            return \"Required field\";\n        return this.validateType(value) || (this.options.validate && this.options.validate(value));\n    }\n    clean(value) {\n        return this.options.clean ? this.options.clean(value) : value;\n    }\n    render(name) {\n        // abstract\n        return null;\n    }\n}\n// ::- A field class for single-line text fields.\nexport class TextField extends Field {\n    render(name) {\n        return html `<input type=\"text\" name=\"${name}\" id=\"${name}\" value=\"${this.options.value || \"\"}\" autocomplete=\"off\"\n\t\t\t\t\t\t\t\t\t\t\t class=\"form-control\"/>`;\n    }\n}\nexport class Label extends Field {\n    render(name) {\n        return html `<div>${this.options.value}</div>`;\n    }\n    read(dom) {\n        return \"\";\n    }\n}\n// ::- A field class for dropdown fields based on a plain `<select>`\n// tag. Expects an option `options`, which should be an array of\n// `{value: string, label: string}` objects, or a function taking a\n// `ProseMirror` instance and returning such an array.\nexport class SelectField extends Field {\n    render(name) {\n        const select = document.createElement(\"select\");\n        select.id = name;\n        select.name = name;\n        this.options.options.forEach(o => {\n            const opt = select.appendChild(document.createElement(\"option\"));\n            opt.value = o.value;\n            opt.selected = o.value == this.options.value;\n            opt.label = o.label;\n        });\n        return select;\n    }\n}\nexport class TextAreaField extends Field {\n    render(name) {\n        const input = document.createElement(\"textarea\");\n        input.id = name;\n        input.name = name;\n        input.classList.add(\"form-control\");\n        input.placeholder = this.options.label;\n        input.value = this.options.value || \"\";\n        input.autocomplete = \"off\";\n        input.rows = 20;\n        return input;\n    }\n}\nexport class FileField extends Field {\n    render(name) {\n        const input = document.createElement(\"input\");\n        input.id = name;\n        input.name = name;\n        input.classList.add(\"form-control\");\n        input.type = \"file\";\n        return input;\n    }\n    read(dom) {\n        return dom.files[0];\n    }\n}\nexport class LidField extends Field {\n    render(name) {\n        this.name = name;\n        const textInput = html `<input type=\"text\" class=\"form-control\" autocomplete=\"off\" name=\"${name}_naam\" value=\"${this.options.value.naam}\">`;\n        const hiddenInput = html `<input type=\"hidden\" name=\"${name}_uid\" value=\"${this.options.value.uid}\">`;\n        const auxInput = html `<input type=\"hidden\" name=\"${name}\">`;\n        const ledenDataset = new Bloodhound({\n            datumTokenizer: Bloodhound.tokenizers.obj.whitespace('value'),\n            queryTokenizer: Bloodhound.tokenizers.whitespace,\n            remote: {\n                url: '/tools/naamsuggesties?vorm=user&zoekin=voorkeur&q=%QUERY',\n                wildcard: '%QUERY',\n            }\n        });\n        ledenDataset.initialize();\n        let textValue = this.options.value.naam;\n        setTimeout(() => {\n            $(textInput).typeahead({\n                hint: true,\n                highlight: true,\n            }, {\n                name: 'leden',\n                display: 'value',\n                limit: 20,\n                source: ledenDataset.ttAdapter(),\n                templates: {\n                    suggestion: function (suggestion) {\n                        let html = '<p';\n                        if (suggestion.title) {\n                            html += ' title=\"' + suggestion.title + '\"';\n                        }\n                        html += '>';\n                        if (suggestion.icon) {\n                            html += suggestion.icon;\n                        }\n                        html += suggestion.value;\n                        if (suggestion.label) {\n                            html += '<span class=\"lichtgrijs\"> - ' + suggestion.label + '</span>';\n                        }\n                        return html + '</p>';\n                    }\n                }\n            });\n            $(textInput).on(\"typeahead:select\", (event, suggestion) => {\n                hiddenInput.value = suggestion['uid'];\n                textValue = suggestion['value'];\n            });\n            $(textInput).on(\"typeahead:change\", (event, value) => {\n                if (textValue != value) {\n                    hiddenInput.value = \"\";\n                }\n            });\n        });\n        return html `\n\t\t\t<div>\n\t\t\t\t${textInput}\n\t\t\t\t${hiddenInput}\n\t\t\t\t${auxInput}\n\t\t\t</div>`;\n    }\n    read(dom) {\n        return {\n            naam: dom.form[`${this.name}_naam`].value,\n            uid: dom.form[`${this.name}_uid`].value,\n        };\n    }\n    validate(value) {\n        if (this.options.required && !value.uid) {\n            return \"Selecteer een lid\";\n        }\n        return super.validate(value);\n    }\n}\nexport class YoutubeField extends Field {\n    render(name) {\n        return html `<textarea name=\"${name}\" id=\"${name}\" autocomplete=\"off\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"form-control\">${this.options.value || \"\"}</textarea>`;\n    }\n    read(dom) {\n        const videoId = getVideoId(dom.value);\n        if (videoId.service != \"youtube\") {\n            return '';\n        }\n        return videoId.id;\n    }\n}\n","import { openPrompt, TextAreaField } from \"./prompt\";\nexport const bbPrompt = (node, attrs, view) => openPrompt({\n    title: \"Bewerk bb\",\n    fields: {\n        'bb': new TextAreaField({ label: \"Bb\", value: attrs.bb })\n    },\n    callback(params) {\n        view.dispatch(view.state.tr.replaceSelectionWith(node.createAndFill(params)));\n        view.focus();\n    }\n});\n","import { Plugin } from \"prosemirror-state\";\nimport { Decoration, DecorationSet } from \"prosemirror-view\";\nexport const placeholderPlugin = new Plugin({\n    state: {\n        init() {\n            return DecorationSet.empty;\n        },\n        apply(tr, set) {\n            // Adjust decoration positions to changes made by the transaction\n            set = set.map(tr.mapping, tr.doc);\n            // See if the transaction adds or removes any placeholders\n            const action = tr.getMeta(this);\n            if (action && action.add) {\n                const widget = document.createElement(\"div\");\n                widget.classList.add(\"plaatje-placeholder\");\n                const deco = Decoration.widget(action.add.pos, widget, { id: action.add.id });\n                set = set.add(tr.doc, [deco]);\n            }\n            else if (action && action.remove) {\n                set = set.remove(set.find(null, null, spec => spec.id == action.remove.id));\n            }\n            return set;\n        }\n    },\n    props: {\n        decorations(state) {\n            return this.getState(state);\n        }\n    }\n});\nexport const findPlaceholder = (state, id) => {\n    const decorations = placeholderPlugin.getState(state);\n    const found = decorations.find(null, null, spec => spec.id == id);\n    return found.length ? found[0].from : null;\n};\n","import { findPlaceholder, placeholderPlugin } from \"./plugin/placeholder\";\nimport axios from \"axios\";\nimport { preloadImage } from \"../lib/util\";\n/**\n * Wordt opgepikt door de ImageField in PlaatjesUploadModalForm.\n * @param file\n */\nasync function uploadFile(file) {\n    const data = new FormData();\n    data.append('image_HF', file, file.name);\n    data.append('image', 'image_HF');\n    const response = await axios.post(\"/forum/plaatjes/upload_json\", data, {\n        headers: { 'content-type': 'multipart/form-data' },\n    });\n    return response.data;\n}\nexport async function startImageUpload(view, file) {\n    // A fresh object to act as the ID for this upload\n    const id = {};\n    // Replace the selection with a placeholder\n    const tr = view.state.tr;\n    if (!tr.selection.empty)\n        tr.deleteSelection();\n    tr.setMeta(placeholderPlugin, { add: { id, pos: tr.selection.from } });\n    view.dispatch(tr);\n    await imageUpload(view, file, id);\n}\nexport async function imageUpload(view, file, id) {\n    try {\n        const { src, key } = await uploadFile(file);\n        // Voorkom dat de view eventjes leeg is\n        await preloadImage(src);\n        const pos = findPlaceholder(view.state, id);\n        // If the content around the placeholder has been deleted, drop the image\n        if (pos == null)\n            return;\n        // Otherwise, insert it at the placeholder's position, and remove the placeholder\n        view.dispatch(view.state.tr\n            .replaceWith(pos, pos, view.state.schema.nodes.plaatje.create({ src, key }))\n            .setMeta(placeholderPlugin, { remove: { id } }));\n    }\n    catch (e) {\n        // On failure, just clean up the placeholder\n        view.dispatch(view.state.tr.setMeta(placeholderPlugin, { remove: { id } }));\n        // Rethrow\n        throw e;\n    }\n}\n","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { bbPrompt } from \"./bb-prompt\";\nimport { NodeSelection } from \"prosemirror-state\";\nimport { MenuItem } from \"prosemirror-menu\";\nimport { FileField, Label, LidField, openPrompt, TextField, YoutubeField } from \"./prompt\";\nimport { toggleMark } from \"prosemirror-commands\";\nimport { wrapInList } from \"prosemirror-schema-list\";\nimport { startImageUpload } from \"./forum-plaatje\";\nimport { html, ucfirst, uidLike } from \"../lib/util\";\nimport Vue from \"vue\";\nexport function canInsert(state, nodeType) {\n    const $from = state.selection.$from;\n    for (let d = $from.depth; d >= 0; d--) {\n        const index = $from.index(d);\n        if ($from.node(d).canReplaceWith(index, index, nodeType))\n            return true;\n    }\n    return false;\n}\n/**\n * Alleen voor externen\n * @param nodeType\n */\nexport const insertImageItem = (nodeType) => new MenuItem({\n    title: \"Afbeelding invoegen\",\n    label: \"Afbeelding\",\n    enable(state) {\n        return canInsert(state, nodeType);\n    },\n    run(state, _, view) {\n        let attrs = null;\n        if (state.selection instanceof NodeSelection && state.selection.node.type == nodeType)\n            attrs = state.selection.node.attrs;\n        openPrompt({\n            title: \"Afbeelding invoegen\",\n            fields: {\n                src: new TextField({ label: \"Locatie\", required: true, value: attrs && attrs.src }),\n            },\n            callback: callbackAttrs => {\n                view.dispatch(view.state.tr.replaceSelectionWith(nodeType.createAndFill(callbackAttrs)));\n                view.focus();\n            }\n        });\n    }\n});\nexport function insertCitaat(nodeType) {\n    return new MenuItem({\n        label: \"Citaat\",\n        title: \"Citaat invoegen\",\n        enable: state => canInsert(state, nodeType),\n        run: (state, dispatch, view) => {\n            let attrs = null;\n            let content = null;\n            if (state.selection instanceof NodeSelection && state.selection.node.type == nodeType) {\n                attrs = state.selection.node.attrs;\n                content = state.selection.node.content;\n            }\n            openPrompt({\n                description: \"\",\n                title: attrs ? \"Update: \" + nodeType.name : \"Invoegen: \" + nodeType.name,\n                fields: {\n                    lid: new LidField({\n                        label: \"Lid\",\n                        required: false,\n                        value: attrs && uidLike(attrs.van) ? { naam: attrs.naam, uid: attrs.van } : { naam: \"\", uid: \"\" },\n                    }),\n                    of: new Label({ label: \"\", value: \"- Of -\" }),\n                    naam: new TextField({\n                        label: \"Van\",\n                        required: false,\n                        value: attrs && !uidLike(attrs.van) ? attrs.naam : \"\",\n                    }),\n                    url: new TextField({\n                        label: \"Url\",\n                        required: false,\n                        value: attrs && !uidLike(attrs.van) ? attrs.url : \"\",\n                    })\n                },\n                callback({ lid, naam, url }) {\n                    const newAttrs = lid.uid ? { naam: lid.naam, van: lid.uid } : { van: naam, naam, url };\n                    view.dispatch(view.state.tr.replaceSelectionWith(nodeType.createAndFill(Object.assign({ type: nodeType.name }, newAttrs), content)));\n                    view.focus();\n                }\n            });\n        }\n    });\n}\nfunction cmdItem(cmd, _a) {\n    var { enabled } = _a, options = __rest(_a, [\"enabled\"]);\n    const passedOptions = Object.assign({ label: typeof options.title == \"string\" ? options.title : \"\", run: cmd }, options);\n    if ((!enabled || enabled === true) && !options.select)\n        passedOptions[enabled ? \"enable\" : \"select\"] = state => cmd(state);\n    return new MenuItem(passedOptions);\n}\nfunction markActive(state, type) {\n    const { from, $from, to, empty } = state.selection;\n    if (empty)\n        return !!type.isInSet(state.storedMarks || $from.marks());\n    else\n        return state.doc.rangeHasMark(from, to, type);\n}\nexport const markItem = (markType, options) => cmdItem(toggleMark(markType), Object.assign({ active(state) {\n        return markActive(state, markType);\n    }, enabled: true }, options));\nexport const linkItem = (markType) => new MenuItem({\n    title: \"Maak of verwijder link\",\n    icon: { dom: html `<i class=\"fa fa-link\"></i>` },\n    active(state) {\n        return markActive(state, markType);\n    },\n    enable() {\n        return true;\n    },\n    run(state, dispatch, view) {\n        if (markActive(state, markType)) {\n            toggleMark(markType)(state, dispatch);\n            return true;\n        }\n        if (state.selection.empty) {\n            openPrompt({\n                title: \"Maak een link\",\n                fields: {\n                    tekst: new TextField({\n                        label: \"Link tekst\",\n                        required: true,\n                    }),\n                    href: new TextField({\n                        label: \"Link doel\",\n                        required: true\n                    }),\n                },\n                callback({ tekst, href }) {\n                    // Voeg https toe als dat er nog niet staat.\n                    if (!(href.startsWith(\"/\") || href.startsWith(\"https://\") || href.startsWith(\"http://\"))) {\n                        href = \"https://\" + href;\n                    }\n                    view.dispatch(view.state.tr.replaceSelectionWith(state.schema.text(tekst).mark([markType.create({ href })]), false));\n                    view.focus();\n                }\n            });\n        }\n        else {\n            openPrompt({\n                title: \"Maak een link\",\n                fields: {\n                    href: new TextField({\n                        label: \"Link doel\",\n                        required: true\n                    }),\n                },\n                callback({ href }) {\n                    // Voeg https toe als dat er nog niet staat.\n                    if (!(href.startsWith(\"/\") || href.startsWith(\"https://\") || href.startsWith(\"http://\"))) {\n                        href = \"https://\" + href;\n                    }\n                    toggleMark(markType, { href })(view.state, view.dispatch);\n                    view.focus();\n                }\n            });\n        }\n    }\n});\nexport const wrapListItem = (nodeType, options) => cmdItem(wrapInList(nodeType, null), options);\nexport const priveItem = (markType) => new MenuItem({\n    title: \"Markeer tekst als prive\",\n    label: \"Prive\",\n    active: state => markActive(state, markType),\n    enable: state => !state.selection.empty,\n    run(state, dispatch, view) {\n        if (markActive(state, markType)) {\n            toggleMark(markType)(state, dispatch);\n            return true;\n        }\n        openPrompt({\n            title: \"Markeer als prive\",\n            fields: {\n                prive: new TextField({ label: \"Rechten (leeg voor ingelogd)\" }),\n            },\n            callback(attrs) {\n                toggleMark(markType, attrs)(view.state, view.dispatch);\n                view.focus();\n            }\n        });\n    }\n});\nexport const lidInsert = (nodeType) => new MenuItem({\n    title: \"Lid invoegen\",\n    label: \"Lid\",\n    enable: state => canInsert(state, nodeType),\n    run: (state, dispatch, view) => {\n        let attrs = null;\n        let content = null;\n        if (state.selection instanceof NodeSelection && state.selection.node.type == nodeType) {\n            attrs = state.selection.node.attrs;\n            content = state.selection.node.content;\n        }\n        openPrompt({\n            title: attrs ? \"Update: \" + nodeType.name : \"Invoegen: \" + nodeType.name,\n            description: \"Tip: Type '@' met een zoekterm in je bericht om snel een lid te noemen.\",\n            fields: {\n                lid: new LidField({\n                    label: \"Lid\",\n                    required: true,\n                    value: attrs ? { uid: attrs.uid, naam: attrs.naam } : { uid: \"\", naam: \"\" }\n                })\n            },\n            callback(callbackAttrs) {\n                view.dispatch(view.state.tr.replaceSelectionWith(nodeType.createAndFill(Object.assign({ type: nodeType.name }, callbackAttrs.lid), content)));\n                view.focus();\n            }\n        });\n    }\n});\nexport const blockTypeItemPrompt = (nodeType, label, title, description = \"\") => new MenuItem({\n    title,\n    label,\n    enable: state => canInsert(state, nodeType),\n    run: (state, dispatch, view) => {\n        let attrs = null;\n        let content = null;\n        if (state.selection instanceof NodeSelection && state.selection.node.type == nodeType) {\n            attrs = state.selection.node.attrs;\n            content = state.selection.node.content;\n        }\n        openPrompt({\n            description,\n            title: attrs ? \"Update: \" + nodeType.name : \"Invoegen: \" + nodeType.name,\n            fields: Object.fromEntries(Object.entries(nodeType.spec.attrs).map(([attr, spec]) => [attr, new TextField({\n                    label: ucfirst(attr),\n                    required: spec.default === undefined,\n                    value: attrs ? attrs[attr] : spec.default\n                })])),\n            callback(callbackAttrs) {\n                view.dispatch(view.state.tr.replaceSelectionWith(nodeType.createAndFill(Object.assign({ type: nodeType.name }, callbackAttrs), content)));\n                view.focus();\n            }\n        });\n    }\n});\nexport const groepPrompt = (nodeType, label, title, type) => new MenuItem({\n    title,\n    label,\n    enable: state => canInsert(state, nodeType),\n    run: (state, dispatch, view) => {\n        let content = null;\n        if (state.selection instanceof NodeSelection && state.selection.node.type == nodeType) {\n            content = state.selection.node.content;\n        }\n        const el = document.body.appendChild(document.createElement(\"div\"));\n        new Vue({\n            el,\n            template: `\n\t\t\t\t<groepprompt :close=\"close\" :selectgroep=\"selectGroep\" :type=\"type\"/>`,\n            data: { type },\n            methods: {\n                close() {\n                    this.$el.remove();\n                },\n                selectGroep(naam, id) {\n                    this.$el.remove();\n                    view.dispatch(view.state.tr.replaceSelectionWith(nodeType.createAndFill({\n                        type: nodeType.name,\n                        naam,\n                        id\n                    }, content)));\n                    view.focus();\n                }\n            }\n        });\n    }\n});\nexport const youtubeItemPrompt = (nodeType, label, title, description = \"\") => new MenuItem({\n    title,\n    label,\n    enable: state => canInsert(state, nodeType),\n    run: (state, dispatch, view) => {\n        let attrs = null;\n        let content = null;\n        if (state.selection instanceof NodeSelection && state.selection.node.type == nodeType) {\n            attrs = state.selection.node.attrs;\n            content = state.selection.node.content;\n        }\n        openPrompt({\n            description,\n            title: attrs ? \"Update: \" + nodeType.name : \"Invoegen: \" + nodeType.name,\n            fields: {\n                id: new YoutubeField({\n                    label: \"Id\",\n                    required: true,\n                    value: attrs ? attrs.id : \"\",\n                })\n            },\n            callback(callbackAttrs) {\n                view.dispatch(view.state.tr.replaceSelectionWith(nodeType.createAndFill(Object.assign({ type: nodeType.name }, callbackAttrs), content)));\n                view.focus();\n            }\n        });\n    }\n});\nexport const bbInsert = (nodeType) => new MenuItem({\n    title: \"BB code als platte tekst invoegen\",\n    label: \"BB code\",\n    enable: state => canInsert(state, nodeType),\n    run: (state, dispatch, view) => {\n        let attrs = { bb: \"\" };\n        if (state.selection instanceof NodeSelection && state.selection.node.type == nodeType) {\n            attrs = state.selection.node.attrs;\n        }\n        bbPrompt(nodeType, attrs, view);\n    }\n});\nexport const insertPlaatjeItem = (nodeType, imageType) => new MenuItem({\n    title: \"Afbeelding invoegen\",\n    label: \"Afbeelding\",\n    enable: state => canInsert(state, nodeType) || canInsert(state, imageType),\n    run: (state, dispatch, view) => {\n        openPrompt({\n            title: \"Plaatje uploaden\",\n            fields: {\n                image: new FileField({ label: \"Afbeelding\" }),\n                of: new Label({ label: \"\", value: \"- Of -\" }),\n                url: new TextField({ label: \"Url\" }),\n            },\n            callback: params => {\n                if (params.url) {\n                    view.dispatch(view.state.tr.replaceSelectionWith(imageType.createAndFill({ src: params.url })));\n                    view.focus();\n                }\n                else if (params.image) {\n                    startImageUpload(view, params.image);\n                }\n            }\n        });\n    }\n});\n","import { html } from \"../lib/util\";\nexport default {\n    strong: { dom: html `<i class=\"fa fa-bold\"></i>` },\n    em: { dom: html `<i class=\"fa fa-italic\"></i>` },\n    link: { dom: html `<i class=\"fa fa-link\"></i>` },\n    undo: { dom: html `<i class=\"fa fa-undo\"></i>` },\n    redo: { dom: html `<i class=\"fa fa-redo\"></i>` },\n    ol: { dom: html `<i class=\"fa fa-list-ol\"></i>` },\n    ul: { dom: html `<i class=\"fa fa-list-ul\"></i>` },\n    quote: { dom: html `<i class=\"fa fa-quote-right\"></i>` },\n    underline: { dom: html `<i class=\"fa fa-underline\"></i>` },\n    selectParentNode: { dom: html `<i class=\"fa fa-object-group\"></i>` },\n    lift: { dom: html `<i class=\"fa fa-outdent\"></i>` },\n    prive: { dom: html `<i class=\"fa fa-user-shield\"></i>` },\n    join: { dom: html `<i class=\"fa fa-caret-up\"></i>` },\n};\n","import { Plugin } from \"prosemirror-state\";\n/**\n * Track changes as JSON to an input element\n * @param input\n */\nexport const trackChangesPlugin = (input) => new Plugin({\n    appendTransaction(trs, oldState, newState) {\n        input.value = JSON.stringify(newState.doc.toJSON());\n    }\n});\n","import { suggest } from \"prosemirror-suggest\";\nimport axios from \"axios\";\nlet selectedIndex = 0;\nlet lidList = [];\nlet cancel = axios.CancelToken.source();\nasync function search(term, cancelToken) {\n    if (!term || term.length === 1) {\n        return [];\n    }\n    else {\n        const response = await axios.get(\"/tools/naamsuggesties?vorm=user&zoekin=voorkeur&q=\" + encodeURI(term), { cancelToken });\n        return response.data;\n    }\n}\nconst updateLidHintsPosition = (view, pos) => {\n    const lidHints = document.querySelector(\".lid-hints\");\n    if (!lidHints)\n        return;\n    const viewPos = view.dom.parentElement.getBoundingClientRect();\n    lidHints.style.left = (pos.left - viewPos.left) + \"px\";\n    lidHints.style.top = (pos.bottom - viewPos.top) + \"px\";\n};\nconst createLidHints = (command, view, pos) => {\n    Array.from(document.querySelectorAll('.lid-hints')).forEach(hint => hint.remove());\n    const lidHints = document.createElement(\"div\");\n    lidHints.classList.add('lid-hints', 'list-group');\n    lidHints.style.position = 'absolute';\n    for (const lid of lidList) {\n        const lidDiv = lidHints.appendChild(document.createElement(\"div\"));\n        lidDiv.classList.add(\"list-group-item\", \"list-group-item-action\");\n        lidDiv.addEventListener('click', () => {\n            command(lid);\n        });\n        lidDiv.textContent = lid.value;\n    }\n    view.dom.parentElement.appendChild(lidHints);\n    updateLidHintsPosition(view, pos);\n    updateLidHints();\n};\nconst removeLidHints = () => {\n    const lidHints = document.querySelector(\".lid-hints\");\n    if (lidHints)\n        lidHints.remove();\n};\nconst updateLidHints = () => {\n    const lidHints = document.querySelector(\".lid-hints\");\n    for (const hint of Array.from(lidHints.children)) {\n        hint.classList.remove(\"active\");\n    }\n    const lidHint = lidHints.children.item(selectedIndex);\n    if (lidHint)\n        lidHint.classList.add(\"active\");\n};\nconst suggestLeden = {\n    noDecorations: true,\n    char: '@',\n    name: 'lid-hint',\n    appendText: '',\n    keyBindings: {\n        ArrowUp: () => {\n            selectedIndex = (selectedIndex - 1 + lidList.length) % lidList.length;\n            updateLidHints();\n        },\n        ArrowDown: () => {\n            selectedIndex = (selectedIndex + 1) % lidList.length;\n            updateLidHints();\n        },\n        // Enter wordt niet opgepikt.\n        Enter: ({ command, event }) => {\n            event.preventDefault();\n            command(lidList[selectedIndex]);\n        },\n        Tab: ({ command, event }) => {\n            event.preventDefault();\n            command(lidList[selectedIndex]);\n        },\n        Esc: () => {\n            removeLidHints();\n        },\n    },\n    onChange: async ({ command, queryText, range, view }) => {\n        updateLidHintsPosition(view, view.coordsAtPos(range.end));\n        cancel.cancel();\n        cancel = axios.CancelToken.source();\n        try {\n            lidList = await search(queryText.full, cancel.token);\n            selectedIndex = 0;\n            createLidHints(command, view, view.coordsAtPos(range.end));\n        }\n        catch (_a) {\n            // noop, cancelled\n        }\n    },\n    onExit: () => {\n        cancel.cancel();\n        removeLidHints();\n        lidList = [];\n        selectedIndex = 0;\n    },\n    // Create a  function that is passed into the change, exit and keybinding handlers.\n    // This is useful when these handlers are called in a different part of the app.\n    createCommand: ({ match, view }) => {\n        return (lid) => {\n            if (!lid) {\n                return;\n            }\n            const tr = view.state.tr;\n            const { from, to } = match.range;\n            tr.replaceWith(from, to, view.state.schema.nodes.lid.createAndFill({ uid: lid.uid, naam: lid.value }));\n            view.dispatch(tr);\n        };\n    },\n};\nexport const lidHintPlugin = suggest(suggestLeden);\n","import { Plugin } from \"prosemirror-state\";\nimport { placeholderPlugin } from \"./placeholder\";\nimport { imageUpload } from \"../forum-plaatje\";\nimport { base64toFile } from \"../../lib/util\";\n/**\n * Verwijderd plaatjes zonder url. (Extern)\n * @param schema\n */\nexport const imageRemovePlugin = (schema) => new Plugin({\n    appendTransaction(trs, oldState, newState) {\n        let newTransaction = null;\n        newState.doc.descendants((node, pos) => {\n            if (node.type == schema.nodes.image && node.attrs.src.startsWith(\"data:\")) {\n                newTransaction = (newTransaction !== null && newTransaction !== void 0 ? newTransaction : newState.tr).deleteRange(pos, pos + 1);\n            }\n        });\n        return newTransaction;\n    },\n});\n/**\n * Upload plaatjes zonder url. (Intern)\n * @param schema\n */\nexport const imageUploadPlugin = (schema) => {\n    let view = null;\n    return new Plugin({\n        view: newView => {\n            view = newView;\n            return {};\n        },\n        appendTransaction(trs, oldState, newState) {\n            let newTransaction = null;\n            newState.doc.descendants((node, pos) => {\n                if (node.type == schema.nodes.image && node.attrs.src.startsWith(\"data:\")) {\n                    // Found an image\n                    const id = {};\n                    // Verwijder de afbeelding.\n                    newTransaction = newState.tr.deleteRange(pos, pos + 1);\n                    // Zorg ervoor dat er een placeholder op deze plek wordt neergezet.\n                    newTransaction.setMeta(placeholderPlugin, { add: { id, pos } });\n                    (async () => {\n                        // Converteer de data attribuut naar een file\n                        const file = await base64toFile(node.attrs.src, 'pastedImage');\n                        await imageUpload(view, file, id);\n                    })();\n                }\n            });\n            return newTransaction;\n        },\n    });\n};\n","import { docReady, html } from \"../lib/util\";\nimport { DOMParser } from \"prosemirror-model\";\nimport { createPopper } from \"@popperjs/core\";\nconst CITEER_DIV_ID = 'citeerDiv';\nconst getForumPost = (sel) => {\n    if (sel.type == 'Range' && sel.rangeCount) {\n        const range = sel.getRangeAt(0);\n        const selContainer = range.commonAncestorContainer;\n        const htmlContainer = selContainer instanceof HTMLElement ? selContainer : selContainer.parentElement;\n        const post = htmlContainer.closest('.forum-bericht');\n        if (post && (post.contains(selContainer) || post == selContainer)) {\n            return post;\n        }\n    }\n    return null;\n};\nconst getSelectionBoundingRect = () => {\n    const sel = window.getSelection();\n    if (!sel.rangeCount) {\n        return new DOMRect();\n    }\n    const range = sel.getRangeAt(0);\n    return range.getBoundingClientRect();\n};\nconst getCiteerDiv = () => {\n    const domCiteerDiv = document.getElementById(CITEER_DIV_ID);\n    if (domCiteerDiv)\n        return domCiteerDiv;\n    const citeerDiv = html `\n\t\t<div\n\t\t\tid=\"${CITEER_DIV_ID}\"\n\t\t\tclass=\"card position-absolute\"\n\t\t\tstyle=\"display: none\"\n\t\t>\n\t\t\t<button type=\"button\" class=\"btn\" data-selectie=\"\">\n\t\t\t\t<i class=\"fas fa-quote-left\"></i>\n\t\t\t\tCiteren\n\t\t\t</button>\n\t\t</div>`;\n    citeerDiv.querySelector('.btn').addEventListener('click', () => {\n        const selection = window.getSelection();\n        const forumPost = getForumPost(selection);\n        if (!forumPost)\n            return;\n        const { naam, uid } = forumPost.dataset;\n        const editor = window.currentEditor;\n        if (!editor)\n            return;\n        const citaat = editor.state.schema.nodes.citaat;\n        const parser = DOMParser.fromSchema(editor.state.schema);\n        const parsedContent = parser.parse(selection.getRangeAt(0).cloneContents());\n        const citaatNode = citaat.create({ van: uid, naam }, parsedContent.content);\n        editor.dispatch(editor.state.tr.insert(editor.state.selection.head, citaatNode));\n        $(window).scrollTo('#reageren');\n        citeerDiv.style.display = 'none';\n        // We returnen altijd false, dan wordt de href= van <a> niet meer uitgevoerd.\n        // Het werkt dan dus nog wel als javascript uit staat.\n        return false;\n    });\n    return document.body.appendChild(citeerDiv);\n};\n/**\n * Laat citeerDiv zien bij een selectie.\n */\nconst citeerSelectionHandler = () => {\n    const citeerDiv = getCiteerDiv();\n    const selectionInForumPost = getForumPost(window.getSelection());\n    if (window.currentEditor && selectionInForumPost && !window.getSelection().isCollapsed) {\n        citeerDiv.style.display = \"block\";\n        const popper = createPopper({ getBoundingClientRect: getSelectionBoundingRect }, citeerDiv, { placement: 'bottom' });\n        popper.update();\n    }\n    else {\n        citeerDiv.style.display = \"none\";\n    }\n};\ndocReady(() => {\n    document.addEventListener('selectionchange', citeerSelectionHandler);\n});\n","import { EditorState } from \"prosemirror-state\";\nimport { EditorView } from \"prosemirror-view\";\nimport { Node } from \"prosemirror-model\";\nimport { schema } from \"./schema\";\nimport { exampleSetup } from \"prosemirror-example-setup\";\nimport { buildMenuItems } from \"./menu\";\nimport { htmlDecode } from \"../lib/util\";\nimport { bbPrompt } from \"./bb-prompt\";\nimport ctx from \"../ctx\";\nimport { placeholderPlugin } from \"./plugin/placeholder\";\nimport { trackChangesPlugin } from \"./plugin/track-changes\";\nimport { lidHintPlugin } from \"./plugin/lid-hint\";\nimport { imageRemovePlugin, imageUploadPlugin } from \"./plugin/image-upload\";\nimport \"./citeer\";\nctx.addHandler('.pm-editor', (el) => {\n    const extern = el.dataset.extern;\n    const menuContent = buildMenuItems(schema, window.loggedIn && !extern);\n    const input = document.querySelector('#' + el.dataset.prosemirrorDoc);\n    const text = htmlDecode(input.value.replace(/&quot;/g, \"\\\\\\\"\"));\n    window.currentEditor = new EditorView(el, {\n        state: EditorState.create({\n            doc: Node.fromJSON(schema, JSON.parse(text)),\n            plugins: [\n                lidHintPlugin,\n                ((window.loggedIn && !extern) ? imageUploadPlugin(schema) : imageRemovePlugin(schema)),\n                ...exampleSetup({\n                    schema,\n                    menuContent\n                }),\n                placeholderPlugin,\n                trackChangesPlugin(input),\n            ]\n        }),\n        handleDoubleClickOn(view, pos, node) {\n            if (node.type == schema.nodes.bb) {\n                bbPrompt(node.type, node.attrs, view);\n            }\n            return true;\n        }\n    });\n});\n","import { blockTypeItem, Dropdown, DropdownSubmenu, MenuItem, wrapItem } from \"prosemirror-menu\";\nimport { redo, undo } from \"prosemirror-history\";\nimport { bbInsert, blockTypeItemPrompt, canInsert, groepPrompt, insertCitaat, insertImageItem, insertPlaatjeItem, lidInsert, linkItem, markItem, priveItem, wrapListItem, youtubeItemPrompt } from \"./menu-item\";\nimport { cut } from \"../lib/util\";\nimport icon from \"./icon\";\nimport { joinUp, lift, selectParentNode } from \"prosemirror-commands\";\n/**\n * Het menu voor de prosemirror editor, op basis van de waarde van loggedIn worden specifieke\n * velden die alleen interessant zijn voor ingelogde gebruikers weergegeven.\n * @param schema\n * @param loggedIn\n */\nexport function buildMenuItems(schema, loggedIn) {\n    return [\n        cut([\n            markItem(schema.marks.strong, { title: \"Schakel dikgedrukt\", icon: icon.strong }),\n            markItem(schema.marks.em, { title: \"Schakel schuingedrukt\", icon: icon.em }),\n            markItem(schema.marks.underline, { title: \"Schakel onderlijn\", icon: icon.underline }),\n            linkItem(schema.marks.link),\n            !loggedIn && markItem(schema.marks.prive, { title: \"Maak prive\", icon: icon.prive }),\n            new Dropdown(cut([\n                markItem(schema.marks.code, { title: \"Schakel code\", label: \"Code\" }),\n                markItem(schema.marks.superscript, { title: \"Schakel superscript\", label: \"Superscript\" }),\n                markItem(schema.marks.subscript, { title: \"Schakel subscript\", label: \"Subscript\" }),\n                markItem(schema.marks.strikethrough, { title: \"Schakel doorstreep\", label: \"Doorstreep\" }),\n                markItem(schema.marks.offtopic, { title: \"Schakel offtopic\", label: \"Offtopic\" }),\n                loggedIn && priveItem(schema.marks.prive),\n            ]), { label: \"Meer\" })\n        ]),\n        cut([\n            loggedIn && lidInsert(schema.nodes.lid),\n        ]),\n        cut([\n            new Dropdown(cut([\n                loggedIn && insertPlaatjeItem(schema.nodes.plaatje, schema.nodes.image),\n                !loggedIn && insertImageItem(schema.nodes.image),\n                loggedIn && insertCitaat(schema.nodes.citaat),\n                wrapItem(schema.nodes.blockquote, { title: \"Maak een quote\", label: \"Quote\" }),\n                loggedIn && groepPrompt(schema.nodes.activiteit, \"Activiteitenketzer\", \"Activiteit invoegen\", \"activiteiten\"),\n                loggedIn && groepPrompt(schema.nodes.ketzer, \"Aanschafketzer\", \"Ketzer invoegen\", \"ketzers\"),\n                loggedIn && new DropdownSubmenu([\n                    blockTypeItemPrompt(schema.nodes.twitter, \"Twitter\", \"Twitter invoegen\"),\n                    youtubeItemPrompt(schema.nodes.youtube, \"YouTube\", \"YouTube invoegen\"),\n                    blockTypeItemPrompt(schema.nodes.spotify, \"Spotify\", \"Spotify invoegen\"),\n                    blockTypeItemPrompt(schema.nodes.video, \"Video\", \"Video invoegen\"),\n                    blockTypeItemPrompt(schema.nodes.audio, \"Geluid\", \"Geluid invoegen\"),\n                ], { label: \"Embed\" }),\n                loggedIn && new DropdownSubmenu([\n                    groepPrompt(schema.nodes.bestuur, \"Bestuur\", \"Bestuur invoegen\", \"besturen\"),\n                    groepPrompt(schema.nodes.commissie, \"Commissie\", \"Commissie invoegen\", \"commissies\"),\n                    groepPrompt(schema.nodes.groep, \"Overig\", \"Overige groep invoegen\", \"overig\"),\n                    groepPrompt(schema.nodes.ondervereniging, \"Ondervereniging\", \"Ondervereniging invoegen\", \"onderverenigingen\"),\n                    groepPrompt(schema.nodes.verticale, \"Verticale\", \"Verticale invoegen\", \"verticalen\"),\n                    groepPrompt(schema.nodes.werkgroep, \"Werkgroep\", \"Werkgroep invoegen\", \"werkgroepen\"),\n                    groepPrompt(schema.nodes.woonoord, \"Woonoord\", \"Woonoord invoegen\", \"woonoorden\"),\n                ], { label: \"Groep\" }),\n                loggedIn && blockTypeItemPrompt(schema.nodes.boek, \"Boek\", \"Boek invoegen\"),\n                loggedIn && blockTypeItemPrompt(schema.nodes.document, \"Document\", \"Document invoegen\"),\n                loggedIn && blockTypeItemPrompt(schema.nodes.maaltijd, \"Maaltijd\", \"Maaltijd invoegen\"),\n                loggedIn && blockTypeItemPrompt(schema.nodes.peiling, \"Peiling\", \"Peiling invoegen\"),\n                new MenuItem({\n                    title: \"Horizontale lijn invoegen\",\n                    label: \"Lijn\",\n                    enable(state) {\n                        return canInsert(state, schema.nodes.horizontal_rule);\n                    },\n                    run(state, dispatch) {\n                        dispatch(state.tr.replaceSelectionWith(schema.nodes.horizontal_rule.create()));\n                    }\n                }),\n                wrapItem(schema.nodes.verklapper, {\n                    title: \"Stop selectie in verklapper\",\n                    label: \"Verklapper\"\n                }),\n                bbInsert(schema.nodes.bb),\n            ]), { label: \"Invoegen\" }),\n            new Dropdown([\n                blockTypeItem(schema.nodes.paragraph, {\n                    title: \"Verander naar een paragraaf\",\n                    label: \"Tekst\"\n                }),\n                blockTypeItem(schema.nodes.code_block, {\n                    title: \"Verander naar een code blok\",\n                    label: \"Code\"\n                }),\n                blockTypeItem(schema.nodes.heading, {\n                    title: \"Verander naar kop 1\",\n                    label: \"Titel\",\n                    attrs: { level: 1 },\n                }),\n                blockTypeItem(schema.nodes.heading, {\n                    title: \"Verander naar kop 2\",\n                    label: \"Kop\",\n                    attrs: { level: 2 },\n                }),\n                blockTypeItem(schema.nodes.heading, {\n                    title: \"Verander naar kop 3\",\n                    label: \"Subkop\",\n                    attrs: { level: 3 },\n                }),\n            ], { label: \"Stijl\" }),\n        ]),\n        [\n            new MenuItem({\n                title: \"Laatste wijziging ongedaan maken\",\n                run: undo,\n                enable: state => undo(state),\n                icon: icon.undo\n            }),\n            new MenuItem({\n                title: \"Herhaal de laatste ongedaan gemaakte wijziging\",\n                run: redo,\n                enable: state => redo(state),\n                icon: icon.redo\n            })\n        ],\n        [\n            wrapListItem(schema.nodes.bullet_list, {\n                title: \"Maak een puntenlijst\",\n                icon: icon.ul\n            }),\n            wrapListItem(schema.nodes.ordered_list, {\n                title: \"Maak een geordende lijst\",\n                icon: icon.ol\n            }),\n            new MenuItem({\n                title: \"Voeg samen met blok hier boven\",\n                run: joinUp,\n                select: state => joinUp(state),\n                icon: icon.join\n            }),\n            new MenuItem({\n                title: \"Til uit omvattende blok\",\n                run: lift,\n                select: state => lift(state),\n                icon: icon.lift\n            }),\n            new MenuItem({\n                title: \"Selecteer dit blok\",\n                run: selectParentNode,\n                select: state => selectParentNode(state),\n                icon: icon.selectParentNode\n            }),\n        ],\n    ];\n}\n","import $ from 'jquery';\nimport { modalClose } from './modal';\nimport axios from 'axios';\nimport { select } from \"./dom\";\nexport function ajaxRequest(type, url, data, source, onsuccess, onerror, onfinish) {\n    if (source) {\n        if (!source.classList.contains('noanim')) {\n            const img = $(`<img alt=\"Laden\" id=\"${source.id}\" title=\"${url}\" src=\"/images/loading-arrows.gif\" />`);\n            $(source).replaceWith(img);\n            source = img.get(0);\n        }\n        else if (source.classList.contains('InlineForm')) {\n            try {\n                Object.assign(select('.FormElement:first', source).style, {\n                    backgroundImage: 'url(\"/images/loading-fb.gif\")',\n                    backgroundPosition: 'center right',\n                    backgroundRepeat: 'no-repeat',\n                });\n            }\n            catch (e) {\n                // negeer\n            }\n        }\n        else {\n            source.classList.add('loading');\n        }\n    }\n    axios(url, {\n        method: type,\n        data,\n    }).then((response) => {\n        if (source) {\n            if (!$(source).hasClass('noanim')) {\n                $(source).hide();\n            }\n            else if ($(source).hasClass('InlineForm')) {\n                $(source).find('.FormElement:first').css({\n                    'background-image': '',\n                    'background-position': '',\n                    'background-repeat': '',\n                });\n            }\n            source.classList.remove('loading');\n        }\n        onsuccess(response.data);\n    }).catch((error) => {\n        if (source) {\n            $(source).replaceWith('<img alt=\"Mislukt\" title=\"' + error.message + '\" src=\"/plaetjes/famfamfam/cancel.png\" />');\n        }\n        else {\n            modalClose();\n        }\n        if (onerror) {\n            if (error.message.startsWith('<!DOC')) {\n                onerror('Er ging iets fout, code is: ' + error.code);\n            }\n            onerror(error.message);\n        }\n    }).then(() => {\n        if (onfinish) {\n            onfinish();\n        }\n    });\n}\n/**\n * @param url\n * @param ketzer\n * @returns {boolean}\n */\nexport function ketzerAjax(url, ketzer) {\n    $(ketzer + ' .aanmeldbtn').addClass('loading');\n    $.ajax({\n        cache: false,\n        data: '',\n        type: 'GET',\n        url,\n    }).done((data) => {\n        $(ketzer).replaceWith(data);\n    }).fail((jqXHR, textStatus, errorThrown) => {\n        $(ketzer + ' .aanmeldbtn')\n            .replaceWith($(`<div class=\"alert alert-danger\"><strong>Actie mislukt!</strong> ${errorThrown}</div>`));\n        throw new Error(jqXHR.responseText);\n    });\n    return true;\n}\n","import $ from 'jquery';\nimport { init } from '../ctx';\nimport { modalClose, modalOpen } from './modal';\nimport { fadeAway, htmlParse } from './util';\nimport { select } from \"./dom\";\nexport function domUpdate(htmlString) {\n    if (typeof htmlString !== 'string') {\n        return;\n    }\n    htmlString = htmlString.trim();\n    if (htmlString.substring(0, 9) === '<!DOCTYPE') {\n        alert('response error');\n        throw new Error(htmlString);\n    }\n    const elements = htmlParse(htmlString);\n    for (const element of elements) {\n        if (!(element instanceof HTMLElement)) {\n            // element kan ook een stuk tekst zijn, hier kunnen we niets mee.\n            continue;\n        }\n        const id = element.id;\n        const parentId = element.getAttribute('parentid');\n        if (!id && element instanceof HTMLScriptElement) {\n            eval(element.innerText);\n            modalClose();\n            return;\n        }\n        // Probeer niet een lege id te laden.\n        const target = id ? document.querySelector(`#${id}`) : null;\n        const targetParent = parentId ? document.querySelector(`#${parentId}`) : null;\n        if (target) {\n            if (element.classList.contains('remove')) {\n                fadeAway(target, 400);\n            }\n            else {\n                // Jquery voert ook js uit, dat is nodig op dit moment voor forms\n                $(target).replaceWith($(element));\n            }\n        }\n        else if (targetParent) {\n            targetParent.append(element);\n        }\n        else if (element instanceof HTMLScriptElement) {\n            document.head.append(element);\n        }\n        else {\n            select('#maalcie-tabel tbody:visible:first').append(element); // FIXME: make generic\n        }\n        init(element);\n        if (id === 'modal') {\n            modalOpen();\n        }\n        else {\n            modalClose();\n        }\n    }\n}\n","import axios from 'axios';\nimport $ from 'jquery';\nimport { fnGetSelection, fnUpdateDataTable, isDataTableResponse } from '../datatable/api';\nimport { ajaxRequest } from './ajax';\nimport { domUpdate } from './domUpdate';\nimport { modalClose } from './modal';\nimport { redirect, reload } from './reload';\nimport { parents, select, selectAll } from \"./dom\";\nimport { throwError } from \"./util\";\nimport Bloodhound from \"corejs-typeahead\";\nrequire('../editor');\nexport function formIsChanged(form) {\n    let changed = false;\n    selectAll('.FormElement:not(.tt-hint)', form).forEach(el => {\n        const origValue = el.getAttribute('origvalue');\n        if (el.type == 'radio') {\n            if (el.checked && origValue !== el.value) {\n                changed = true;\n            }\n        }\n        else if (el.type == 'checkbox') {\n            if (Boolean(origValue) !== el.checked) {\n                changed = true;\n            }\n        }\n        else if (el.value !== origValue) {\n            changed = true;\n        }\n    });\n    return changed;\n}\n/**\n * @see templates/instellingen/beheer/instelling_row.tpl\n * @param form\n */\nexport function formInlineToggle(form) {\n    const $form = $(form);\n    $form.prev('.InlineFormToggle').toggle();\n    $form.toggle();\n    $form.children(':first').trigger('focus');\n}\nexport function formToggle(target, event) {\n    event.preventDefault();\n    formInlineToggle(select('form', parents(target)));\n    return false;\n}\nexport function formReset(event, form) {\n    const target = event.target;\n    if (!target || !(target instanceof HTMLElement)) {\n        throw new Error(\"formReset: geen EventTarget\");\n    }\n    if (!form) {\n        form = target.closest('form');\n        event.preventDefault();\n    }\n    if (!form) {\n        throw new Error(\"Geen form gevonden in formReset\");\n    }\n    if (target.classList.contains('confirm') && !confirm(target.title + '.\\n\\nWeet u het zeker?')) {\n        return false;\n    }\n    selectAll('.FormElement', form).forEach(function (el) {\n        const orig = el.getAttribute('origvalue');\n        if (orig && (el instanceof HTMLInputElement || el instanceof HTMLTextAreaElement)) {\n            el.value = orig;\n        }\n    });\n    return false;\n}\n/**\n * @see view/formulier/invoervelden/InputField.abstract.php\n * @see view/formulier/invoervelden/ZoekField.php\n * @param event\n * @returns {boolean}\n */\nexport function formSubmit(event) {\n    const target = event.target;\n    if (target.classList.contains('confirm')) {\n        let q = target.title;\n        if (q) {\n            q += '.\\n\\n';\n        }\n        else {\n            q = 'Weet u het zeker?';\n        }\n        if (!confirm(q)) {\n            event.preventDefault();\n            return false;\n        }\n    }\n    const form = target.closest('form');\n    if (!form || !form.classList.contains('Formulier')) {\n        return false;\n    }\n    if (form.classList.contains('PreventUnchanged') && !formIsChanged(form)) {\n        event.preventDefault();\n        alert('Geen wijzigingen');\n        return false;\n    }\n    const href = target.getAttribute('href');\n    if (href && href != '#') {\n        form.setAttribute('action', href);\n    }\n    if (!(form.classList.contains('ModalForm') || form.classList.contains('InlineForm'))) {\n        // kijk of er een manier is die niet jquery is\n        $(form).off('submit');\n        $(form).trigger('submit');\n        return true;\n    }\n    else {\n        event.preventDefault();\n        const formData = new FormData(form);\n        let done = domUpdate;\n        let source = null;\n        if (form.classList.contains('InlineForm')) {\n            source = form;\n            const id = form.id;\n            if (id) {\n                formData.append('InlineFormId', id);\n            }\n            if ($(form).data('submitCallback')) {\n                done = $(form).data('submitCallback');\n            }\n        }\n        if (form.classList.contains('ModalForm')) {\n            done = (response) => {\n                if (typeof response === 'string') {\n                    domUpdate(response);\n                }\n                else {\n                    modalClose();\n                }\n            };\n        }\n        if (form.classList.contains('DataTableResponse')) {\n            const tableId = form.dataset.tableid;\n            if (!tableId || !document.getElementById(tableId)) {\n                throw new Error(\"DataTable not found\");\n            }\n            formData.append('DataTableId', tableId);\n            const selection = fnGetSelection('#' + tableId);\n            $.each(selection, (key, value) => {\n                formData.append('DataTableSelection[]', value);\n            });\n            done = (response) => {\n                if (isDataTableResponse(response)) { // JSON\n                    fnUpdateDataTable('#' + tableId, response);\n                    if (response.modal) {\n                        domUpdate(response.modal);\n                    }\n                    else {\n                        modalClose();\n                    }\n                }\n                else if (typeof response === 'string') { // HTML\n                    domUpdate(response);\n                }\n                else {\n                    throw new Error('onbekende response' + response);\n                }\n            };\n            if (!form.classList.contains('noanim')) {\n                source = null;\n            }\n        }\n        if (form.classList.contains('ReloadPage')) {\n            done = reload;\n        }\n        else if (form.classList.contains('redirect')) {\n            done = redirect;\n        }\n        const url = form.getAttribute('action');\n        if (!url) {\n            throw new Error(\"Form heeft geen action\");\n        }\n        ajaxRequest('POST', url, formData, source, done, throwError, () => {\n            if (form.classList.contains('SubmitReset')) {\n                formReset(event, form);\n            }\n        });\n        return false;\n    }\n}\n/**\n * @see view/formulier/invoervelden/InputField.abstract.php\n * @param event\n * @returns {boolean}\n */\nexport function formCancel(event) {\n    const sourceEl = event.target;\n    if (!sourceEl || !(sourceEl instanceof HTMLElement)) {\n        throw new Error(\"formCancel: Geen EventTarget\");\n    }\n    if (sourceEl.classList.contains('confirm') && !confirm(sourceEl.title + '.\\n\\nWeet u het zeker?')) {\n        event.preventDefault();\n        return false;\n    }\n    const form = sourceEl.closest('form');\n    if (!form) {\n        throw new Error(\"Geen form in formCancel\");\n    }\n    if (form.classList.contains('InlineForm')) {\n        event.preventDefault();\n        formInlineToggle(form);\n        return false;\n    }\n    if (form.classList.contains('ModalForm')) {\n        event.preventDefault();\n        const href = sourceEl.getAttribute('href');\n        if (href) {\n            axios.get(href);\n        }\n        if (!formIsChanged(form) || confirm('Sluiten zonder wijzigingen op te slaan?')) {\n            modalClose();\n        }\n        return false;\n    }\n    return true;\n}\nexport function initSterrenField(el) {\n    $(el).raty(Object.assign(Object.assign({}, JSON.parse(el.dataset.config)), { path: '/images/raty/', cancelHint: 'Wis beoordeling', cancelPlace: 'right', noRatedMsg: '', click: function (score) {\n            $(this).raty('score', score);\n            $(this).closest('form').submit();\n        } }));\n}\nexport const initDoctrineField = (el) => {\n    const url = el.dataset.url;\n    const bloodhound = new Bloodhound({\n        datumTokenizer: Bloodhound.tokenizers.obj.whitespace('value'),\n        queryTokenizer: Bloodhound.tokenizers.whitespace,\n        remote: {\n            url: `${url}%QUERY`,\n            wildcard: '%QUERY',\n        }\n    });\n    $(el).typeahead({\n        hint: true,\n        highlight: true,\n        autoselect: true,\n    }, {\n        name: \"Entity\",\n        display: \"value\",\n        source: bloodhound.ttAdapter(),\n        limit: 20,\n        templates: {\n            suggestion: function (suggestion) {\n                return `\n<p${suggestion.title ? ' title=\"' + suggestion.title + '\"' : \"\"}>\n<a class=\"suggestionUrl\">\n${suggestion.icon ? suggestion.icon : \"\"}\n${suggestion.value}\n${suggestion.label ? `<span class=\"lichtgrijs\"> - ${suggestion.label}</span>` : \"\"}\n</a>\n</p>`;\n            }\n        }\n    });\n    $(el).on('typeahead:select', function (event, suggestion, dataset) {\n        $(this).trigger('change');\n        $('#' + el.dataset.idField).val(suggestion[el.dataset.suggestieIdField]);\n    });\n};\nexport const initAutocompleteField = (el) => {\n    const autoselect = el.dataset.autoselect == \"true\";\n    const clicktogo = el.dataset.clicktogo == \"true\";\n    const sources = JSON.parse(el.dataset.sources);\n    const datasets = [];\n    for (const [name, source] of Object.entries(sources)) {\n        const bloodhound = new Bloodhound(Object.assign({ datumTokenizer: Bloodhound.tokenizers.obj.whitespace('value'), queryTokenizer: Bloodhound.tokenizers.whitespace }, source));\n        datasets.push({\n            name,\n            display: \"value\",\n            source: bloodhound.ttAdapter(),\n            limit: 20,\n            templates: {\n                header: isNaN(Number(name)) ? `<h3 class=\"tt-header\">${name}</h3>` : '',\n                suggestion: function (suggestion) {\n                    return `\n<p${suggestion.title ? ' title=\"' + suggestion.title + '\"' : \"\"}>\n<a class=\"suggestionUrl\" ${clicktogo ? ` href=\"${suggestion.url}\"` : ` onclick=\"event.preventDefault();return false;\"`}>\n${suggestion.icon ? suggestion.icon : \"\"}\n${suggestion.value}\n${suggestion.label ? `<span class=\"lichtgrijs\"> - ${suggestion.label}</span>` : \"\"}\n</a>\n</p>`;\n                }\n            }\n        });\n    }\n    $(el).typeahead({\n        hint: true,\n        highlight: true,\n        autoselect,\n    }, ...datasets);\n    $(el).on('typeahead:select', function (event, suggestion, dataset) {\n        $(this).trigger('change');\n        if (clicktogo) {\n            if (suggestion) {\n                window.location.href = suggestion.url;\n            }\n            else {\n                formSubmit(event);\n            }\n        }\n    });\n};\n","import $ from 'jquery';\nimport { Modal } from \"bootstrap\";\nexport function modalOpen(htmlString = '') {\n    var _a, _b;\n    const modalEl = document.getElementById(\"modal\");\n    const modal = (_a = Modal.getInstance(modalEl)) !== null && _a !== void 0 ? _a : new Modal(modalEl);\n    const modalBackdrop = $('.modal-backdrop');\n    if (modalEl.innerHTML === '' && htmlString === '') {\n        return false;\n    }\n    if (modalBackdrop.length) {\n        modalBackdrop.remove();\n    }\n    if (htmlString !== '') {\n        modalEl.replaceWith(htmlString);\n        (_b = Array.from(modalEl.querySelectorAll('input'))\n            .find(el => window.getComputedStyle(el).display != 'none')) === null || _b === void 0 ? void 0 : _b.dispatchEvent(new FocusEvent('focus'));\n    }\n    modal.show();\n    document.dispatchEvent(new Event('modalOpen'));\n    return true;\n}\nexport function modalClose() {\n    const modal = Modal.getInstance(document.getElementById(\"modal\"));\n    if (modal) {\n        modal.hide();\n    }\n    document.dispatchEvent(new Event('modalClose'));\n}\n","import { domUpdate } from './domUpdate';\nexport function reload(htmlString) {\n    if (typeof htmlString === 'string' && htmlString.substring(0, 16) === '<div id=\"modal\" ') {\n        domUpdate(htmlString);\n        return;\n    }\n    location.reload();\n}\nexport function redirect(htmlString) {\n    if (htmlString.substring(0, 16) === '<div id=\"modal\" ') {\n        domUpdate(htmlString);\n        return;\n    }\n    window.location.href = htmlString;\n}\n","var map = {\n\t\"./nl\": 674,\n\t\"./nl.js\": 674\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 8726;"],"sourceRoot":""}