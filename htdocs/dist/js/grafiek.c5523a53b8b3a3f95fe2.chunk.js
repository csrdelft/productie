(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{107:function(t,e,a){var r={"./nl":88,"./nl.js":88};function n(t){var e=o(t);return a(e)}function o(t){if(!a.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}n.keys=function(){return Object.keys(r)},n.resolve=o,t.exports=n,n.id=107},188:function(t,e,a){"use strict";a.r(e),a.d(e,"initPie",(function(){return u})),a.d(e,"initLine",(function(){return p})),a.d(e,"initBar",(function(){return h})),a.d(e,"initDeelnamegrafiek",(function(){return g})),a.d(e,"initSaldoGrafiek",(function(){return w}));var r=a(14),n=a.n(r),o=a(223),s=a.n(o),i=a(224),d=a.n(i),l=a(3);function c(t){const e=l.g`<canvas style="width: 100%; height: 100%"/>`;return t.appendChild(e),e}function u(t){const e=t.dataset.data;if(!e)throw new Error("initPie: element heeft geen data-data");let a=JSON.parse(e);return a=f(a),new s.a(c(t),{data:a,type:"pie"})}async function p(t){let e;if(t.dataset.data)e=JSON.parse(t.dataset.data);else{if(!t.dataset.url)throw new Error("Hier kan ik niets mee");e=(await n.a.post(t.dataset.url)).data}return e=function(t){const e=t.datasets;if(!e)throw new Error("Data heeft geen datasets");const a=d()(["tol","qualitative"],e.length)[Symbol.iterator]();return e.forEach(t=>{t.pointBorderColor=t.backgroundColor=t.borderColor="#"+a.next().value}),t}(e),new s.a(c(t),{data:e,options:{scales:{xAxes:[{stacked:!0,time:{tooltipFormat:"D MMM H:mm "},type:"time"}],yAxes:[{stacked:!0,ticks:{min:0}}]},tooltips:{intersect:!1,mode:"index"}},type:"line"})}function f(t){const e=t.datasets;if(!e)throw new Error("Data heeft geen datasets");return t.datasets=e.map(t=>{var e,a;return Object.assign({backgroundColor:d()("tol-rainbow",null!==(a=null===(e=t.data)||void 0===e?void 0:e.length)&&void 0!==a?a:0).map(t=>"#"+t)},t)}),t}function h(t){const e=t.dataset.data;if(!e)throw new Error("initBar: geen data-data attribuut");let a=JSON.parse(e);a=f(a);return new s.a(c(t),{data:a,type:"bar",options:{scales:{yAxes:[{ticks:{beginAtZero:!0,stepSize:1}}]}}})}function g(t){const e=t.dataset.data;if(!e)throw new Error("initBar: geen data-data attribuut");const a=JSON.parse(e),r={scales:{xAxes:[{stacked:!0,ticks:{callback:(t,e)=>a.jaren[e]}}],yAxes:[{stacked:!0,ticks:{stepSize:1}}]},tooltips:{callbacks:{title:(t,e)=>{const a=e.labels,r=t[0].index;if(!a||!r)throw new Error("Data heeft geen labels of index");return String(a[r])}},intersect:!1,mode:"index"}};return new s.a(c(t),{data:a,type:"bar",options:r})}function w(t){const e="true"===t.dataset.closed,a=t.dataset.uid;if(!a)throw new Error("Saldografiek heeft geen uid");let r=11;const o={scales:{xAxes:[{time:{tooltipFormat:"LLL"},type:"time"}],yAxes:[{ticks:{callback:l.e}}]},tooltips:{callbacks:{label(t,e){const a=e.datasets,r=t.datasetIndex;if(!a||!r)throw new Error("Saldografiek heeft geen datasets");return(a[r].label||"")+": "+Object(l.e)(Number(t.yLabel))}}}};s.a.defaults.NegativeTransparentLine||(s.a.defaults.NegativeTransparentLine=s.a.helpers.clone(s.a.defaults.line),s.a.controllers.NegativeTransparentLine=s.a.controllers.line.extend({update(...t){if(this.chart.data.datasets.length){const e=this.chart.data.datasets[0].data.reduce((t,e)=>e.y<t?e.y:t,this.chart.data.datasets[0].data[0].y);if(e>=0)return this.chart.data.datasets[0].borderColor="green",s.a.controllers.line.prototype.update.apply(this,t);const a=this.chart.data.datasets[0].data.reduce((t,e)=>e.y>t?e.y:t,this.chart.data.datasets[0].data[0].y);if(a<=0)return this.chart.data.datasets[0].borderColor="red",s.a.controllers.line.prototype.update.apply(this,t);const r=this.getScaleForId(this.getMeta().yAxisID),n=r.getPixelForValue(a),o=r.getPixelForValue(0),i=r.getPixelForValue(e),d=this.chart.chart.ctx.createLinearGradient(0,n,0,i),l=Math.min((o-n)/(i-n),1);d.addColorStop(0,"green"),d.addColorStop(l,"green"),d.addColorStop(l,"red"),d.addColorStop(1,"red"),this.chart.data.datasets[0].borderColor=d}return s.a.controllers.line.prototype.update.apply(this,t)}}));const i=new s.a(c(t),{data:{},type:"NegativeTransparentLine",options:o});function d(){if(n.a.post(`/profiel/${a}/saldo/${r}`).then(t=>{i.data=t.data,i.update()}),!t.querySelector(".saldo-terug-button")){const e=l.g`<a title="verder terug in de tijd" class="saldo-terug-button">&laquo;</a>`;t.appendChild(e),e.addEventListener("click",()=>{r*=2,r>5340||d()})}}if(e){const e=l.g`<a href="#" class="btn btn-primary">Toon saldografiek</a>`;e.addEventListener("click",a=>{a.preventDefault(),t.classList.remove("verborgen"),e.remove(),d()});const a=t.parentElement;if(!a)throw new Error("Saldografiek geen onderdeel van DOM");a.appendChild(e)}else t.classList.remove("verborgen"),d()}}}]);
//# sourceMappingURL=grafiek.c5523a53b8b3a3f95fe2.chunk.js.map