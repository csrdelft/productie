!function(t){function e(e){for(var o,a,r=e[0],h=e[1],l=e[2],u=0,c=[];u<r.length;u++)a=r[u],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&c.push(n[a][0]),n[a]=0;for(o in h)Object.prototype.hasOwnProperty.call(h,o)&&(t[o]=h[o]);for(p&&p(e);c.length;)c.shift()();return s.push.apply(s,l||[]),i()}function i(){for(var t,e=0;e<s.length;e++){for(var i=s[e],o=!0,r=1;r<i.length;r++){var h=i[r];0!==n[h]&&(o=!1)}o&&(s.splice(e--,1),t=a(a.s=i[0]))}return t}var o={},n={28:0},s=[];function a(e){if(o[e])return o[e].exports;var i=o[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=o,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(i,o,function(e){return t[e]}.bind(null,o));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/dist/";var r=window.webpackJsonp=window.webpackJsonp||[],h=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var p=h;s.push([156,1]),i()}({156:function(t,e,i){"use strict";i.r(e);var o=i(0),n=i.n(o),s=function(t){this._queue=[],this._onEmptyCallback=t};s.prototype.queue=function(t){this._queue.push(t),1!==this._queue.length||this._active||this._progressQueue()},s.prototype._progressQueue=function(){if(this._queue.length){var t=this._queue.shift();this._active=!0,t(n.a.proxy(this.next,this))}else this._onEmptyCallback()},s.prototype.clear=function(){this._queue=[]},s.prototype.next=function(){this._active=!1,this._progressQueue()};var a=function(t,e,i,o){this._el=t,this._data=i,this._path=e,this._currentFrameIndex=0,this._currentFrame=void 0,this._exiting=!1,this._currentAnimation=void 0,this._endCallback=void 0,this._started=!1,this._sounds={},this.currentAnimationName=void 0,this.preloadSounds(o),this._overlays=[this._el];var s=this._el;this._setupElement(this._el);for(var a=1;a<this._data.overlayCount;a++){var r=this._setupElement(n()("<div></div>"));s.append(r),this._overlays.push(r),s=r}};a.prototype._setupElement=function(t){var e=this._data.framesize;return t.css("display","none"),t.css({width:e[0],height:e[1]}),t.css("background","url('"+this._path+"/map.png') no-repeat"),t},a.prototype.animations=function(){var t=[],e=this._data.animations;for(var i in e)t.push(i);return t},a.prototype.preloadSounds=function(t){for(var e=0;e<this._data.sounds.length;e++){var i=this._data.sounds[e],o=t[i];o&&(this._sounds[i]=new Audio(o))}},a.prototype.hasAnimation=function(t){return!!this._data.animations[t]},a.prototype.exitAnimation=function(){this._exiting=!0},a.prototype.showAnimation=function(t,e){return this._exiting=!1,!!this.hasAnimation(t)&&(this._currentAnimation=this._data.animations[t],this.currentAnimationName=t,this._started||(this._step(),this._started=!0),this._currentFrameIndex=0,this._currentFrame=void 0,this._endCallback=e,!0)},a.prototype._draw=function(){var t=[];this._currentFrame&&(t=this._currentFrame.images||[]);for(var e=0;e<this._overlays.length;e++)if(e<t.length){var i=t[e],o=-i[0]+"px "+-i[1]+"px";this._overlays[e].css({"background-position":o,display:"block"})}else this._overlays[e].css("display","none")},a.prototype._getNextAnimationFrame=function(){if(this._currentAnimation){if(!this._currentFrame)return 0;var t=this._currentFrame,e=this._currentFrame.branching;if(this._exiting&&void 0!==t.exitBranch)return t.exitBranch;if(e)for(var i=100*Math.random(),o=0;o<e.branches.length;o++){var n=e.branches[o];if(i<=n.weight)return n.frameIndex;i-=n.weight}return this._currentFrameIndex+1}},a.prototype._playSound=function(){var t=this._currentFrame.sound;if(t){var e=this._sounds[t];e&&e.play()}},a.prototype._atLastFrame=function(){return this._currentFrameIndex>=this._currentAnimation.frames.length-1},a.prototype._step=function(){if(this._currentAnimation){var t=Math.min(this._getNextAnimationFrame(),this._currentAnimation.frames.length-1),e=!this._currentFrame||this._currentFrameIndex!==t;this._currentFrameIndex=t,this._atLastFrame()&&this._currentAnimation.useExitBranching||(this._currentFrame=this._currentAnimation.frames[this._currentFrameIndex]),this._draw(),this._playSound(),this._loop=window.setTimeout(n.a.proxy(this._step,this),this._currentFrame.duration),this._endCallback&&e&&this._atLastFrame()&&(this._currentAnimation.useExitBranching&&!this._exiting?this._endCallback(this.currentAnimationName,a.States.WAITING):this._endCallback(this.currentAnimationName,a.States.EXITED))}},a.prototype.pause=function(){window.clearTimeout(this._loop)},a.prototype.resume=function(){this._step()},a.States={WAITING:1,EXITED:0};var r=function(t){this._targetEl=t,this._hidden=!0,this._setup(),this.WORD_SPEAK_TIME=200,this.CLOSE_BALLOON_DELAY=2e3,this._BALLOON_MARGIN=15};r.prototype._setup=function(){this._balloon=n()('<div class="clippy-balloon"><div class="clippy-tip"></div><div class="clippy-content"></div></div> ').hide(),this._content=this._balloon.find(".clippy-content"),n()(document.body).append(this._balloon)},r.prototype.reposition=function(){for(var t=["top-left","top-right","bottom-left","bottom-right"],e=0;e<t.length;e++){var i=t[e];if(this._position(i),!this._isOut())break}},r.prototype._position=function(t){var e=this._targetEl.offset(),i=this._targetEl.height(),o=this._targetEl.width();e.top-=n()(window).scrollTop(),e.left-=n()(window).scrollLeft();var s,a,r=this._balloon.outerHeight(),h=this._balloon.outerWidth();switch(this._balloon.removeClass("clippy-top-left"),this._balloon.removeClass("clippy-top-right"),this._balloon.removeClass("clippy-bottom-right"),this._balloon.removeClass("clippy-bottom-left"),t){case"top-left":s=e.left+o-h,a=e.top-r-this._BALLOON_MARGIN;break;case"top-right":s=e.left,a=e.top-r-this._BALLOON_MARGIN;break;case"bottom-right":s=e.left,a=e.top+i+this._BALLOON_MARGIN;break;case"bottom-left":s=e.left+o-h,a=e.top+i+this._BALLOON_MARGIN}this._balloon.css({top:a,left:s}),this._balloon.addClass("clippy-"+t)},r.prototype._isOut=function(){var t=this._balloon.offset(),e=this._balloon.outerHeight(),i=this._balloon.outerWidth(),o=n()(window).width(),s=n()(window).height(),a=n()(document).scrollTop(),r=n()(document).scrollLeft(),h=t.top-a,l=t.left-r;return h-5<0||l-5<0||(h+e+5>s||l+i+5>o)},r.prototype.speak=function(t,e,i){this._hidden=!1,this.show();var o=this._content;o.height("auto"),o.width("auto"),o.text(e),o.height(o.height()),o.width(o.width()),o.text(""),this.reposition(),this._complete=t,this._sayWords(e,i,t)},r.prototype.show=function(){this._hidden||this._balloon.show()},r.prototype.hide=function(t){t?this._balloon.hide():this._hiding=window.setTimeout(n.a.proxy(this._finishHideBalloon,this),this.CLOSE_BALLOON_DELAY)},r.prototype._finishHideBalloon=function(){this._active||(this._balloon.hide(),this._hidden=!0,this._hiding=null)},r.prototype._sayWords=function(t,e,i){this._active=!0,this._hold=e;var o=t.split(/[^\S-]/),s=this.WORD_SPEAK_TIME,a=this._content,r=1;this._addWord=n.a.proxy((function(){this._active&&(r>o.length?(delete this._addWord,this._active=!1,this._hold||(i(),this.hide())):(a.text(o.slice(0,r).join(" ")),r++,this._loop=window.setTimeout(n.a.proxy(this._addWord,this),s)))}),this),this._addWord()},r.prototype.close=function(){this._active?this._hold=!1:this._hold&&this._complete()},r.prototype.pause=function(){window.clearTimeout(this._loop),this._hiding&&(window.clearTimeout(this._hiding),this._hiding=null)},r.prototype.resume=function(){this._addWord?this._addWord():this._hold||this._hidden||(this._hiding=window.setTimeout(n.a.proxy(this._finishHideBalloon,this),this.CLOSE_BALLOON_DELAY))};var h=function(t,e,i){this.path=t,this._queue=new s(n.a.proxy(this._onQueueEmpty,this)),this._el=n()('<div class="clippy"></div>').hide(),n()(document.body).append(this._el),this._animator=new a(this._el,t,e,i),this._balloon=new r(this._el),this._setupEvents()};h.prototype.gestureAt=function(t,e){var i=this._getDirection(t,e),o="Gesture"+i,n="Look"+i,s=this.hasAnimation(o)?o:n;return this.play(s)},h.prototype.hide=function(t,e){this._hidden=!0;var i=this._el;return this.stop(),t?(this._el.hide(),this.stop(),this.pause(),void(e&&e())):this._playInternal("Hide",(function(){i.hide(),this.pause(),e&&e()}))},h.prototype.moveTo=function(t,e,i){var o="Move"+this._getDirection(t,e);void 0===i&&(i=1e3),this._addToQueue((function(s){if(0===i)return this._el.css({top:e,left:t}),this.reposition(),void s();if(this.hasAnimation(o)){var r=n.a.proxy((function(o,r){r===a.States.EXITED&&s(),r===a.States.WAITING&&this._el.animate({top:e,left:t},i,n.a.proxy((function(){this._animator.exitAnimation()}),this))}),this);this._playInternal(o,r)}else this._el.animate({top:e,left:t},i,s)}),this)},h.prototype._playInternal=function(t,e){this._isIdleAnimation()&&this._idleDfd&&"pending"===this._idleDfd.state()&&this._idleDfd.done(n.a.proxy((function(){this._playInternal(t,e)}),this)),this._animator.showAnimation(t,e)},h.prototype.play=function(t,e,i){return!!this.hasAnimation(t)&&(void 0===e&&(e=5e3),this._addToQueue((function(o){var s=!1;e&&window.setTimeout(n.a.proxy((function(){s||this._animator.exitAnimation()}),this),e),this._playInternal(t,(function(t,e){e===a.States.EXITED&&(s=!0,i&&i(),o())}))}),this),!0)},h.prototype.show=function(t){if(this._hidden=!1,t)return this._el.show(),this.resume(),void this._onQueueEmpty();if("auto"===this._el.css("top")||"auto"===!this._el.css("left")){var e=.8*n()(window).width(),i=.8*(n()(window).height()+n()(document).scrollTop());this._el.css({top:i,left:e})}return this.resume(),this.play("Show")},h.prototype.speak=function(t,e){this._addToQueue((function(i){this._balloon.speak(i,t,e)}),this)},h.prototype.closeBalloon=function(){this._balloon.hide()},h.prototype.delay=function(t){t=t||250,this._addToQueue((function(e){this._onQueueEmpty(),window.setTimeout(e,t)}))},h.prototype.stopCurrent=function(){this._animator.exitAnimation(),this._balloon.close()},h.prototype.stop=function(){this._queue.clear(),this._animator.exitAnimation(),this._balloon.hide()},h.prototype.hasAnimation=function(t){return this._animator.hasAnimation(t)},h.prototype.animations=function(){return this._animator.animations()},h.prototype.animate=function(){var t=this.animations(),e=t[Math.floor(Math.random()*t.length)];return 0===e.indexOf("Idle")?this.animate():this.play(e)},h.prototype._getDirection=function(t,e){var i=this._el.offset(),o=this._el.height(),n=this._el.width(),s=i.left+n/2,a=i.top+o/2-e,r=s-t,h=Math.round(180*Math.atan2(a,r)/Math.PI);return-45<=h&&h<45?"Right":45<=h&&h<135?"Up":135<=h&&h<=180||-180<=h&&h<-135?"Left":-135<=h&&h<-45?"Down":"Top"},h.prototype._onQueueEmpty=function(){if(!this._hidden&&!this._isIdleAnimation()){var t=this._getIdleAnimation();this._idleDfd=n.a.Deferred(),this._animator.showAnimation(t,n.a.proxy(this._onIdleComplete,this))}},h.prototype._onIdleComplete=function(t,e){e===a.States.EXITED&&this._idleDfd.resolve()},h.prototype._isIdleAnimation=function(){var t=this._animator.currentAnimationName;return t&&0===t.indexOf("Idle")},h.prototype._getIdleAnimation=function(){for(var t=this.animations(),e=[],i=0;i<t.length;i++){var o=t[i];0===o.indexOf("Idle")&&e.push(o)}return e[Math.floor(Math.random()*e.length)]},h.prototype._setupEvents=function(){n()(window).on("resize",n.a.proxy(this.reposition,this)),this._el.on("mousedown",n.a.proxy(this._onMouseDown,this)),this._el.on("dblclick",n.a.proxy(this._onDoubleClick,this))},h.prototype._onDoubleClick=function(){this.play("ClickedOn")||this.animate()},h.prototype.reposition=function(){if(this._el.is(":visible")){var t=this._el.offset(),e=this._el.outerHeight(),i=this._el.outerWidth(),o=n()(window).width(),s=n()(window).height(),a=n()(window).scrollTop(),r=n()(window).scrollLeft(),h=t.top-a,l=t.left-r;h-5<0?h=5:h+e+5>s&&(h=s-e-5),l-5<0?l=5:l+i+5>o&&(l=o-i-5),this._el.css({left:l,top:h}),this._balloon.reposition()}},h.prototype._onMouseDown=function(t){t.preventDefault(),this._startDrag(t)},h.prototype._startDrag=function(t){this.pause(),this._balloon.hide(!0),this._offset=this._calculateClickOffset(t),this._moveHandle=n.a.proxy(this._dragMove,this),this._upHandle=n.a.proxy(this._finishDrag,this),n()(window).on("mousemove",this._moveHandle),n()(window).on("mouseup",this._upHandle),this._dragUpdateLoop=window.setTimeout(n.a.proxy(this._updateLocation,this),10)},h.prototype._calculateClickOffset=function(t){var e=t.pageX,i=t.pageY,o=this._el.offset();return{top:i-o.top,left:e-o.left}},h.prototype._updateLocation=function(){this._el.css({top:this._targetY,left:this._targetX}),this._dragUpdateLoop=window.setTimeout(n.a.proxy(this._updateLocation,this),10)},h.prototype._dragMove=function(t){t.preventDefault();var e=t.clientX-this._offset.left,i=t.clientY-this._offset.top;this._targetX=e,this._targetY=i},h.prototype._finishDrag=function(){window.clearTimeout(this._dragUpdateLoop),n()(window).off("mousemove",this._moveHandle),n()(window).off("mouseup",this._upHandle),this._balloon.show(),this.reposition(),this.resume()},h.prototype._addToQueue=function(t,e){e&&(t=n.a.proxy(t,e)),this._queue.queue(t)},h.prototype.pause=function(){this._animator.pause(),this._balloon.pause()},h.prototype.resume=function(){this._animator.resume(),this._balloon.resume()};var l=function t(e,i,o,s){var a,r,l=(s=s||window.CLIPPY_CDN||"https://gitcdn.xyz/repo/pi0/clippyjs/master/assets/agents/")+e,p=t._loadMap(l),u=t._loadAgent(e,l),c=t._loadSounds(e,l);u.done((function(t){a=t})),c.done((function(t){r=t}));n.a.when(p,u,c).done((function(){var t=new h(l,a,r);i(t)})).fail(o)};l._loadMap=function(t){var e=l._maps[t];if(e)return e;e=l._maps[t]=n.a.Deferred();var i=t+"/map.png",o=new Image;return o.onload=e.resolve,o.onerror=e.reject,o.setAttribute("src",i),e.promise()},l._loadSounds=function(t,e){var i=l._sounds[t];if(i)return i;i=l._sounds[t]=n.a.Deferred();var o=document.createElement("audio"),s=!!o.canPlayType&&""!==o.canPlayType("audio/mpeg"),a=!!o.canPlayType&&""!==o.canPlayType('audio/ogg; codecs="vorbis"');s||a?l._loadScript(e+(s?"/sounds-mp3.js":"/sounds-ogg.js")):i.resolve({});return i.promise()},l._loadAgent=function(t,e){var i=l._data[t];return i||(i=l._getAgentDfd(t),l._loadScript(e+"/agent.js"),i.promise())},l._loadScript=function(t){var e=document.createElement("script");e.setAttribute("src",t),e.setAttribute("async","async"),e.setAttribute("type","text/javascript"),document.head.appendChild(e)},l._getAgentDfd=function(t){var e=l._data[t];return e||(e=l._data[t]=n.a.Deferred()),e},l._maps={},l._sounds={},l._data={};var p={Agent:h,Animator:a,Queue:s,Balloon:r,load:l,ready:function(t,e){l._getAgentDfd(t).resolve(e)},soundsReady:function(t,e){var i=l._sounds[t];i||(i=l._sounds[t]=n.a.Deferred()),i.resolve(e)}};"undefined"!=typeof window&&(window.clippy=p);var u=p;function c(t){return new Promise(e=>setTimeout(e,t))}function d(t){const e=t.offset()||{top:0,left:0},i=t.width()||0,o=t.height()||0;return{top:e.top,left:e.left,width:i,height:o,x:e.left,y:e.top,centerX:e.left+i/2,centerY:e.top+o/2}}function _(t){return t[Math.floor(Math.random()*t.length)]}const f=[];function m(t,e){f.push(Object.assign(Object.assign({},t),{cb:e}))}$(()=>{const t=ASSISTENT||"Clippy",e="nee"===(ASSISTENT_GELUIDEN||"nee"),i=["Hallo, welkom op de stek! Hoe kan ik je vandaag helpen?","Hoe kan ik je stek ervaring vandaag weer verrijken?","Weet je zeker dat je niet eigenlijk moet studeren nu?","Welke stek functie wil je vandaag weer gebruiken?","Wist je dat er ook een C.S.R. Sponsorextensie is?","Heb je de C.S.R. Sponsorextensie al geïnstalleerd?","Weet je eigenlijk al hoe je ketzers kunt maken?","Wist je dat je uit meerdere assistenten kunt kiezen in instellingen?","Heb je de stek in het roze thema wel eens geprobeerd?","Heb je de PubCie al eens bedankt voor al hun werk?"];u.load(t,async t=>{e&&(t._animator._sounds=[]);const o={height:document.documentElement.clientHeight,width:document.documentElement.clientWidth};let n="";t.moveTo(o.width-250,o.height-250),t.show(),sessionStorage.getItem("clippy-first")?n=_(i):(n="Hallo, welkom op de stek! Hoe kan ik je vandaag helpen?",sessionStorage.setItem("clippy-first","true")),t.speak(n),t.play("Wave",5e3,()=>{t.closeBalloon();let e=!1;f.forEach(i=>{!i.cb||i.noOther&&e||i.messageCondition&&!i.messageCondition(n)||(i.location&&window.location.pathname.startsWith(i.location)&&(i.cb(t),"/"!==i.location&&(e=!0)),i.probability&&i.probability>Math.random()&&(i.cb(t),e=!0))}),setInterval(()=>t.animate(),14e3)})})}),m({location:"/profiel"},async t=>{const e=$(".naam .pasfoto img");async function i(){const i=d(e);await c(2e3),t.stop(),t.moveTo(i.left-200,i.centerY,750),await c(1e3),t.play("GestureLeft",5e3,()=>{t.moveTo(i.left+i.width/2,i.top+i.height+100,500),c(1e3).then(()=>t.play("GestureUp"))})}e[0].complete?i().then():e.on("load",i)}),m({location:"/"},t=>{$("#search input.ZoekField").on("focusin",e=>{const i=e.target.getBoundingClientRect();t.stopCurrent(),t.moveTo(i.left,i.bottom),t.play("Searching")}),$(".bb-maaltijd").one("mouseenter",e=>{const i=e.target.getBoundingClientRect();t.stopCurrent(),t.moveTo(i.right+50,Math.max(50,i.top-100)),t.speak("Eet smakelijk!")})}),m({location:"/ledenlijst"},async t=>{t.moveTo(100,100),t.speak("Het lijkt erop dat je iemand wilt vinden.\nHeb je het zoekveld al geprobeerd?"),t.play("Searching")}),m({location:"/instellingen"},async t=>{const e=document.evaluate("//div[contains(@class,'block')]//a[text()='Wolken']",document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null).snapshotItem(1),i=$(e);if(function(t){const e=d(t),i=$(window).scrollTop()||0,o=i+($(window).height()||0);return e.top+e.height>i&&e.top<o}(i)){const e=d(i);t.moveTo(e.left,e.top),t.speak("Kijk, hier kun je een mooi effect kiezen")}}),m({location:"/forum"},async t=>{let e=!1;const i=["Writing","CheckingSomething"],o=t.animations().filter(t=>i.indexOf(t)>-1);let n="";$("textarea#forumBericht").on("keyup",i=>{switch(i.key.toLowerCase()){case"r":if("ketze"===n){n="";const i=d($('.butn a[href="/groepen/activiteiten/nieuw"]'));return e=!0,t.stop(),t.play("GetAttention"),void function(t,e,i,o){const n=t._getDirection(e,i),s="Gesture"+n,a="Look"+n;t.play(t.hasAnimation(s)?s:a,1e4,o)}(t,i.centerX,i.centerY,()=>{e=!1})}break;case" ":n="";break;case"backspace":n=n.slice(0,-1);break;default:1===i.key.length&&(n+=i.key.toLowerCase())}const s=i.target.getBoundingClientRect();e||(e=!0,t.moveTo(s.right-150,s.bottom-130,500),t.play(_(o),5e3,()=>e=!1))})}),m({probability:.3,noOther:!0,messageCondition:t=>-1===t.indexOf("Sponsorextensie")},async t=>{const e=sessionStorage.getItem("clippy-extensie"),i=e?parseInt(e,10):0;if(i<3&&sessionStorage.getItem("clippy-first")){const e=$('a[title="Sponsorkliks extensie (Chrome)"]'),o=d(e);e&&(e[0].scrollIntoView({behavior:"smooth",block:"center"}),await c(500),t.stopCurrent(),t.moveTo(200,o.top-20),await c(1500),t.speak("Heb je de sponsorkliks extensie al geïnstalleerd?"),t.play("GestureRight",5e3,()=>{t.closeBalloon(),sessionStorage.setItem("clippy-extensie",(i+1).toString())}))}})}});
//# sourceMappingURL=fxclippy.40eb4d59a94b859a020a.bundle.js.map