{"version":3,"sources":["webpack:///./js/fotoalbum/FotoAlbumTags.ts"],"names":["FotoAlbumTags","fotoalbum","_this","this","tagMode","on","duringTagMode","loadTags","window","addEventListener","event","key","each","i","val","removeTag","preventDefault","tagFormDiv","exitTagForm","moveTagDivs","moveTagForm","btnDelTag","createCMBtn","append","appendTo","btnTag","removeClass","addClass","hideTags","imgs","container","find","css","off","show","insertBefore","showTags","prototype","getScreenPos","position","img","parent","w","width","h","height","fotoTopLeft","size","x","y","drawTag","tag","screenPosition","tagDiv","keyword","name","left","top","data","contextMenu","menuSelected","menuSelector","drawTags","tags","remove","Array","isArray","attr","url","getUrl","FormData","a","post","then","response","confirm","refuuid","el","pos","drawTagForm","html","setTimeout","trigger","addTag","Math","round","toString","newTagStart","e","target","offset","newTag","pageX","pageY","e1","imgActive","prevX","prevY","e2","alert","hide"],"mappings":"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","file":"js/37.21453e20dc064de8915f.js","sourcesContent":["import axios from 'axios';\nimport $ from 'jquery';\nimport { basename, dirname } from '../util';\nvar FotoAlbumTags = (function () {\n    function FotoAlbumTags(fotoalbum) {\n        var _this = this;\n        this.tagMode = false;\n        this.fotoalbum = fotoalbum;\n        fotoalbum.on('afterLoadPhoto', function () {\n            if (_this.tagMode) {\n                _this.duringTagMode();\n            }\n            _this.loadTags();\n        });\n        window.addEventListener('keydown', function (event) {\n            if (event.key === 'Delete') {\n                $('div.fototag.active').each(function (i, val) {\n                    _this.removeTag($(val));\n                });\n            }\n            else if (event.key === 'Escape') {\n                event.preventDefault();\n                if (_this.tagMode) {\n                    if (_this.tagFormDiv) {\n                        _this.exitTagForm();\n                    }\n                    else {\n                        _this.moveTagDivs();\n                    }\n                }\n            }\n        });\n        window.addEventListener('resize', function () {\n            _this.moveTagDivs();\n            if (_this.tagMode) {\n                _this.duringTagMode();\n                if (_this.tagFormDiv) {\n                    _this.moveTagForm();\n                }\n            }\n            else {\n                if (_this.tagFormDiv) {\n                    _this.exitTagForm();\n                }\n            }\n        });\n        var btnDelTag = this.fotoalbum.createCMBtn('btnDelTag', 'Etiket verwijderen', 'user-times');\n        $('<li></li>').append(btnDelTag).appendTo('#tagMenu');\n        var btnTag = $('<span class=\"fa fa-smile jgallery-btn jgallery-btn-small\" tooltip=\"Leden etiketteren\"></span>');\n        btnTag.on('click', function () {\n            if (_this.tagMode) {\n                _this.tagMode = false;\n                btnTag.removeClass('fa-toggle-on').addClass('fa-toggle-off');\n                FotoAlbumTags.hideTags();\n                if (_this.tagFormDiv) {\n                    _this.exitTagForm();\n                }\n                var imgs = _this.fotoalbum.container.find('img');\n                imgs.css('cursor', '');\n                imgs.off('click.newtag');\n                _this.fotoalbum.container.find('div.right').show();\n                _this.fotoalbum.container.find('div.left').show();\n            }\n            else {\n                _this.tagMode = true;\n                btnTag.addClass('fa-toggle-on').removeClass('fa-toggle-off');\n                _this.duringTagMode();\n            }\n        });\n        btnTag.on('mouseenter', function () {\n            if (_this.tagMode) {\n                btnTag.addClass('fa-toggle-on').removeClass('fa-toggle-off');\n            }\n            else {\n                btnTag.removeClass('fa-toggle-on').addClass('fa-toggle-off');\n            }\n        });\n        btnTag.on('mouseout', function () { return btnTag.removeClass('fa-toggle-on').removeClass('fa-toggle-off').addClass('fa-smile-o'); });\n        btnTag.insertBefore(this.fotoalbum.container.find('div.icons .change-album'));\n        this.fotoalbum.container.find('.minimalize-thumbnails.jgallery-btn').on('click', function () { return _this.moveTagDivs(); });\n    }\n    FotoAlbumTags.showTags = function () {\n        $('div.fototag').addClass('showborder');\n    };\n    FotoAlbumTags.hideTags = function () {\n        $('div.fototag').removeClass('showborder');\n    };\n    FotoAlbumTags.prototype.getScreenPos = function (position) {\n        var img = this.fotoalbum.container.find('img.active');\n        var parent = img.parent();\n        var w = img.width();\n        var h = img.height();\n        var fotoTopLeft = {\n            x: (parent.width() - w) / 2,\n            y: (parent.height() - h) / 2,\n        };\n        return {\n            size: (w + h) / 200 * position.size,\n            x: position.x * w / 100 + fotoTopLeft.x,\n            y: position.y * h / 100 + fotoTopLeft.y,\n        };\n    };\n    FotoAlbumTags.prototype.drawTag = function (tag) {\n        var _this = this;\n        var screenPosition = this.getScreenPos(tag);\n        var tagDiv = $(\"<div id=\\\"tag\" + tag.keyword + \"\\\" class=\\\"fototag\\\" title=\\\"\" + tag.name + \"\\\"></div>\")\n            .appendTo(this.fotoalbum.container);\n        tagDiv.css({\n            height: screenPosition.size,\n            left: screenPosition.x - screenPosition.size / 2,\n            top: screenPosition.y - screenPosition.size / 2,\n            width: screenPosition.size,\n        });\n        if (this.tagMode) {\n            tagDiv.addClass('showborder');\n        }\n        tagDiv.data('tag', tag);\n        tagDiv.on('click.tag', function () {\n            $('div.fototag.active').removeClass('active');\n            $(this).addClass('active');\n        });\n        tagDiv.contextMenu({\n            menuSelected: function () {\n                _this.removeTag(tagDiv);\n            },\n            menuSelector: '#tagMenu',\n        });\n        return tagDiv;\n    };\n    FotoAlbumTags.prototype.drawTags = function (tags) {\n        var _this = this;\n        $('div.fototag').remove();\n        if (!Array.isArray(tags)) {\n            return;\n        }\n        $.each(tags, function (i, tag) {\n            _this.drawTag(tag);\n        });\n        var zoom = this.fotoalbum.container.find('div.zoom-container');\n        if (zoom.attr('data-size') !== 'fit') {\n            $('div.fototag').addClass('verborgen');\n        }\n        else {\n            $('div.fototag').removeClass('verborgen');\n        }\n    };\n    FotoAlbumTags.prototype.loadTags = function () {\n        var _this = this;\n        $('div.fototag').remove();\n        var url = this.fotoalbum.getUrl();\n        var data = new FormData();\n        data.append('foto', basename(url));\n        axios\n            .post('/fotoalbum/gettags' + dirname(url), data).then(function (response) { return _this.drawTags(response.data); });\n    };\n    FotoAlbumTags.prototype.removeTag = function (tagDiv) {\n        var _this = this;\n        if (confirm('Etiket verwijderen?')) {\n            var tag = tagDiv.data('tag');\n            var data = new FormData();\n            data.append('refuuid', tag.refuuid);\n            data.append('keyword', tag.keyword);\n            axios\n                .post('/fotoalbum/removetag', data)\n                .then(function (response) { return _this.drawTags(response.data); });\n        }\n    };\n    FotoAlbumTags.prototype.moveTagDivs = function () {\n        var _this = this;\n        $('div.fototag').each(function (i, el) {\n            var tag = $(el).data('tag');\n            var pos = _this.getScreenPos(tag);\n            $(_this).css({\n                height: pos.size,\n                left: pos.x - pos.size / 2,\n                top: pos.y - pos.size / 2,\n                width: pos.size,\n            });\n        });\n    };\n    FotoAlbumTags.prototype.drawTagForm = function (html, position) {\n        var _this = this;\n        var pos = this.getScreenPos(position);\n        this.tagFormDiv = $(html).appendTo(this.fotoalbum.container);\n        this.tagFormDiv.css({\n            'left': pos.x - pos.size / 2,\n            'position': 'absolute',\n            'top': pos.y + pos.size,\n            'z-index': 10000,\n        });\n        this.tagFormDiv.data('tagPosition', position);\n        this.tagFormDiv.find('form').data('submitCallback', function (response) {\n            if (_this.tagFormDiv) {\n                _this.exitTagForm();\n            }\n            if (typeof response === 'object') {\n                _this.drawTags(response);\n            }\n            else {\n                _this.drawTagForm(response, position);\n            }\n        });\n        setTimeout(function () { return _this.tagFormDiv && _this.tagFormDiv.find('input[name=\"uid\"]').trigger('focus'); });\n    };\n    FotoAlbumTags.prototype.moveTagForm = function () {\n        if (!this.tagFormDiv) {\n            return;\n        }\n        var pos = this.getScreenPos(this.tagFormDiv.data('tagPosition'));\n        this.tagFormDiv.css({\n            left: pos.x - (pos.size / 2),\n            top: pos.y + pos.size,\n        });\n    };\n    FotoAlbumTags.prototype.exitTagForm = function () {\n        $('div[id=\"tagNew\"]').remove();\n        if (this.tagFormDiv) {\n            this.tagFormDiv.remove();\n        }\n        this.tagFormDiv = null;\n    };\n    FotoAlbumTags.prototype.addTag = function (position) {\n        var _this = this;\n        var url = this.fotoalbum.getUrl();\n        var data = new FormData();\n        data.append('foto', basename(url));\n        data.append('x', Math.round(position.x).toString());\n        data.append('y', Math.round(position.y).toString());\n        data.append('size', Math.round(position.size).toString());\n        axios.post('/fotoalbum/addtag' + dirname(url), data)\n            .then(function (response) {\n            if (typeof response.data === 'object') {\n                _this.drawTags(response.data);\n            }\n            else {\n                _this.drawTagForm(response.data, position);\n            }\n        });\n    };\n    FotoAlbumTags.prototype.newTagStart = function (e) {\n        var _this = this;\n        var img = this.fotoalbum.container.find('img.active');\n        var target = e.target;\n        var offset = $(target).offset();\n        var width = img.width();\n        var height = img.height();\n        var newTag = {\n            keyword: 'New',\n            name: '',\n            size: 7,\n            x: (e.pageX - offset.left) * 100 / width,\n            y: (e.pageY - offset.top) * 100 / height,\n        };\n        if (this.tagFormDiv) {\n            this.exitTagForm();\n        }\n        this.addTag(newTag);\n        var tagDiv = this.drawTag(newTag);\n        tagDiv.off('click.tag');\n        tagDiv.css('cursor', 'nw-resize');\n        $(window).off('mouseup.newtag');\n        $(window).on('mouseup.newtag', function () { return $(window).off('mousemove.newtag'); });\n        tagDiv.on('mousedown.newtag', function (e1) {\n            var imgActive = _this.fotoalbum.container.find('img.active');\n            var prevX = e1.pageX;\n            var prevY = e1.pageY;\n            $(window).on('mousemove.newtag', function (e2) {\n                newTag.size += (e2.pageX - prevX) * 100 / imgActive.width();\n                newTag.size += (e2.pageY - prevY) * 100 / imgActive.height();\n                prevX = e2.pageX;\n                prevY = e2.pageY;\n                if (newTag.size < 1) {\n                    newTag.size = 1;\n                }\n                else if (newTag.size > 99) {\n                    newTag.size = 99;\n                }\n                if (_this.tagFormDiv) {\n                    _this.tagFormDiv.find('input[name=\"size\"]').val(Math.round(newTag.size));\n                }\n                var pos = _this.getScreenPos(newTag);\n                tagDiv.css({\n                    height: pos.size,\n                    left: pos.x - pos.size / 2,\n                    top: pos.y - pos.size / 2,\n                    width: pos.size,\n                });\n                tagDiv.attr('data-size', newTag.size);\n            });\n        });\n    };\n    FotoAlbumTags.prototype.duringTagMode = function () {\n        var _this = this;\n        var zoom = this.fotoalbum.container.find('div.zoom-container');\n        if (zoom.attr('data-size') !== 'fit') {\n            alert('Je kunt niet inzoomen tijdens het etiketteren, dat werkt nog niet.');\n        }\n        if (this.tagFormDiv) {\n            this.exitTagForm();\n        }\n        FotoAlbumTags.showTags();\n        this.fotoalbum.container.find('div.right').hide();\n        this.fotoalbum.container.find('div.left').hide();\n        var img = this.fotoalbum.container.find('img.active');\n        img.css('cursor', 'crosshair');\n        img.off('click.newtag');\n        img.on('click', function (e) { return _this.newTagStart(e); });\n    };\n    return FotoAlbumTags;\n}());\nexport { FotoAlbumTags };\n"],"sourceRoot":""}