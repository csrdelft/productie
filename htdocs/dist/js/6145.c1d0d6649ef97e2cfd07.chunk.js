(self.webpackChunk=self.webpackChunk||[]).push([[6145,1714],{9850:(e,t,n)=>{"use strict";n.r(t),n.d(t,{isDataTableResponse:()=>l,initDataTable:()=>c,initOfflineDataTable:()=>d,fnUpdateDataTable:()=>u,fnGetSelection:()=>f,getApiFromSettings:()=>p,fnGetLastUpdate:()=>m,fnSetLastUpdate:()=>_,fnAjaxUpdateCallback:()=>g,replacePlaceholders:()=>h});var a=n(5404),o=n.n(a),r=n(4794),s=n(3548),i=n(527);function l(e){return"object"==typeof e&&"lastUpdate"in e&&"autoUpdate"in e&&"data"in e}async function c(e){await Promise.all([n.e(4730),n.e(8915),n.e(7820),n.e(9280)]).then(n.bind(n,3359));const t=o()(e),a=t.data("settings"),s=t.data("search");a.ajax&&(a.ajax.data.lastUpdate=m(t),a.ajax.dataSrc=g(t)),a.columns.forEach((e=>e.render=i.Z[e.render]));const l=t.DataTable(a);t.dataTable().api().search(s),l.on("page",(()=>l.rows({selected:!0}).deselect())),l.on("childRow.dt",((e,t)=>(0,r.S)(t.container.get(0))))}async function d(e){await Promise.all([n.e(4730),n.e(8915),n.e(7820),n.e(9280)]).then(n.bind(n,3359)),o()(e).DataTable((0,s.IR)(e))}function u(e,t){const n=o()(e).DataTable();t.data.forEach((e=>{const t=o()('tr[data-uuid="'+e.UUID+'"]');1===t.length?"remove"in e?n.row(t).remove():(n.row(t).data(e),(0,r.S)(t.get(0))):0===t.length?n.row.add(e):alert(t.length)})),n.draw(!1)}function f(e){const t=[];return o()(e+" tbody tr.selected").each((function(){const e=o()(this).attr("data-uuid");if(!e)throw new Error("Tablerow heeft geen uuid");t.push(e)})),t}function p(e){return new(o().fn.dataTable.Api)(e)}const m=e=>()=>Number(e.data("lastupdate")),_=e=>t=>e.data("lastupdate",t),g=e=>t=>{_(e)(t.lastUpdate);const n=e.DataTable();if(t.autoUpdate){const a=parseInt(t.autoUpdate,10);!isNaN(a)&&a<6e5&&setTimeout((()=>{o().post(n.ajax.url(),{lastUpdate:m(e)},(t=>{const n=e.attr("id");if(!n)throw new Error("Table heeft geen id");u(n,t),g(e)(t)}))}),a)}return function(e){const t=e.parent();if(t.hasClass("dataTables_scrollBody")){const e=t.scrollTop(),n=t.innerHeight();if(!e||!n)throw new Error("$scroll heeft geen top of height");e+n>=t[0].scrollHeight-20&&window.setTimeout((()=>{t.animate({scrollTop:t[0].scrollHeight},800)}),200)}}(e),t.data};function h(e,t){const n=/:(\w+)/g.exec(e);if(!n)return e;for(let a=1;a<n.length;a++)e=e.replace(":"+n[a],t[n[a]]);return e}},527:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var a=n(9201),o=n.n(a),r=n(3548),s=n(9850);const i={default(e,t){if(null===e||"object"!=typeof e)return e;switch(t){case"sort":return e.sort;case"export":return e.export;default:return e.display}},bedrag:e=>(0,r.Mc)(e),check:e=>'<span class="ico '+(e?"tick":"cross")+'"></span>',aanmeldFilter:e=>e?`<span class="ico group_key" title="Aanmeld filter actief: '${e}'"></span>`:"",aanmeldingen:(e,t,n)=>n.aantal_aanmeldingen+" ("+n.aanmeld_limiet+")",totaalPrijs:(e,t,n)=>(0,r.Mc)(n.aantal_aanmeldingen*parseInt(n.prijs,10)),datetime:e=>Number(e)==e?o().unix(e).format("YYYY-MM-DD HH:mm"):e?"<time"===e.substr(0,5)?e:"-"===e.substr(0,1)?"Nooit":o()(e).format("YYYY-MM-DD HH:mm"):"",timeago(e,t,n,a){const o=(0,s.getApiFromSettings)(a.settings).cell(a.row,a.col).node().firstChild;switch(t){case"sort":case"export":return o.dateTime;default:return e}},filesize(e,t){switch(t){case"sort":return Number(e);default:return(0,r.D9)(e)}}}},3367:(e,t,n)=>{"use strict";n.d(t,{R:()=>r});var a=n(8175),o=n.n(a);const r={el:null};let s,i,l;function c(){return document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft}function d(){return document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop}function u(e){return e.pageX?e.pageX:e.clientX?e.clientX+c():0}function f(e){return e.pageY?e.pageY:e.clientY?e.clientY+d():0}function p(e){if(!r.el)return;const t=r.el,n=u(e),a=f(e);s=t.classList.contains("savepos");const o=t.scrollTop,p=t.scrollLeft;if(t.classList.contains("dragvertical"))t.scrollTop=o+l-a;else if(t.classList.contains("draghorizontal"))t.scrollLeft=p+i-n;else{const e={left:t.offsetLeft,top:t.offsetTop};t.style.left=e.left-c()+n-i+"px",t.style.top=e.top-d()+a-l+"px"}i=n,l=a}window.addEventListener("mousedown",(function(e){const t=e.target;if(t instanceof HTMLElement){const n=t.tagName.toUpperCase(),a=getComputedStyle(t).overflow;if("DIV"!==n&&"H1"!==n||"auto"===a||"scroll"===a)return;r.el=t,void 0!==r.el&&r.el.classList.contains("dragobject")||(r.el=t.closest(".dragobject")),void 0!==r.el?(i=u(e),l=f(e),window.addEventListener("mousemove",p,!0)):r.el=null}s=!1}),!1),window.addEventListener("mouseup",(function(){if(r.el){if(window.removeEventListener("mousemove",p,!0),s){const e=r.el;let t,n;if(e.classList.contains("dragvertical")||e.classList.contains("draghorizontal"))t=e.scrollTop,n=e.scrollLeft;else{const a={top:e.offsetTop,left:e.offsetLeft};t=a.top-d(),n=a.left-c()}o().post("/tools/dragobject",{coords:{left:n,top:t},id:e.id}),s=!1}r.el=null}}),!1)},2863:(e,t,n)=>{"use strict";n.d(t,{V:()=>c,T:()=>d});var a=n(5404),o=n.n(a),r=n(6683),s=n(8175),i=n.n(s),l=n(7542);function c(e,t,n,a,s,c,d){if(a)if(a.classList.contains("noanim"))if(a.classList.contains("InlineForm"))try{Object.assign((0,l.Ys)(".FormElement:first",a).style,{backgroundImage:'url("/images/loading-fb.gif")',backgroundPosition:"center right",backgroundRepeat:"no-repeat"})}catch(e){}else a.classList.add("loading");else{const e=o()(`<img alt="Laden" id="${a.id}" title="${t}" src="/images/loading-arrows.gif" />`);o()(a).replaceWith(e),a=e.get(0)}i()(t,{method:e,data:n}).then((e=>{a&&(o()(a).hasClass("noanim")?o()(a).hasClass("InlineForm")&&o()(a).find(".FormElement:first").css({"background-image":"","background-position":"","background-repeat":""}):o()(a).hide(),a.classList.remove("loading")),s(e.data)})).catch((e=>{a?o()(a).replaceWith('<img alt="Mislukt" title="'+e.message+'" src="/plaetjes/famfamfam/cancel.png" />'):(0,r.I)(),c&&(e.message.startsWith("<!DOC")&&c("Er ging iets fout, code is: "+e.code),c(e.message))})).then((()=>{d&&d()}))}function d(e,t){return o()(t+" .aanmeldbtn").addClass("loading"),o().ajax({cache:!1,data:"",type:"GET",url:e}).done((e=>{o()(t).replaceWith(e)})).fail(((e,n,a)=>{throw o()(t+" .aanmeldbtn").replaceWith(o()(`<div class="alert alert-danger"><strong>Actie mislukt!</strong> ${a}</div>`)),new Error(e.responseText)})),!0}},6861:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{q:()=>domUpdate});var jquery__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5404),jquery__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__),_ctx__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4794),_modal__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(6683),_util__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3548),_dom__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(7542);function domUpdate(htmlString){if("string"!=typeof htmlString)return;if(htmlString=htmlString.trim(),"<!DOCTYPE"===htmlString.substring(0,9))throw alert("response error"),new Error(htmlString);const elements=(0,_util__WEBPACK_IMPORTED_MODULE_3__.QA)(htmlString);for(const element of elements){if(!(element instanceof HTMLElement))continue;const id=element.id,parentId=element.getAttribute("parentid");if(!id&&element instanceof HTMLScriptElement)return eval(element.innerText),void(0,_modal__WEBPACK_IMPORTED_MODULE_2__.I)();const target=id?document.querySelector(`#${id}`):null,targetParent=parentId?document.querySelector(`#${parentId}`):null;target?element.classList.contains("remove")?(0,_util__WEBPACK_IMPORTED_MODULE_3__.c7)(target,400):jquery__WEBPACK_IMPORTED_MODULE_0___default()(target).replaceWith(jquery__WEBPACK_IMPORTED_MODULE_0___default()(element)):targetParent?targetParent.append(element):element instanceof HTMLScriptElement?document.head.append(element):(0,_dom__WEBPACK_IMPORTED_MODULE_4__.Ys)("#maalcie-tabel tbody:visible:first").append(element),(0,_ctx__WEBPACK_IMPORTED_MODULE_1__.S)(element),"modal"===id?(0,_modal__WEBPACK_IMPORTED_MODULE_2__.O)():(0,_modal__WEBPACK_IMPORTED_MODULE_2__.I)()}}},9046:(e,t,n)=>{"use strict";n.r(t),n.d(t,{knopPost:()=>m,initKnopPost:()=>_,initKnopGet:()=>g,initKnopVergroot:()=>h,knopVergroot:()=>E,initRadioButtons:()=>b});var a=n(5404),o=n.n(a),r=n(9850),s=n(2863),i=n(6861),l=n(8540),c=n(6683),d=n(445),u=n(7542),f=n(3548);function p(e,t){if(!(e instanceof HTMLElement))throw new Error("Knop is geen HTMLElement");if(e.classList.contains("confirm")&&!confirm(e.title+".\n\nWeet u het zeker?"))return(0,c.I)(),!1;let n=e,a=i.q,o=e.getAttribute("data");if(e.classList.contains("popup")&&(n=null),e.classList.contains("prompt")){if(!o)throw new Error("Prompt knop heeft geen data");const[e,t]=o.split("="),n=prompt(e,t);if(!n)return!1;o=encodeURIComponent(e)+"="+encodeURIComponent(n)}if(e.classList.contains("addfav")&&(o={tekst:document.title.replace("C.S.R. Delft - ",""),link:window.location.href}),e.classList.contains("DataTableRowKnop")){const t=(0,u.wV)(e,"table").id;o={DataTableId:t,DataTableSelection:(0,u.wV)(e,"tr").dataset.uuid},a=e=>{(0,r.isDataTableResponse)(e)?((0,r.fnUpdateDataTable)("#"+t,e),e&&e.modal?(0,i.q)(e.modal):(0,c.I)()):"string"==typeof e&&(0,i.q)(e)}}if(e.classList.contains("DataTableResponse")){let t=e.dataset.tableid;if(!t||!document.getElementById(t)){const n=e.closest("form");if(!n)throw new Error("Geen form gevonden");if(t=n.dataset.tableid,!t||!document.getElementById(t))throw new Error("DataTable not found")}o={DataTableId:t,DataTableSelection:(0,r.fnGetSelection)("#"+t)},a=e=>{if((0,r.isDataTableResponse)(e))(0,r.fnUpdateDataTable)("#"+t,e),e.modal?(0,i.q)(e.modal):(0,c.I)();else{if("string"!=typeof e)throw new Error("Niets met deze response: "+e);(0,i.q)(e)}},e.classList.contains("SingleRow")||(n=null)}e.classList.contains("ReloadPage")?a=d.H:e.classList.contains("redirect")&&(a=d.u);const l=e.getAttribute("href");if(!l)throw new Error("Knop heeft geen href");(0,s.V)(t,l,o,n,a,f._y)}function m(e,t){t.preventDefault();const n=t.target;return o()(n).hasClass("range")?("INPUT"===n.tagName.toUpperCase()?(0,l.U3)(t):(0,l.ZA)(t),!1):(p(e,"POST"),!1)}const _=e=>{e.classList.add("loaded"),e.addEventListener("click",(t=>m(e,t)))},g=e=>{e.classList.add("loaded"),e.addEventListener("click",(t=>(t.preventDefault(),p(e,"GET"),!1)))},h=e=>e.addEventListener("click",(t=>E(t,e)));function E(e,t){const n=t;if(!(n instanceof HTMLElement))throw new Error("Knop vergroot klik heeft geen target");const{vergroot:a,vergrootOud:r}=n.dataset;if(!a)throw new Error("Knop vergroot heeft geen data-vergroot");const s=n.querySelector("span.fa");if(!s)throw new Error("knopVergroot heeft geen icon");r?(o()(a).animate({height:r},600),delete n.dataset.vergrootOud,s.classList.replace("fa-compress","fa-expand"),n.title="Uitklappen"):(n.title="Inklappen",s.classList.replace("fa-expand","fa-compress"),n.dataset.vergrootOud=String(o()(a).height()),o()(a).animate({height:o()(a).prop("scrollHeight")+1},600))}const b=e=>{for(const t of(0,u.td)("a.btn",e))t.addEventListener("click",(()=>{for(const t of(0,u.td)(".active",e))t.classList.remove("active");t.classList.add("active")}))}},8540:(e,t,n)=>{"use strict";n.d(t,{ZA:()=>d,l6:()=>u,zj:()=>f,rm:()=>_,pD:()=>g,F0:()=>h,fL:()=>E,U3:()=>w});var a=n(5404),o=n.n(a),r=n(3367),s=n(2863),i=n(6861),l=n(7542),c=n(3548);function d(e){let t=e.target;if("IMG"===t.tagName.toUpperCase()&&(t=(0,l.wV)(t)),o()(t).find("input").prop("checked",!0),o()(t).hasClass("confirm")&&!confirm(o()(t).attr("title")+".\n\nWeet u het zeker?"))return!1;o()('input[name="'+o()(t).find("input:first").attr("name")+'"]:visible').each((function(){if(o()(this).prop("checked")){const e=o()(t).parent().attr("href"),n=o()(t).parent().attr("post");if(!e||!n)throw new Error("Element heeft geen href of post");(0,s.V)("POST",e,n,t.parentElement,i.q,c._y)}}))}function u(){const e=o()("#suggesties-tabel");e.find("tr:visible:odd").css("background-color","#FAFAFA"),e.find("tr:visible:even").css("background-color","#EBEBEB")}function f(e,t){o()("#suggesties-tabel ."+e).each((function(){let n=0;void 0!==t?t?o()(this).removeClass(e+"verborgen"):o()(this).addClass(e+"verborgen"):o()(this).toggleClass(e+"verborgen"),o()(this).hasClass("geenvoorkeurverborgen")&&n++,o()(this).hasClass("recentverborgen")&&n++,o()(this).hasClass("jongsteverborgen")&&n++,o()(this).hasClass("oudereverborgen")&&n++,n>0?o()(this).hide():o()(this).show()})),u()}function p(e,t){"taak-datum-head-"+e===o()("#maalcie-tabel tr:visible").eq(t).attr("id")&&o()("#taak-datum-head-first").toggleClass("verborgen")}function m(){o()("tr.taak-datum-summary:visible:odd th").css("background-color","#FAFAFA"),o()("tr.taak-datum-summary:visible:even th").css("background-color","#f5f5f5")}function _(e){p(e,0),o()(".taak-datum-"+e).toggleClass("verborgen"),p(e,1),m()}function g(){o()("#taak-datum-head-first").removeClass("verborgen"),o()("tr.taak-datum-oud").removeClass("verborgen"),m()}function h(e){let t=e.target;"IMG"===t.tagName.toUpperCase()&&(t=(0,l.wV)(t)),r.R.el&&r.R.el.id!==t.id&&e.preventDefault()}function E(e){e.preventDefault();let t=e.target;"IMG"===t.tagName.toUpperCase()&&(t=(0,l.wV)(t));const n=r.R.el;if(!n||!confirm("Toegekende corveepunten worden meegeruild!\n\nDoorgaan met ruilen?"))return;let a=n.getAttribute("uid");a||(a="");const o=t.getAttribute("href");if(!o)throw new Error("Element heeft geen href");(0,s.V)("POST",o,"uid="+a,t,i.q,c._y),a=t.getAttribute("uid"),a||(a=""),(0,s.V)("POST",o,"uid="+a,n,i.q,c._y)}let b;function w(e){const t=e.target;if(!t)throw new Error("Er is geen target");let n=!1;o()("#maalcie-tabel").find('tbody tr td a input[name="'+o()(t).attr("name")+'"]:visible').each((function(){const t=o()(this).attr("id");if(t===b&&(n=!n),t===e.target.id){n=!n;const e=o()(this).prop("checked");setTimeout((()=>{o()("#"+t).prop("checked",e)}),50)}else e.shiftKey&&n&&o()(this).prop("checked",!0)})),b=e.target.id}},6683:(e,t,n)=>{"use strict";n.d(t,{O:()=>s,I:()=>i});var a=n(5404),o=n.n(a),r=n(8915);function s(e=""){var t,n;const a=document.getElementById("modal"),s=null!==(t=r.Modal.getInstance(a))&&void 0!==t?t:new r.Modal(a),i=o()(".modal-backdrop");return(""!==a.innerHTML||""!==e)&&(i.length&&i.remove(),""!==e&&(a.replaceWith(e),null===(n=Array.from(a.querySelectorAll("input")).find((e=>"none"!=window.getComputedStyle(e).display)))||void 0===n||n.dispatchEvent(new FocusEvent("focus"))),s.show(),document.dispatchEvent(new Event("modalOpen")),!0)}function i(){const e=r.Modal.getInstance(document.getElementById("modal"));e&&e.hide(),document.dispatchEvent(new Event("modalClose"))}},445:(e,t,n)=>{"use strict";n.d(t,{H:()=>o,u:()=>r});var a=n(6861);function o(e){"string"!=typeof e||'<div id="modal" '!==e.substring(0,16)?location.reload():(0,a.q)(e)}function r(e){'<div id="modal" '!==e.substring(0,16)?window.location.href=e:(0,a.q)(e)}},4734:(e,t,n)=>{var a={"./nl":4273,"./nl.js":4273};function o(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=r,e.exports=o,o.id=4734}}]);
//# sourceMappingURL=6145.c1d0d6649ef97e2cfd07.chunk.js.map