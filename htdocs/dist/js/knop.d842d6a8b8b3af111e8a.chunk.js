(window.webpackJsonp=window.webpackJsonp||[]).push([[41,15],{14:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return domUpdate}));var jquery__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),jquery__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__),_ctx__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(13),_modal__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(18),_util__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3),_dom__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(7);function domUpdate(htmlString){if("string"!=typeof htmlString)return;if(htmlString=htmlString.trim(),"<!DOCTYPE"===htmlString.substring(0,9))throw alert("response error"),new Error(htmlString);const elements=Object(_util__WEBPACK_IMPORTED_MODULE_3__.j)(htmlString);for(const element of elements){if(!(element instanceof HTMLElement))continue;const id=element.id,parentId=element.getAttribute("parentid");if(!id&&element instanceof HTMLScriptElement)return eval(element.innerText),void Object(_modal__WEBPACK_IMPORTED_MODULE_2__.a)();const target=id?document.querySelector("#"+id):null,targetParent=parentId?document.querySelector("#"+parentId):null;target?element.classList.contains("remove")?Object(_util__WEBPACK_IMPORTED_MODULE_3__.e)(target,400):jquery__WEBPACK_IMPORTED_MODULE_0___default()(target).replaceWith(jquery__WEBPACK_IMPORTED_MODULE_0___default()(element)):targetParent?targetParent.append(element):element instanceof HTMLScriptElement?document.head.append(element):Object(_dom__WEBPACK_IMPORTED_MODULE_4__.b)("#maalcie-tabel tbody:visible:first").append(element),Object(_ctx__WEBPACK_IMPORTED_MODULE_1__.b)(element),"modal"===id?Object(_modal__WEBPACK_IMPORTED_MODULE_2__.b)():Object(_modal__WEBPACK_IMPORTED_MODULE_2__.a)()}}},170:function(e,t,n){"use strict";n.r(t),n.d(t,"knopPost",(function(){return m})),n.d(t,"initKnopPost",(function(){return _})),n.d(t,"initKnopGet",(function(){return g})),n.d(t,"initKnopVergroot",(function(){return b})),n.d(t,"knopVergroot",(function(){return h})),n.d(t,"initRadioButtons",(function(){return E}));var a=n(0),r=n.n(a),o=n(23),i=n(20),s=n(14),c=n(34),l=n(18),d=n(51),u=n(7),f=n(3);function p(e,t){if(!(e instanceof HTMLElement))throw new Error("Knop is geen HTMLElement");if(e.classList.contains("confirm")&&!confirm(e.title+".\n\nWeet u het zeker?"))return Object(l.a)(),!1;let n=e,a=s.a,r=e.getAttribute("data");if(e.classList.contains("popup")&&(n=null),e.classList.contains("prompt")){if(!r)throw new Error("Prompt knop heeft geen data");const[e,t]=r.split("="),n=prompt(e,t);if(!n)return!1;r=encodeURIComponent(r[0])+"="+encodeURIComponent(n)}if(e.classList.contains("addfav")&&(r={tekst:document.title.replace("C.S.R. Delft - ",""),link:window.location.href}),e.classList.contains("DataTableRowKnop")){const t=Object(u.a)(e,"table").id;r={DataTableId:t,DataTableSelection:Object(u.a)(e,"tr").dataset.uuid},a=e=>{Object(o.isDataTableResponse)(e)?(Object(o.fnUpdateDataTable)("#"+t,e),e&&e.modal?Object(s.a)(e.modal):Object(l.a)()):"string"==typeof e&&Object(s.a)(e)}}if(e.classList.contains("DataTableResponse")){let t=e.dataset.tableid;if(!t||!document.getElementById(t)){const n=e.closest("form");if(!n)throw new Error("Geen form gevonden");if(t=n.dataset.tableid,!t||!document.getElementById(t))throw new Error("DataTable not found")}r={DataTableId:t,DataTableSelection:Object(o.fnGetSelection)("#"+t)},a=e=>{if(Object(o.isDataTableResponse)(e))Object(o.fnUpdateDataTable)("#"+t,e),e.modal?Object(s.a)(e.modal):Object(l.a)();else{if("string"!=typeof e)throw new Error("Niets met deze response: "+e);Object(s.a)(e)}},e.classList.contains("SingleRow")||(n=null)}e.classList.contains("ReloadPage")?a=d.b:e.classList.contains("redirect")&&(a=d.a);const c=e.getAttribute("href");if(!c)throw new Error("Knop heeft geen href");Object(i.a)(t,c,r,n,a,f.q)}function m(e,t){t.preventDefault();const n=t.target;return r()(n).hasClass("range")?("INPUT"===n.tagName.toUpperCase()?Object(c.d)(t):Object(c.f)(t),!1):(p(e,"POST"),!1)}const _=e=>{e.classList.add("loaded"),e.addEventListener("click",t=>m(e,t))},g=e=>{e.classList.add("loaded"),e.addEventListener("click",t=>(t.preventDefault(),p(e,"GET"),!1))},b=e=>e.addEventListener("click",t=>h(t,e));function h(e,t){const n=t;if(!(n instanceof HTMLElement))throw new Error("Knop vergroot klik heeft geen target");const{vergroot:a,vergrootOud:o}=n.dataset;if(!a)throw new Error("Knop vergroot heeft geen data-vergroot");const i=n.querySelector("span.fa");if(!i)throw new Error("knopVergroot heeft geen icon");o?(r()(a).animate({height:o},600),delete n.dataset.vergrootOud,i.classList.replace("fa-compress","fa-expand"),n.title="Uitklappen"):(n.title="Inklappen",i.classList.replace("fa-expand","fa-compress"),n.dataset.vergrootOud=String(r()(a).height()),r()(a).animate({height:r()(a).prop("scrollHeight")+1},600))}const E=e=>{for(const t of Object(u.c)("a.btn",e))t.addEventListener("click",()=>{for(const t of Object(u.c)(".active",e))t.classList.remove("active");t.classList.add("active")})}},18:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var a=n(0),r=n.n(a);function o(e=""){const t=r()("#modal"),n=r()(".modal-backdrop");return(""!==t.html()||""!==e)&&(n.length&&n.remove(),""!==e&&(t.replaceWith(e),t.find("input:visible:first").trigger("focus")),t.modal("show"),r()(document.body).trigger("modalOpen"),!0)}function i(){r()("#modal").modal("hide"),r()(document.body).trigger("modalClose")}},20:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d}));var a=n(0),r=n.n(a),o=n(18),i=n(12),s=n.n(i),c=n(7);function l(e,t,n,a,i,l,d){if(a)if(a.classList.contains("noanim"))if(a.classList.contains("InlineForm"))try{Object.assign(Object(c.b)(".FormElement:first",a).style,{backgroundImage:'url("/images/loading-fb.gif")',backgroundPosition:"center right",backgroundRepeat:"no-repeat"})}catch(e){}else a.classList.add("loading");else r()(a).replaceWith(`<img alt="Laden" id="${a.id}" title="${t}" src="/images/loading-arrows.gif" />`),a=Object(c.b)(`img[title="${t}"]`);s()({method:e,data:n,url:t}).then(e=>{a&&(r()(a).hasClass("noanim")?r()(a).hasClass("InlineForm")&&r()(a).find(".FormElement:first").css({"background-image":"","background-position":"","background-repeat":""}):r()(a).hide(),a.classList.remove("loading")),i(e.data)}).catch(e=>{a?r()(a).replaceWith('<img alt="Mislukt" title="'+e.message+'" src="/plaetjes/famfamfam/cancel.png" />'):Object(o.a)(),l&&(e.message.startsWith("<!DOC")&&l("Er ging iets fout, code is: "+e.code),l(e.message))}).then(()=>{d&&d()})}function d(e,t){return r()(t+" .aanmeldbtn").addClass("loading"),r.a.ajax({cache:!1,data:"",type:"GET",url:e}).done(e=>{r()(t).replaceWith(e)}).fail((e,n,a)=>{throw r()(t+" .aanmeldbtn").replaceWith(r()(`<div class="alert alert-danger"><strong>Actie mislukt!</strong> ${a}</div>`)),new Error(e.responseText)}),!0}},23:function(e,t,n){"use strict";n.r(t),n.d(t,"isDataTableResponse",(function(){return c})),n.d(t,"initDataTable",(function(){return l})),n.d(t,"initOfflineDataTable",(function(){return d})),n.d(t,"fnUpdateDataTable",(function(){return u})),n.d(t,"fnGetSelection",(function(){return f})),n.d(t,"getApiFromSettings",(function(){return p})),n.d(t,"fnGetLastUpdate",(function(){return m})),n.d(t,"fnSetLastUpdate",(function(){return _})),n.d(t,"fnAjaxUpdateCallback",(function(){return g})),n.d(t,"replacePlaceholders",(function(){return b}));var a=n(0),r=n.n(a),o=n(13),i=n(3),s=n(77);function c(e){return"object"==typeof e&&"lastUpdate"in e&&"autoUpdate"in e&&"data"in e}async function l(e){await Promise.all([n.e(4),n.e(11)]).then(n.bind(null,89));const t=r()(e),a=t.data("settings"),i=t.data("search");a.ajax&&(a.ajax.data.lastUpdate=m(t),a.ajax.dataSrc=g(t)),a.columns.forEach(e=>e.render=s.a[e.render]);const c=t.DataTable(a);t.dataTable().api().search(i),c.on("page",()=>c.rows({selected:!0}).deselect()),c.on("childRow.dt",(e,t)=>Object(o.b)(t.container.get(0)))}async function d(e){await Promise.all([n.e(4),n.e(11)]).then(n.bind(null,89)),r()(e).DataTable(Object(i.n)(e))}function u(e,t){const n=r()(e).DataTable();t.data.forEach(e=>{const t=r()('tr[data-uuid="'+e.UUID+'"]');1===t.length?"remove"in e?n.row(t).remove():(n.row(t).data(e),Object(o.b)(t.get(0))):0===t.length?n.row.add(e):alert(t.length)}),n.draw(!1)}function f(e){const t=[];return r()(e+" tbody tr.selected").each((function(){const e=r()(this).attr("data-uuid");if(!e)throw new Error("Tablerow heeft geen uuid");t.push(e)})),t}function p(e){return new r.a.fn.dataTable.Api(e)}const m=e=>()=>Number(e.data("lastupdate")),_=e=>t=>e.data("lastupdate",t),g=e=>t=>{_(e)(t.lastUpdate);const n=e.DataTable();if(t.autoUpdate){const a=parseInt(t.autoUpdate,10);!isNaN(a)&&a<6e5&&setTimeout(()=>{r.a.post(n.ajax.url(),{lastUpdate:m(e)},t=>{const n=e.attr("id");if(!n)throw new Error("Table heeft geen id");u(n,t),g(e)(t)})},a)}return function(e){const t=e.parent();if(t.hasClass("dataTables_scrollBody")){const e=t.scrollTop(),n=t.innerHeight();if(!e||!n)throw new Error("$scroll heeft geen top of height");e+n>=t[0].scrollHeight-20&&window.setTimeout(()=>{t.animate({scrollTop:t[0].scrollHeight},800)},200)}}(e),t.data};function b(e,t){const n=/:(\w+)/g.exec(e);if(!n)return e;for(let a=1;a<n.length;a++)e=e.replace(":"+n[a],t[n[a]]);return e}},34:function(e,t,n){"use strict";n.d(t,"f",(function(){return d})),n.d(t,"a",(function(){return u})),n.d(t,"h",(function(){return f})),n.d(t,"g",(function(){return _})),n.d(t,"e",(function(){return g})),n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return O}));var a=n(0),r=n.n(a),o=n(35),i=n(20),s=n(14),c=n(7),l=n(3);function d(e){let t=e.target;if("IMG"===t.tagName.toUpperCase()&&(t=Object(c.a)(t)),r()(t).find("input").prop("checked",!0),r()(t).hasClass("confirm")&&!confirm(r()(t).attr("title")+".\n\nWeet u het zeker?"))return!1;r()('input[name="'+r()(t).find("input:first").attr("name")+'"]:visible').each((function(){if(r()(this).prop("checked")){const e=r()(t).parent().attr("href"),n=r()(t).parent().attr("post");if(!e||!n)throw new Error("Element heeft geen href of post");Object(i.a)("POST",e,n,t.parentElement,s.a,l.q)}}))}function u(){const e=r()("#suggesties-tabel");e.find("tr:visible:odd").css("background-color","#FAFAFA"),e.find("tr:visible:even").css("background-color","#EBEBEB")}function f(e,t){r()("#suggesties-tabel ."+e).each((function(){let n=0;void 0!==t?t?r()(this).removeClass(e+"verborgen"):r()(this).addClass(e+"verborgen"):r()(this).toggleClass(e+"verborgen"),r()(this).hasClass("geenvoorkeurverborgen")&&n++,r()(this).hasClass("recentverborgen")&&n++,r()(this).hasClass("jongsteverborgen")&&n++,r()(this).hasClass("oudereverborgen")&&n++,n>0?r()(this).hide():r()(this).show()})),u()}function p(e,t){"taak-datum-head-"+e===r()("#maalcie-tabel tr:visible").eq(t).attr("id")&&r()("#taak-datum-head-first").toggleClass("verborgen")}function m(){r()("tr.taak-datum-summary:visible:odd th").css("background-color","#FAFAFA"),r()("tr.taak-datum-summary:visible:even th").css("background-color","#f5f5f5")}function _(e){p(e,0),r()(".taak-datum-"+e).toggleClass("verborgen"),p(e,1),m()}function g(){r()("#taak-datum-head-first").removeClass("verborgen"),r()("tr.taak-datum-oud").removeClass("verborgen"),m()}function b(e){let t=e.target;"IMG"===t.tagName.toUpperCase()&&(t=Object(c.a)(t)),o.a.el&&o.a.el.id!==t.id&&e.preventDefault()}function h(e){e.preventDefault();let t=e.target;"IMG"===t.tagName.toUpperCase()&&(t=Object(c.a)(t));const n=o.a.el;if(!n||!confirm("Toegekende corveepunten worden meegeruild!\n\nDoorgaan met ruilen?"))return;let a=n.getAttribute("uid");a||(a="");const r=t.getAttribute("href");if(!r)throw new Error("Element heeft geen href");Object(i.a)("POST",r,"uid="+a,t,s.a,l.q),a=t.getAttribute("uid"),a||(a=""),Object(i.a)("POST",r,"uid="+a,n,s.a,l.q)}let E;function O(e){const t=e.target;if(!t)throw new Error("Er is geen target");let n=!1;r()("#maalcie-tabel").find('tbody tr td a input[name="'+r()(t).attr("name")+'"]:visible').each((function(){const t=r()(this).attr("id");if(t===E&&(n=!n),t===e.target.id){n=!n;const e=r()(this).prop("checked");setTimeout(()=>{r()("#"+t).prop("checked",e)},50)}else e.shiftKey&&n&&r()(this).prop("checked",!0)})),E=e.target.id}},35:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(12),r=n.n(a);const o={el:null};let i,s,c;function l(){return document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft}function d(){return document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop}function u(e){return e.pageX?e.pageX:e.clientX?e.clientX+l():0}function f(e){return e.pageY?e.pageY:e.clientY?e.clientY+d():0}function p(e){if(!o.el)return;const t=o.el,n=u(e),a=f(e);i=t.classList.contains("savepos");const r=t.scrollTop,p=t.scrollLeft;if(t.classList.contains("dragvertical"))t.scrollTop=r+c-a;else if(t.classList.contains("draghorizontal"))t.scrollLeft=p+s-n;else{const e={left:t.offsetLeft,top:t.offsetTop};t.style.left=e.left-l()+n-s+"px",t.style.top=e.top-d()+a-c+"px"}s=n,c=a}window.addEventListener("mousedown",(function(e){const t=e.target;if(t instanceof HTMLElement){const n=t.tagName.toUpperCase(),a=getComputedStyle(t).overflow;if("DIV"!==n&&"H1"!==n||"auto"===a||"scroll"===a)return;o.el=t,void 0!==o.el&&o.el.classList.contains("dragobject")||(o.el=t.closest(".dragobject")),void 0!==o.el?(s=u(e),c=f(e),window.addEventListener("mousemove",p,!0)):o.el=null}i=!1}),!1),window.addEventListener("mouseup",(function(){if(o.el){if(window.removeEventListener("mousemove",p,!0),i){const e=o.el;let t,n;if(e.classList.contains("dragvertical")||e.classList.contains("draghorizontal"))t=e.scrollTop,n=e.scrollLeft;else{const a={top:e.offsetTop,left:e.offsetLeft};t=a.top-d(),n=a.left-l()}r.a.post("/tools/dragobject",{coords:{left:n,top:t},id:e.id}),i=!1}o.el=null}}),!1)},51:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));var a=n(14);function r(e){"string"!=typeof e||'<div id="modal" '!==e.substring(0,16)?location.reload():Object(a.a)(e)}function o(e){'<div id="modal" '!==e.substring(0,16)?window.location.href=e:Object(a.a)(e)}},77:function(e,t,n){"use strict";var a=n(28),r=n.n(a),o=n(3),i=n(23);t.a={default(e,t){if(null===e||"object"!=typeof e)return e;switch(t){case"sort":return e.sort;case"export":return e.export;default:return e.display}},bedrag:e=>Object(o.f)(e),check:e=>'<span class="ico '+(e?"tick":"cross")+'"></span>',aanmeldFilter:e=>e?`<span class="ico group_key" title="Aanmeld filter actief: '${e}'"></span>`:"",aanmeldingen:(e,t,n)=>n.aantal_aanmeldingen+" ("+n.aanmeld_limiet+")",totaalPrijs:(e,t,n)=>Object(o.f)(n.aantal_aanmeldingen*parseInt(n.prijs,10)),datetime:e=>Number(e)==e?r()(1e3*e).format("YYYY-MM-DD HH:mm"):e?"<time"===e.substr(0,5)?e:r()(e).format("YYYY-MM-DD HH:mm"):"",timeago(e,t,n,a){const r=Object(i.getApiFromSettings)(a.settings).cell(a.row,a.col).node().firstChild;switch(t){case"sort":case"export":return r.dateTime;default:return e}},filesize(e,t){switch(t){case"sort":return Number(e);default:return Object(o.g)(e)}}}},91:function(e,t,n){var a={"./nl":76,"./nl.js":76};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=91}}]);
//# sourceMappingURL=knop.d842d6a8b8b3af111e8a.chunk.js.map