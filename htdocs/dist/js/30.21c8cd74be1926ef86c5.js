(window.webpackJsonp=window.webpackJsonp||[]).push([[30,36],{12:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return s}));var r=a(0),n=a.n(r),o=a(8);function i(e,t,a,r,i,s,l){r&&(r.hasClass("noanim")?r.hasClass("InlineForm")?n()(r).find(".FormElement:first").css({"background-image":'url("/images/loading-fb.gif")',"background-position":"center right","background-repeat":"no-repeat"}):r.addClass("loading"):(n()(r).replaceWith(`<img alt="Laden" id="${r.attr("id")}" title="${t}" src="/images/loading-arrows.gif" />`),r=n()(`img[title="${t}"]`)));let c="application/x-www-form-urlencoded; charset=UTF-8",p=!0;a instanceof FormData&&(c=!1,p=!1),n.a.ajax({cache:!1,contentType:c,data:a,processData:p,type:e,url:t}).done(e=>{r&&(n()(r).hasClass("noanim")?n()(r).hasClass("InlineForm")&&n()(r).find(".FormElement:first").css({"background-image":"","background-position":"","background-repeat":""}):n()(r).hide(),r.removeClass("loading")),i(e)}).fail((e,t,a)=>{""===a&&(a="Nog bezig met laden!"),r?n()(r).replaceWith('<img alt="Mislukt" title="'+a+'" src="/plaetjes/famfamfam/cancel.png" />'):Object(o.a)(),s&&(e.responseText.startsWith("<!DOC")&&s("Er ging iets fout, code is: "+e.status),s(e.responseText))}).always(()=>{l&&l()})}function s(e,t){return n()(t+" .aanmeldbtn").addClass("loading"),n.a.ajax({cache:!1,data:"",type:"GET",url:e}).done(e=>{n()(t).replaceWith(e)}).fail((e,a,r)=>{n()(t+" .aanmeldbtn").replaceWith(n()(`<div class="alert alert-danger"><strong>Actie mislukt!</strong> ${r}</div>`)),alert(e.responseText)}),!0}},13:function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return c})),a.d(t,"c",(function(){return p})),a.d(t,"d",(function(){return m}));var r=a(0),n=a.n(r),o=a(4),i=a(2),s=a(61);function l(e,t){const a=n()(e).DataTable();t.data.forEach(e=>{const t=n()('tr[data-uuid="'+e.UUID+'"]');1===t.length?"remove"in e?a.row(t).remove():(a.row(t).data(e),Object(o.b)(t.get(0))):0===t.length?a.row.add(e):alert(t.length)}),a.draw(!1)}function c(e){const t=[];return n()(e+" tbody tr.selected").each((function(){t.push(n()(this).attr("data-uuid"))})),t}function p(e){return new n.a.fn.dataTable.Api(e)}o.a.addHandler(".ctx-datatable",(async function(e){await Promise.all([a.e(0),a.e(1)]).then(a.bind(null,72));const t=n()(e),r=t.data("settings"),i=t.data("search");r.ajax&&(r.ajax.data.lastUpdate=u(t),r.ajax.dataSrc=d(t));r.columns.forEach(e=>e.render=s.a[e.render]);const l=t.DataTable(r);t.dataTable().api().search(i),l.on("page",()=>l.rows({selected:!0}).deselect()),l.on("childRow.dt",(e,t)=>Object(o.b)(t.container.get(0)))})),o.a.addHandler(".ctx-offline-datatable",(async function(e){await Promise.all([a.e(0),a.e(1)]).then(a.bind(null,72)),n()(e).DataTable(Object(i.l)(e))}));const u=e=>()=>Number(e.data("lastupdate")),d=e=>t=>{(e=>t=>e.data("lastupdate",t))(e)(t.lastUpdate);const a=e.DataTable();if(t.autoUpdate){const r=parseInt(t.autoUpdate,10);!isNaN(r)&&r<6e5&&setTimeout(()=>{n.a.post(a.ajax.url(),{lastUpdate:u(e)},t=>{l(e.attr("id"),t),d(e)(t)})},r)}return function(e){const t=e.parent();t.hasClass("dataTables_scrollBody")&&t.scrollTop()+t.innerHeight()>=t[0].scrollHeight-20&&window.setTimeout(()=>{t.animate({scrollTop:t[0].scrollHeight},800)},200)}(e),t.data};function m(e,t){const a=/:(\w+)/g.exec(e);if(!a)return e;for(let r=1;r<a.length;r++)e=e.replace(":"+a[r],t[a[r]]);return e}},152:function(e,t,a){"use strict";a.r(t);var r=a(9),n=a.n(r),o=a(0),i=a.n(o),s=a(4);a(28),a(221);a(78),a(76),a(262),a(75),a(77);const l=i()(window),c=i()("#header");let p=i()("#banner");void 0===p[0]&&(p=i()("#banner-small")),l.on("load",()=>{setTimeout(()=>{i()("div.bb-img-loading").each((function(){const e=i()(document.createElement("img"));e.on("error",(function(){i()(this).attr("title","Afbeelding bestaat niet of is niet toegankelijk!"),i()(this).attr("src","/plaetjes/famfamfam/picture_error.png"),i()(this).css("width","16px"),i()(this).css("height","16px"),i()(this).removeClass("bb-img-loading").addClass("bb-img")})),e.addClass("bb-img"),e.attr("alt",i()(this).attr("title")),e.attr("style",i()(this).attr("style")),e.attr("src",i()(this).attr("src")),i()(this).html(e.toString()),e.on("load",(function(){const t=e.attr("src").indexOf("/plaetjes/fotoalbum/")>=0,a=i()(this).parent().parent().hasClass("bb-video-preview"),r=0!==i()(this).closest("a").length;i()(this).parent().replaceWith(i()(this)),t||a||r||i()(this).wrap(`<a class="lightbox-link" href="${i()(this).attr("src")}" data-lightbox="page-lightbox"></a>`)}))}))})});const u=(()=>{let e=!1;return()=>{e||(e=!0,setTimeout(()=>{i()(".lazy-load").each((function(){i()(this).replaceWith(this.textContent)}))}))}})();l.on("scroll",()=>{i()(window).scrollTop()>0&&u(),window.pageYOffset>p.outerHeight()?c.removeClass("alt"):c.addClass("alt")}),l.on("resize",()=>l.trigger("scroll")),l.trigger("scroll"),Object(s.b)(document.body);const d=document.querySelector("#contact-form");if(d){const e=document.querySelector("#melding"),t=d.submitButton;d.addEventListener("submit",a=>{a.preventDefault(),e.innerHTML="",t.disabled=!0;const r=new FormData(d);return n.a.post("/contactformulier/interesse",r).then(a=>{d.reset(),t.disabled=!1,e.innerHTML='<div class="alert alert-success"><span class="ico accept"></span>'+a.data+"</div>"}).catch(a=>{t.disabled=!1,e.innerHTML='<div class="alert alert-danger"><span class="ico exclamation"></span>'+a.response.data+"</div>"}),!1})}},221:function(e,t,a){"use strict";a.r(t);var r=a(218),n=a.n(r),o=a(169),i=a(158),s=a(164);var l=e=>(class extends e{constructor(e,t){super(e,t);const a=Object(s.a)(Object(i.a)('<span class="j-gallery-icon"><i class="fa fa-download"></i></span>'),{style:{color:t.backgroundColor,background:t.textColor,transform:"translateY(-8px)"},content:"Downloaden"});a.addEventListener("click",()=>window.location.href=`${this.getFullUrl()}?download`),this.appendControlsElements([a])}goToItem(e){return this.currentItem=e,super.goToItem(e)}getFullUrl(){return this.currentItem.fullUrl}}),c=a(167);var p=e=>(class extends e{constructor(e,t){super(e,t);const a=this.preview.setSize.bind(this.preview);this.preview.setSize=e=>(this.updateImage(e),a(e))}async updateImage(e){const t=this.preview.getElement().querySelector(".j-gallery-preview-content");if(e===o.a.auto){await Object(c.a)(this.currentItem.fullUrl);const e=new Image;e.src=this.currentItem.fullUrl,t.style.backgroundImage=`url(${this.currentItem.fullUrl})`,t.style.backgroundSize=`${Math.min(3e3,e.width)}px`}else t.style.backgroundImage=`url(${this.currentItem.url})`}});var u=e=>(class extends e{constructor(e,t){super(e,t);const a=Object(i.a)('<i class="fa fa-expand"></i>'),r=Object(s.a)(Object(i.a)('<span class="j-gallery-icon change-mode"></span>',{children:[a]}),{style:{color:t.backgroundColor,background:t.textColor,transform:"translateY(-8px)"},content:"Volledig scherm"});r.addEventListener("click",()=>this.toggleFullscreen()),this.appendControlsElements([r]),document.addEventListener("fullscreenchange",()=>{document.fullscreenElement?a.classList.replace("fa-expand","fa-compress"):a.classList.replace("fa-compress","fa-expand")})}async toggleFullscreen(){document.fullscreenElement?await document.exitFullscreen():await this.previewElement.requestFullscreen()}});var d=e=>(class extends e{constructor(e,t){super(e,t),document.addEventListener("keydown",e=>{switch(e.key){case"ArrowLeft":this.prev();break;case"ArrowRight":this.next()}})}});var m=e=>(class extends e{goToItem(e){const{items:t}=this.album,a=t[t.indexOf(e)+1];a?Object(c.a)(a.url):Object(c.a)(t[0].url);const r=t[t.indexOf(e)+1];return r?Object(c.a)(r.url):Object(c.a)(t[t.length-1].url),super.goToItem(e)}});(async()=>{const e=document.querySelectorAll(".fotoalbum");for(const t of e){const{isLoggedIn:e,magAanpassen:r,root:i,fotos:s}=t.dataset,c=[u,l,d,m,p];if("true"===e){const e=await a.e(38).then(a.bind(null,267));c.push(e.default)}if("true"===r){const e=await a.e(37).then(a.bind(null,268));c.push(e.default)}t.appendChild(n.a.create(JSON.parse(s),{decorators:c,root:i,previewSize:o.a.contain,tooltipThumbnailsToggle:"Thumbnails weergeven",tooltipChangeSize:"Grootte veranderen",tooltipSeeAllItems:"Alle foto's weergeven",tooltipSeeOtherAlbums:"Andere albums weergeven",tooltipSlideShowPause:"Voorstelling pauzeren",tooltipSlideShowStart:"Voorstelling starten"}).getElement())}})()},28:function(e,t,a){"use strict";var r=a(9),n=a.n(r),o=a(0),i=a.n(o),s=a(12),l=a(6),c=a(2);const p={markupSet:[{className:"ico text_bold",name:"Dikgedrukt",key:"B",openWith:"[b]",closeWith:"[/b]"},{className:"ico text_italic",name:"Cursief",key:"I",openWith:"[i]",closeWith:"[/i]"},{className:"ico text_underline",name:"Onderstreept",key:"U",openWith:"[u]",closeWith:"[/u]"},{className:"ico text_strikethrough",name:"Doorgestreept",key:"S",openWith:"[s]",closeWith:"[/s]"},{separator:"|"},{className:"ico text_smallcaps",name:"Offtopic",key:"O",openWith:"[offtopic]",closeWith:"[/offtopic]"},{className:"ico comments",closeWith:"[/citaat]",key:"Q",name:"Citaat",openWith:"[citaat=Naam_of_lidnummer]"},{separator:"|"},{className:"ico link",closeWith:"[/url]",key:"L",name:"Link",openWith:"[url=[![Url]!]]",placeHolder:"Link tekst"},{className:"ico email_link",closeWith:"[/email]",key:"E",name:"Email",openWith:"[email=[![Email adres]!]]",placeHolder:"Link tekst"},{separator:"|"},{className:"ico photos",name:"Fotoalbum",replaceWith:e=>{let t=window.prompt("Url","");if(t){const e=(t=decodeURIComponent(t.trim())).indexOf("/fotoalbum/");if(e>0)return"[fotoalbum]"+(t=t.substring(e+10))+"[/fotoalbum]";alert("Ongeldige url!")}return e.selection}},{className:"ico photo",name:"Poster of foto uit album",replaceWith:e=>{let t=window.prompt("Url","");if(t){const e=(t=decodeURIComponent(t.trim())).indexOf("/fotoalbum/");if(e>0)return"[foto]"+(t=t.substring(e+10).replace("_resized/","").replace("_thumbs/","").replace("#",""))+"[/foto]";alert("Ongeldige url!")}return e.selection}},Object(c.j)()?{className:"ico picture",name:"Plaatje",closeWith:e=>(n.a.get("/forum/plaatjes/upload").then(e=>{Object(l.a)(e.data)}),"")}:{className:"ico picture",name:"Afbeelding",replaceWith:"[img][![Url]!][/img]"},{className:"ico film",name:"Video",replaceWith:"[video][![Url]!][/video]"},{separator:"|"},{className:"ico map",name:"Kaart",openWith:"[locatie]",closeWith:"[/locatie]",placeHolder:"C.S.R. Delft"},{className:"ico sound_mute",name:"Verklapper",openWith:"[verklapper]",closeWith:"[/verklapper]"},{className:"ico shield",closeWith:"[/prive]",name:"PrivÃ©",openWith:"[prive]",placeHolder:"Afgeschermde gegevens"},{separator:"|"},{className:"ico script_code_red",name:"Code",openWith:"[code]",closeWith:"[/code]"},{className:"ico tag",name:"Opmaakcode tonen",openWith:"[tekst]",closeWith:"[/tekst]"}],nameSpace:"CsrBB",previewParserPath:"/tools/bbcode"};var u=a(4),d=a(13),m=a(8);function f(e){let t=!1;return i()(e).find(".FormElement").not(".tt-hint").each((function(){const e=i()(this);if(e.is("input:radio")){if(e.is(":checked")&&e.attr("origvalue")!==e.val())return t=!0,!1}else if(e.is("input:checkbox")){if(e.is(":checked")!==("1"===e.attr("origvalue")))return t=!0,!1}else if(e.val()!==e.attr("origvalue"))return t=!0,!1})),t}function h(e){e.prev(".InlineFormToggle").toggle(),e.toggle(),e.children(":first").trigger("focus")}function g(e,t){return t||(t=i()(e.target).closest("form"),e.preventDefault()),!(i()(e.target).hasClass("confirm")&&!confirm(i()(e.target).attr("title")+".\n\nWeet u het zeker?"))&&(t.find(".FormElement").each((function(){const t=i()(e.target).attr("origvalue");"string"==typeof t&&i()(this).val(t)})),!1)}function b(e){const t=e.target,a=i()(t);if(a.hasClass("confirm")){let t=a.attr("title");if(t?t+=".\n\n":t="Weet u het zeker?",!confirm(t))return e.preventDefault(),!1}const r=a.closest("form");if(!r.hasClass("Formulier"))return!1;if(r.hasClass("PreventUnchanged")&&!f(r))return e.preventDefault(),alert("Geen wijzigingen"),!1;if(a.attr("href")&&r.attr("action",a.attr("href")),r.hasClass("ModalForm")||r.hasClass("InlineForm")){e.preventDefault();const t=new FormData(r.get(0));let a=l.a,n=!1;if(r.hasClass("InlineForm")&&(n=r,t.append("InlineFormId",r.attr("id")),r.data("submitCallback")&&(a=r.data("submitCallback"))),r.hasClass("ModalForm")&&(a=e=>{"string"==typeof e?Object(l.a)(e):Object(m.a)()}),r.hasClass("DataTableResponse")){const e=r.attr("data-tableid");document.getElementById(e)||alert("DataTable not found"),t.append("DataTableId",e);const o=Object(d.a)("#"+e);i.a.each(o,(e,a)=>{t.append("DataTableSelection[]",a)}),a=t=>{"object"==typeof t?(Object(d.b)("#"+e,t),t.modal?(Object(m.b)(t.modal),Object(u.b)(document.querySelector("#modal"))):Object(m.a)()):Object(l.a)(t)},r.hasClass("noanim")||(n=!1)}return r.hasClass("ReloadPage")?a=c.o:r.hasClass("redirect")&&(a=c.n),Object(s.a)("POST",r.attr("action"),t,n,a,alert,()=>{r.hasClass("SubmitReset")&&g(e,r)}),!1}return r.off("submit"),r.trigger("submit"),!0}function v(e){const t=i()(e.target);if(t.hasClass("confirm")&&!confirm(t.attr("title")+".\n\nWeet u het zeker?"))return e.preventDefault(),!1;const a=t.closest("form");if(a.hasClass("InlineForm"))return e.preventDefault(),h(a),!1;if(a.hasClass("ModalForm")){e.preventDefault();const r=t.attr("href");return r&&n.a.get(r),f(a)&&!confirm("Sluiten zonder wijzigingen op te slaan?")||Object(m.a)(),!1}return!0}a.d(t,"b",(function(){return h})),a.d(t,"c",(function(){return b})),a.d(t,"a",(function(){return v})),u.a.addHandlers({".InlineFormToggle":e=>e.addEventListener("click",t=>(function(e,t){return t.preventDefault(),h(i()(e).next("form")),!1})(e,t)),".SubmitChange":e=>e.addEventListener("change",b),".cancel":e=>e.addEventListener("click",v),".reset":e=>e.addEventListener("click",g),".submit":e=>e.addEventListener("click",b),"form.Formulier":e=>i()(e).on("submit",b),"textarea.BBCodeField":e=>i()(e).markItUp(p),"time.timeago":e=>i()(e).timeago()}),window.insertPlaatje=e=>{i.a.markItUp({replaceWith:"[plaatje]"+e+"[/plaatje]"})}},61:function(e,t,a){"use strict";var r=a(2),n=a(13);t.a={default(e,t){if(null===e||"object"!=typeof e)return e;switch(t){case"sort":return e.sort;case"export":return e.export;default:return e.display}},bedrag:e=>Object(r.e)(e),check:e=>'<span class="ico '+(e?"tick":"cross")+'"></span>',aanmeldFilter:e=>e?`<span class="ico group_key" title="Aanmeld filter actief: '${e}'"></span>`:"",aanmeldingen:(e,t,a)=>a.aantal_aanmeldingen+" ("+a.aanmeld_limiet+")",totaalPrijs:(e,t,a)=>Object(r.e)(a.aantal_aanmeldingen*parseInt(a.prijs,10)),timeago(e,t,a,r){const o=Object(n.c)(r.settings).cell(r.row,r.col).node().firstChild;switch(t){case"sort":case"export":return o.dateTime;default:return e}},filesize(e,t){switch(t){case"sort":return Number(e);default:return Object(r.f)(e)}}}},76:function(module,exports){!function($){$.fn.markItUp=function(settings,extraSettings){var method,params,options,selection,ctrlKey,shiftKey,altKey;ctrlKey=shiftKey=altKey=!1,"string"==typeof settings&&(method=settings,params=extraSettings),options={id:"",nameSpace:"",root:"",previewHandler:!1,previewInWindow:"",previewInElement:"",previewAutoRefresh:!0,previewPosition:"after",previewTemplatePath:"~/templates/preview.html",previewParser:!1,previewParserPath:"",previewParserVar:"data",resizeHandle:!0,beforeInsert:"",afterInsert:"",onEnter:{},onShiftEnter:{},onCtrlEnter:{},onTab:{},markupSet:[{}]},$.extend(options,settings,extraSettings),options.root||$("script").each((function(e,t){var a;null!==(a=$(t).get(0).src.match(/(.*)jquery\.markitup(\.pack)?\.js$/))&&(options.root=a[1])}));var uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},matched=uaMatch(navigator.userAgent),browser={};return matched.browser&&(browser[matched.browser]=!0,browser.version=matched.version),browser.chrome?browser.webkit=!0:browser.webkit&&(browser.safari=!0),this.each((function(){var $$,textarea,levels,scrollPosition,caretPosition,caretOffset,clicked,hash,header,footer,previewWindow,template,iFrame,abort;if($$=$(this),textarea=this,levels=[],abort=!1,scrollPosition=caretPosition=0,caretOffset=-1,options.previewParserPath=localize(options.previewParserPath),options.previewTemplatePath=localize(options.previewTemplatePath),method)switch(method){case"remove":remove();break;case"insert":markup(params);break;default:$.error("Method "+method+" does not exist on jQuery.markItUp")}else init();function localize(e,t){return t?e.replace(/("|')~\//g,"$1"+options.root):e.replace(/^~\//,options.root)}function init(){var e,t="",a="";options.id?t='id="'+options.id+'"':$$.attr("id")&&(t='id="markItUp'+$$.attr("id").substr(0,1).toUpperCase()+$$.attr("id").substr(1)+'"'),options.nameSpace&&(a='class="'+options.nameSpace+'"'),$$.wrap("<div "+a+"></div>"),$$.wrap("<div "+t+' class="markItUp"></div>'),$$.wrap('<div class="markItUpContainer"></div>'),$$.addClass("markItUpEditor"),header=$('<div class="markItUpHeader"></div>').insertBefore($$),$(dropMenus(options.markupSet)).appendTo(header),footer=$('<div class="markItUpFooter"></div>').insertAfter($$),!0===options.resizeHandle&&!0!==browser.safari&&(e=$('<div class="markItUpResizeHandle"></div>').insertAfter($$).bind("mousedown.markItUp",(function(e){var t,a,r=$$.height(),n=e.clientY;t=function(e){return $$.css("height",Math.max(20,e.clientY+r-n)+"px"),!1},a=function(e){return $("html").unbind("mousemove.markItUp",t).unbind("mouseup.markItUp",a),!1},$("html").bind("mousemove.markItUp",t).bind("mouseup.markItUp",a)})),footer.append(e)),$$.bind("keydown.markItUp",keyPressed).bind("keyup",keyPressed),$$.bind("insertion.markItUp",(function(e,t){!1!==t.target&&get(),textarea===$.markItUp.focused&&markup(t)})),$$.bind("focus.markItUp",(function(){$.markItUp.focused=this})),options.previewInElement&&refreshPreview()}function dropMenus(markupSet){var ul=$("<ul></ul>"),i=0,li;return $("li:hover > ul",ul).css("display","block"),$.each(markupSet,(function(){var button=this,t="",title,li,j;title=button.key?(button.name||"")+" [Ctrl+"+button.key+"]":button.name||"";var key=button.key?'accesskey="'+button.key+'"':"";if(button.separator)li=$('<li class="markItUpSeparator">'+(button.separator||"")+"</li>").appendTo(ul);else{for(i++,j=levels.length-1;j>=0;j--)t+=levels[j]+"-";li=$('<li class="markItUpButton markItUpButton'+t+i+" "+(button.className||"")+'"><a href="" '+key+' title="'+title+'">'+(button.name||"")+"</a></li>").bind("contextmenu.markItUp",(function(){return!1})).bind("click.markItUp",(function(e){e.preventDefault()})).bind("focusin.markItUp",(function(){$$.focus()})).bind("mouseup",(function(){return button.call&&eval(button.call)(),setTimeout((function(){markup(button)}),1),!1})).bind("mouseenter.markItUp",(function(){$("> ul",this).show(),$(document).one("click",(function(){$("ul ul",header).hide()}))})).bind("mouseleave.markItUp",(function(){$("> ul",this).hide()})).appendTo(ul),button.dropMenu&&(levels.push(i),$(li).addClass("markItUpDropMenu").append(dropMenus(button.dropMenu)))}})),levels.pop(),ul}function magicMarkups(e){return e?e=(e=(e=e.toString()).replace(/\(\!\(([\s\S]*?)\)\!\)/g,(function(e,t){var a=t.split("|!|");return!0===altKey?void 0!==a[1]?a[1]:a[0]:void 0===a[1]?"":a[0]}))).replace(/\[\!\[([\s\S]*?)\]\!\]/g,(function(e,t){var a=t.split(":!:");if(!0===abort)return!1;var r=prompt(a[0],a[1]?a[1]:"");return null===r&&(abort=!0),r})):""}function prepare(e){return $.isFunction(e)&&(e=e(hash)),magicMarkups(e)}function build(e){var t,a=prepare(clicked.openWith),r=prepare(clicked.placeHolder),n=prepare(clicked.replaceWith),o=prepare(clicked.closeWith),i=prepare(clicked.openBlockWith),s=prepare(clicked.closeBlockWith),l=clicked.multiline;if(""!==n)t=a+n+o;else if(""===selection&&""!==r)t=a+r+o;else{var c=[e=e||selection],p=[];!0===l&&(c=e.split(/\r?\n/));for(var u=0;u<c.length;u++){var d,m=c[u];(d=m.match(/ *$/))?p.push(a+m.replace(/ *$/g,"")+o+d):p.push(a+m+o)}t=p.join("\n")}return{block:t=i+t+s,openBlockWith:i,openWith:a,replaceWith:n,placeHolder:r,closeWith:o,closeBlockWith:s}}function markup(e){var t,a,r,n,o,i,s;if(hash=clicked=e,get(),$.extend(hash,{line:"",root:options.root,textarea:textarea,selection:selection||"",caretPosition:caretPosition,ctrlKey:ctrlKey,shiftKey:shiftKey,altKey:altKey}),prepare(options.beforeInsert),prepare(clicked.beforeInsert),(!0===ctrlKey&&!0===shiftKey||!0===e.multiline)&&prepare(clicked.beforeMultiInsert),$.extend(hash,{line:1}),!0===ctrlKey&&!0===shiftKey){for(a=0,r=(o=selection.split(/\r?\n/)).length,n=0;n<r;n++)""!==$.trim(o[n])?($.extend(hash,{line:++a,selection:o[n]}),o[n]=build(o[n]).block):o[n]="";i={block:o.join("\n")},s=caretPosition,t=i.block.length+(browser.opera?r-1:0)}else!0===ctrlKey?(i=build(selection),s=caretPosition+i.openWith.length,t=i.block.length-i.openWith.length-i.closeWith.length,t-=i.block.match(/ $/)?1:0,t-=fixIeBug(i.block)):!0===shiftKey?(i=build(selection),s=caretPosition,t=i.block.length,t-=fixIeBug(i.block)):(i=build(selection),s=caretPosition+i.block.length,t=0,s-=fixIeBug(i.block));""===selection&&""===i.replaceWith&&(caretOffset+=fixOperaBug(i.block),s=caretPosition+i.openBlockWith.length+i.openWith.length,t=i.block.length-i.openBlockWith.length-i.openWith.length-i.closeWith.length-i.closeBlockWith.length,caretOffset=$$.val().substring(caretPosition,$$.val().length).length,caretOffset-=fixOperaBug($$.val().substring(0,caretPosition))),$.extend(hash,{caretPosition:caretPosition,scrollPosition:scrollPosition}),i.block!==selection&&!1===abort?(insert(i.block),set(s,t)):caretOffset=-1,get(),$.extend(hash,{line:"",selection:selection}),(!0===ctrlKey&&!0===shiftKey||!0===e.multiline)&&prepare(clicked.afterMultiInsert),prepare(clicked.afterInsert),prepare(options.afterInsert),previewWindow&&options.previewAutoRefresh&&refreshPreview(),shiftKey=altKey=ctrlKey=abort=!1}function fixOperaBug(e){return browser.opera?e.length-e.replace(/\n*/g,"").length:0}function fixIeBug(e){return browser.msie?e.length-e.replace(/\r*/g,"").length:0}function insert(e){document.selection?document.selection.createRange().text=e:textarea.value=textarea.value.substring(0,caretPosition)+e+textarea.value.substring(caretPosition+selection.length,textarea.value.length)}function set(e,t){if(textarea.createTextRange){if(browser.opera&&browser.version>=9.5&&0==t)return!1;range=textarea.createTextRange(),range.collapse(!0),range.moveStart("character",e),range.moveEnd("character",t),range.select()}else textarea.setSelectionRange&&textarea.setSelectionRange(e,e+t);textarea.scrollTop=scrollPosition,textarea.focus()}function get(){if(textarea.focus(),scrollPosition=textarea.scrollTop,document.selection)if(selection=document.selection.createRange().text,browser.msie){var e=document.selection.createRange(),t=e.duplicate();for(t.moveToElementText(textarea),caretPosition=-1;t.inRange(e);)t.moveStart("character"),caretPosition++}else caretPosition=textarea.selectionStart;else caretPosition=textarea.selectionStart,selection=textarea.value.substring(caretPosition,textarea.selectionEnd);return selection}function preview(){"function"==typeof options.previewHandler?previewWindow=!0:options.previewInElement?previewWindow=$(options.previewInElement):!previewWindow||previewWindow.closed?options.previewInWindow?(previewWindow=window.open("","preview",options.previewInWindow),$(window).unload((function(){previewWindow.close()}))):(iFrame=$('<iframe class="markItUpPreviewFrame"></iframe>'),"after"==options.previewPosition?iFrame.insertAfter(footer):iFrame.insertBefore(header),previewWindow=iFrame[iFrame.length-1].contentWindow||frame[iFrame.length-1]):!0===altKey&&(iFrame?iFrame.remove():previewWindow.close(),previewWindow=iFrame=!1),options.previewAutoRefresh||refreshPreview(),options.previewInWindow&&previewWindow.focus()}function refreshPreview(){renderPreview()}function renderPreview(){if(options.previewHandler&&"function"==typeof options.previewHandler)options.previewHandler($$.val());else if(options.previewParser&&"function"==typeof options.previewParser){writeInPreview(localize(options.previewParser($$.val()),1))}else""!==options.previewParserPath?$.ajax({type:"POST",dataType:"text",global:!1,url:options.previewParserPath,data:options.previewParserVar+"="+encodeURIComponent($$.val()),success:function(e){writeInPreview(localize(e,1))}}):template||$.ajax({url:options.previewTemplatePath,dataType:"text",global:!1,success:function(e){writeInPreview(localize(e,1).replace(/<!-- content -->/g,$$.val()))}});return!1}function writeInPreview(e){if(options.previewInElement)$(options.previewInElement).html(e);else if(previewWindow&&previewWindow.document){try{sp=previewWindow.document.documentElement.scrollTop}catch(e){sp=0}previewWindow.document.open(),previewWindow.document.write(e),previewWindow.document.close(),previewWindow.document.documentElement.scrollTop=sp}}function keyPressed(e){if(shiftKey=e.shiftKey,altKey=e.altKey,ctrlKey=(!e.altKey||!e.ctrlKey)&&(e.ctrlKey||e.metaKey),"keydown"===e.type){if(!0===ctrlKey&&(li=$('a[accesskey="'+(13==e.keyCode?"\\n":String.fromCharCode(e.keyCode))+'"]',header).parent("li"),0!==li.length))return ctrlKey=!1,setTimeout((function(){li.triggerHandler("mouseup")}),1),!1;if(13===e.keyCode||10===e.keyCode)return!0===ctrlKey?(ctrlKey=!1,markup(options.onCtrlEnter),options.onCtrlEnter.keepDefault):!0===shiftKey?(shiftKey=!1,markup(options.onShiftEnter),options.onShiftEnter.keepDefault):(markup(options.onEnter),options.onEnter.keepDefault);if(9===e.keyCode)return 1!=shiftKey&&1!=ctrlKey&&1!=altKey&&(-1!==caretOffset?(get(),set(caretOffset=$$.val().length-caretOffset,0),caretOffset=-1,!1):(markup(options.onTab),options.onTab.keepDefault))}}function remove(){$$.unbind(".markItUp").removeClass("markItUpEditor"),$$.parent("div").parent("div.markItUp").parent("div").replaceWith($$),$$.data("markItUp",null)}}))},$.fn.markItUpRemove=function(){return this.each((function(){$(this).markItUp("remove")}))},$.markItUp=function(e){var t={target:!1};if($.extend(t,e),t.target)return $(t.target).each((function(){$(this).focus(),$(this).trigger("insertion",[t])}));$("textarea").trigger("insertion",[t])}}(jQuery)}}]);
//# sourceMappingURL=30.21c8cd74be1926ef86c5.js.map