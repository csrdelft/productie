"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3099],{3099:(e,n,s)=>{s.r(n);var t=s(1339),i=s.n(t),r=s(1518),a=s(5946),o=s(5303);const c=document.getElementsByTagName("meta")["vapid-public-key"].content;let l=!1;const d=async e=>{switch(e){case"ja":return(async()=>{if(!l)return;const e=await Notification.requestPermission();if("denied"===e)throw new Error("The user explicitly denied the permission request.");"granted"===e&&console.info("The user accepted the permission request.");const n=await navigator.serviceWorker.ready;if(await(null==n?void 0:n.pushManager.getSubscription()))return void console.info("User is already subscribed.");const s={userVisibleOnly:!0,applicationServerKey:(0,a.Mp)(c)},t=await n.pushManager.subscribe(s);if(t)try{const e=await fetch("/push-abonnement",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw new Error("Bad status code from server.");const n=await e.json();if(!n||!n.success)throw new Error("Bad response from server.");console.info("Successfully subscribed to push notifications.")}catch(e){throw await(null==t?void 0:t.unsubscribe()),e}})();case"nee":return(async()=>{var e;if(!l)return;const n=await navigator.serviceWorker.ready,s=null!==(e=await(null==n?void 0:n.pushManager.getSubscription()))&&void 0!==e?e:null;if(!s)throw new Error("No existing subscription");const t=await fetch("/push-abonnement",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({endpoint:s.endpoint})});if(!t.ok)throw new Error("Bad status code from server.");const i=await t.json();if(!i||!i.success)throw new Error("Bad response from server.");await(null==s?void 0:s.unsubscribe())&&console.info("Successfully unsubscribed from push notifications.")})()}};(async()=>{if("serviceWorker"in navigator&&"PushManager"in window){const e=await navigator.serviceWorker.ready;if(void 0!==e&&"pushManager"in e){if(navigator.userAgent.includes("iPhone")||navigator.userAgent.includes("Macintosh")&&"ontouchend"in document){const e=window.matchMedia("(display-mode: fullscreen)").matches||window.matchMedia("(display-mode: standalone)").matches;l=e}else l=!0}}if(!l){(0,r.Ys)("#instelling-forum-meldingPush").classList.add("d-none")}})();const u=async e=>{e.preventDefault();const n=e.target;let s=null,t=null;if(n.classList.add("loading"),n instanceof HTMLInputElement||n instanceof HTMLSelectElement){if(!n.checkValidity())return!1;s=n.dataset.href,t=n.value}else n instanceof HTMLAnchorElement&&(s=n.href);if(!s)throw new Error("Geen url gevonden voor instelling");try{if(s.includes("meldingPush")){const e=/meldingPush\/(\w+)/g.exec(s);await d(e[1])}await i().post(s,{waarde:t}),document.querySelectorAll(".instellingen-bericht").forEach((e=>e.classList.remove("d-none"))),n.classList.remove("loading")}catch(e){console.error(e),alert("WP Error: "+e.message)}};o.Z.addHandler(".instellingKnop",(e=>e.addEventListener("click",u))),o.Z.addHandler(".change-opslaan",(e=>e.addEventListener("change",u)))}}]);
//# sourceMappingURL=3099.4383271376f01763c860.chunk.js.map