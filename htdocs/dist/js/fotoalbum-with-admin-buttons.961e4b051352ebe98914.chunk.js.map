{"version":3,"sources":["webpack:///./js/fotoalbum/with-admin-buttons.ts"],"names":["constructor","albums","params","super","this","root","container","style","color","backgroundColor","background","textColor","transform","content","addEventListener","dropdown","display","rotateClockwiseButton","padding","url","getUrl","a","post","foto","rotation","then","rotateCounterClockwiseButton","setCoverButton","resp","data","deleteButton","confirm","decodeURI","flexDirection","left","position","top","whiteSpace","children","appendChild","appendControlsElements","item","currentItem","goToItem","fullUrl","replace"],"mappings":"2FAAA,4DA+Fe,UA1FWA,IAAgB,cAAcA,EACpD,YAAYC,EAAQC,GAChBC,MAAMF,EAAQC,GACdE,KAAKC,KAAOH,EAAOG,MAAQ,GAC3B,MAAMC,EAAY,YAAY,YAAc,oEAAqE,CAC7GC,MAAO,CACHC,MAAON,EAAOO,gBACdC,WAAYR,EAAOS,UACnBC,UAAW,oBAEfC,QAAS,WAEbP,EAAUQ,iBAAiB,QAAS,KAChCC,EAASR,MAAMS,QAAU,SAE7BV,EAAUQ,iBAAiB,aAAc,KACrCC,EAASR,MAAMS,QAAU,SAE7B,MAAMC,EAAwB,YAAc,mEAAoE,CAC5GV,MAAO,CACHW,QAAS,WAGjBD,EAAsBH,iBAAiB,QAAS,KAC5C,MAAMK,EAAMf,KAAKgB,SACjB,EAAAC,EAAMC,KAAK,qBAAuB,YAAQH,GAAM,CAC5CI,KAAM,YAASJ,GACfK,SAAU,KACXC,KAAK,OAEZ,MAAMC,EAA+B,YAAc,oEAAqE,CACpHnB,MAAO,CACHW,QAAS,WAGjBQ,EAA6BZ,iBAAiB,QAAS,KACnD,MAAMK,EAAMf,KAAKgB,SACjB,EAAAC,EAAMC,KAAK,qBAAuB,YAAQH,GAAM,CAC5CI,KAAM,YAASJ,GACfK,UAAW,KACZC,KAAK,OAEZ,MAAME,EAAiB,YAAc,wEAAyE,CAC1GpB,MAAO,CACHW,QAAS,WAGjBS,EAAeb,iBAAiB,QAAS,KACrC,MAAMK,EAAMf,KAAKgB,SACjB,EAAAC,EAAMC,KAAK,wBAA0B,YAAQH,GAAM,CAC/CI,KAAM,YAASJ,KAChBM,KAAMG,GAAS,YAASA,EAAKC,SAEpC,MAAMC,EAAe,YAAc,0DAA2D,CAC1FvB,MAAO,CACHW,QAAS,WAGjBY,EAAahB,iBAAiB,QAAS,KACnC,IAAKiB,QAAQ,kDACT,OAAO,EAEX,MAAMZ,EAAMf,KAAKgB,SACjB,EAAAC,EAAMC,KAAK,yBAA2B,YAAQH,GAAM,CAChDI,KAAMS,UAAU,YAASb,MAC1BM,KAAK,OAEZ,MAAMV,EAAW,YAAc,yCAA0C,CACrER,MAAO,CACHG,WAAYR,EAAOO,gBACnBO,QAAS,OACTiB,cAAe,SACfC,KAAM,IACNC,SAAU,WACVC,IAAK,IACLC,WAAY,UAEhBC,SAAU,CAACrB,EAAuBS,EAA8BC,EAAgBG,KAEpFxB,EAAUiC,YAAYxB,GACtBX,KAAKoC,uBAAuB,CAAClC,IAEjC,SAASmC,GAEL,OADArC,KAAKsC,YAAcD,EACZtC,MAAMwC,SAASF,GAE1B,SACI,OAAOrC,KAAKsC,YAAYE,QAAQC,QAAQzC,KAAKC,KAAM","file":"js/fotoalbum-with-admin-buttons.961e4b051352ebe98914.chunk.js","sourcesContent":["import axios from 'axios';\nimport createElement from 'jgallery/src/utils/create-element';\nimport withTooltip from 'jgallery/src/utils/with-tooltip';\nimport { redirect, reload } from '../reload';\nimport { basename, dirname } from '../util';\nconst withAdminButtons = (constructor) => class extends constructor {\n    constructor(albums, params) {\n        super(albums, params);\n        this.root = params.root || '';\n        const container = withTooltip(createElement('<span class=\"j-gallery-icon\"><i class=\"fa fa-wrench\"></i></span>'), {\n            style: {\n                color: params.backgroundColor,\n                background: params.textColor,\n                transform: 'translateY(-8px)',\n            },\n            content: 'Beheer',\n        });\n        container.addEventListener('click', () => {\n            dropdown.style.display = 'flex';\n        });\n        container.addEventListener('mouseleave', () => {\n            dropdown.style.display = 'none';\n        });\n        const rotateClockwiseButton = createElement(`<div><i class=\"fa fa-redo\"></i>&nbsp;Draai met de klok mee</div>`, {\n            style: {\n                padding: '0.2em',\n            },\n        });\n        rotateClockwiseButton.addEventListener('click', () => {\n            const url = this.getUrl();\n            axios.post('/fotoalbum/roteren' + dirname(url), {\n                foto: basename(url),\n                rotation: 90,\n            }).then(reload);\n        });\n        const rotateCounterClockwiseButton = createElement(`<div><i class=\"fa fa-undo\"></i>&nbsp;Draai tegen de klok in</div>`, {\n            style: {\n                padding: '0.2em',\n            },\n        });\n        rotateCounterClockwiseButton.addEventListener('click', () => {\n            const url = this.getUrl();\n            axios.post('/fotoalbum/roteren' + dirname(url), {\n                foto: basename(url),\n                rotation: -90,\n            }).then(reload);\n        });\n        const setCoverButton = createElement(`<div><i class=\"fa fa-folder\"></i>&nbsp;Instellen als albumcover</div>`, {\n            style: {\n                padding: '0.2em',\n            },\n        });\n        setCoverButton.addEventListener('click', () => {\n            const url = this.getUrl();\n            axios.post('/fotoalbum/albumcover' + dirname(url), {\n                foto: basename(url),\n            }).then((resp) => redirect(resp.data));\n        });\n        const deleteButton = createElement(`<div><i class=\"fa fa-times\"></i>&nbsp;Verwijderen</div>`, {\n            style: {\n                padding: '0.2em',\n            },\n        });\n        deleteButton.addEventListener('click', () => {\n            if (!confirm('Foto definitief verwijderen. Weet u het zeker?')) {\n                return false;\n            }\n            const url = this.getUrl();\n            axios.post('/fotoalbum/verwijderen' + dirname(url), {\n                foto: decodeURI(basename(url)),\n            }).then(reload);\n        });\n        const dropdown = createElement('<div class=\"j-gallery-dropdown\"></div>', {\n            style: {\n                background: params.backgroundColor,\n                display: 'none',\n                flexDirection: 'column',\n                left: '0',\n                position: 'absolute',\n                top: '0',\n                whiteSpace: 'nowrap',\n            },\n            children: [rotateClockwiseButton, rotateCounterClockwiseButton, setCoverButton, deleteButton],\n        });\n        container.appendChild(dropdown);\n        this.appendControlsElements([container]);\n    }\n    goToItem(item) {\n        this.currentItem = item;\n        return super.goToItem(item);\n    }\n    getUrl() {\n        return this.currentItem.fullUrl.replace(this.root, '');\n    }\n};\nexport default withAdminButtons;\n"],"sourceRoot":""}