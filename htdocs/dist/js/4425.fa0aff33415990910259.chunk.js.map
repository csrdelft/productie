{"version":3,"sources":["webpack:///./js/page/forum.ts","webpack:///../.yarn/cache/hoverintent-npm-2.2.1-3558b88d2d-50c776b5cc.zip/node_modules/hoverintent/index.js"],"names":["textarea","concept","lastPing","setInterval","async","pingValue","value","getAttribute","data","dataset","url","ping","e","window","location","reload","hash","pathname","substr","reactieid","parseInt","on","slideDown","this","parent","find","toggleClass","forEach","auteur","forummodKnoppen","el","style","opacity","forumDeel","localStorage","setItem","delenList","error","console","vorigOnderwerpButton","volgendOnderwerpButton","onderwerpRegex","forumDradenIds","getItem","huidigOnderwerp","match","ids","split","huidigeIndex","indexOf","vorigeId","volgendeId","setAttribute","replace","citeerKnop","addEventListener","citeren","berichtLinkButtons","button","berichtLink","nav","navigator","share","title","Error","clipboard","writeText","alert","err","message","rssFeedButtons","forumLinkButtons","rssLink","log","assign","forumLink","module","exports","onOver","onOut","x","y","pX","pY","mouseOver","focused","h","state","timer","options","sensitivity","interval","timeout","handleFocus","tracker","clientX","clientY","compare","clearTimeout","Math","abs","undefined","call","setTimeout","dispatchOver","removeEventListener","dispatchOut","delay","dispatchFocus","dispatchBlur","removeFocus","opt","focusOptionChanged","Object","remove"],"mappings":"2LAMA,IACI,MAAMA,GAAW,QAAO,yBAClBC,GAAU,QAAO,iBAEvB,IAAIC,GAAW,EAEfC,aAAYC,UACR,MAAMC,EAAYL,EAASM,QAAUN,EAASO,aAAa,aAC3D,GAAIF,GAAaH,EACb,IACI,MAAM,KAAEM,SAAe,SAAWP,EAAQQ,QAAQC,IAAK,CACnDC,KAAMN,KAEV,OAAUG,GACVN,EAAWG,EAEf,MAAOO,GAEHC,OAAOC,SAASC,YAGzB,KASP,MAAOH,IAIP,IAAKC,OAAOC,SAASE,MAC0B,oBAA3CH,OAAOC,SAASG,SAASC,OAAO,EAAG,IAA2B,CAC9D,MAAMC,EAAYC,SAASP,OAAOC,SAASG,SAASC,OAAO,IAAK,IAChEL,OAAOC,SAASE,KAAO,IAAMG,EAEjC,IAAE,gBAAgBE,GAAG,WAAW,IAAM,IAAE,kBAAkBC,UAAU,OACpE,IAAE,kBAAkBD,GAAG,SAAS,WAC5B,IAAEE,MAAMC,SAASC,KAAK,iBAAiBC,YAAY,iBAEvD,QAAU,WAAWC,SAASC,IAC1B,MAAMC,GAAkB,QAAU,iBAAkBD,GACpD,IAAYA,GAAQ,IAAMC,EAAgBF,SAASG,GAAQA,EAAGC,MAAMC,QAAU,QAAO,IAAMH,EAAgBF,SAASG,GAAQA,EAAGC,MAAMC,QAAU,WAGnJ,IACI,MAAMC,GAAY,QAAO,sBACrBA,GACAC,aAAaC,QAAQ,mBAAoBF,EAAUxB,QAAQ2B,WAGnE,MAAOC,GACHC,QAAQD,MAAMA,GAGlB,IACI,MAAME,GAAuB,QAAO,mBAC9BC,GAAyB,QAAO,qBAChCC,EAAiB,OACvB,GAAID,GAA0BD,EAAsB,CAChD,MAAMG,EAAiBR,aAAaS,QAAQ,oBAC5C,GAAID,EAAgB,CAEhB,MAAME,EAAkB/B,OAAOC,SAASG,SAAS4B,MAAMJ,GACvD,GAAIG,EAAgB,GAAI,CACpB,MAAME,EAAMJ,EAAeK,MAAM,KAC3BC,EAAeF,EAAIG,QAAQL,EAAgB,IAC3CM,EAAWJ,EAAIE,EAAe,GAC9BG,EAAaL,EAAIE,EAAe,GAClCE,GACAX,EAAqBa,aAAa,OAAQvC,OAAOC,SAASG,SAASoC,QAAQZ,EAAgBS,GACvFrC,OAAOC,SAASE,MAEpBmC,GACAX,EAAuBY,aAAa,OAAQvC,OAAOC,SAASG,SAASoC,QAAQZ,EAAgBU,GACzFtC,OAAOC,SAASE,SAMxC,MAAOqB,GACHC,QAAQD,MAAMA,GAElB,IAAK,MAAMiB,KAAc,QAAU,aAC/BA,EAAWC,iBAAiB,SAAS,KAAM,QAAaD,EAAW7C,QAAQ+C,WAE/E,MAAMC,GAAqB,QAAU,sBAErC,IAAK,MAAMC,KAAUD,EAAoB,CACrC,MAAME,EAAcD,EAAOjD,QAAQkD,YAC7BC,EAAMC,UACZH,EAAOH,iBAAiB,SAASnD,UAC7B,IACI,GAAI,UAAWwD,QACLC,UAAUC,MAAM,CAClBC,MAAO,qBACPrD,IAAKiD,QAGR,MAAI,cAAeC,GAKpB,MAAM,IAAII,MAAM,oCAJVH,UAAUI,UAAUC,UAAUP,GACpCQ,MAAM,kDAMd,MAAOC,GACH9B,QAAQD,MAAM+B,EAAIC,aAI9B,MAAMC,GAAiB,QAAU,kBAC3BC,GAAmB,QAAU,oBAEnC,IAAK,MAAMb,KAAUY,EAAgB,CACjC,MAAME,EAAUd,EAAOjD,QAAQ+D,QACzBZ,EAAMC,UACZH,EAAOH,iBAAiB,SAASnD,UAC7BkC,QAAQmC,IAAI,MAAOD,GACnB,IACI,GAAgB,OAAZA,QACM1D,SAAS4D,OAAO,mDAErB,GAAI,UAAWd,QACVC,UAAUC,MAAM,CAClBC,MAAO,8BACPrD,IAAK8D,QAGR,MAAI,cAAeZ,GAKpB,MAAM,IAAII,MAAM,gCAJVH,UAAUI,UAAUC,UAAUM,GACpCL,MAAM,mDAMd,MAAOC,GACH9B,QAAQD,MAAM+B,EAAIC,aAK9B,IAAK,MAAMX,KAAUa,EAAkB,CACnC,MAAMI,EAAYjB,EAAOjD,QAAQkE,UAC3Bf,EAAMC,UACZH,EAAOH,iBAAiB,SAASnD,UAC7BkC,QAAQmC,IAAI,QAASE,GACrB,IACI,GAAI,UAAWf,QACLC,UAAUC,MAAM,CAClBC,MAAO,qBACPrD,IAAKiE,QAGR,MAAI,cAAef,GAKpB,MAAM,IAAII,MAAM,kCAJVH,UAAUI,UAAUC,UAAUS,GACpCR,MAAM,gDAMd,MAAOC,GACH9B,QAAQD,MAAM+B,EAAIC,e,sBC7K9BO,EAAOC,QAAU,SAAS/C,EAAIgD,EAAQC,GACpC,IAAIC,EAAGC,EAAGC,EAAIC,EACVC,GAAY,EACZC,GAAU,EACVC,EAAI,GACNC,EAAQ,EACRC,EAAQ,EAENC,EAAU,CACZC,YAAa,EACbC,SAAU,IACVC,QAAS,EACTC,aAAa,GASf,SAASC,EAAQlF,GACfoE,EAAIpE,EAAEmF,QACNd,EAAIrE,EAAEoF,QAGR,SAASC,EAAQnE,EAAIlB,GAEnB,GADI4E,IAAOA,EAAQU,aAAaV,IAC3BW,KAAKC,IAAIlB,EAAKF,GAAKmB,KAAKC,IAAIjB,EAAKF,GAAMQ,EAAQC,YAElD,OADAH,EAAQ,EACDF,OAAUgB,EAAYvB,EAAOwB,KAAKxE,EAAIlB,GAE7CsE,EAAKF,EACLG,EAAKF,EACLO,EAAQe,YAAW,WACjBN,EAAQnE,EAAIlB,KACX6E,EAAQE,UAcf,SAASa,EAAa5F,GAgBpB,OAfAwE,GAAY,EACRI,IAAOA,EAAQU,aAAaV,IAChC1D,EAAG2E,oBAAoB,YAAaX,GAAS,GAE/B,IAAVP,IACFL,EAAKtE,EAAEmF,QACPZ,EAAKvE,EAAEoF,QAEPlE,EAAGyB,iBAAiB,YAAauC,GAAS,GAE1CN,EAAQe,YAAW,WACjBN,EAAQnE,EAAIlB,KACX6E,EAAQE,WAGNpE,KAGT,SAASmF,EAAY9F,GAWnB,OAVAwE,GAAY,EACRI,IAAOA,EAAQU,aAAaV,IAChC1D,EAAG2E,oBAAoB,YAAaX,GAAS,GAE/B,IAAVP,IACFC,EAAQe,YAAW,YA5DvB,SAAezE,EAAIlB,GACb4E,IAAOA,EAAQU,aAAaV,IAChCD,EAAQ,EACDF,GAAsBN,EAAMuB,KAAKxE,EAAIlB,GA0DxC+F,CAAM7E,EAAIlB,KACT6E,EAAQG,UAGNrE,KAGT,SAASqF,EAAchG,GAChBwE,IACHC,GAAU,EACVP,EAAOwB,KAAKxE,EAAIlB,IAIpB,SAASiG,EAAajG,IACfwE,GAAaC,IAChBA,GAAU,EACVN,EAAMuB,KAAKxE,EAAIlB,IASnB,SAASkG,IACPhF,EAAG2E,oBAAoB,QAASG,GAAe,GAC/C9E,EAAG2E,oBAAoB,OAAQI,GAAc,GAe/C,OA9EAvB,EAAEG,QAAU,SAASsB,GACnB,IAAIC,EAAqBD,EAAIlB,cAAgBJ,EAAQI,YAKrD,OAJAJ,EAAUwB,OAAOvC,OAAO,GAAIe,EAASsB,GACjCC,IACFvB,EAAQI,aAqDV/D,EAAGyB,iBAAiB,QAASqD,GAAe,GAC5C9E,EAAGyB,iBAAiB,OAAQsD,GAAc,IAtDLC,KAE9BxB,GA4DTA,EAAE4B,OAAS,WACJpF,IACLA,EAAG2E,oBAAoB,YAAaD,GAAc,GAClD1E,EAAG2E,oBAAoB,WAAYC,GAAa,GAChDI,MAGEhF,IACFA,EAAGyB,iBAAiB,YAAaiD,GAAc,GAC/C1E,EAAGyB,iBAAiB,WAAYmD,GAAa,IAGxCpB","file":"js/4425.fa0aff33415990910259.chunk.js","sourcesContent":["import $ from 'jquery';\nimport axios from 'axios';\nimport { domUpdate } from '../lib/domUpdate';\nimport { forumCiteren } from '../lib/forum';\nimport hoverintent from 'hoverintent';\nimport { select, selectAll } from '../lib/dom';\ntry {\n    const textarea = select('textarea#forumBericht');\n    const concept = select('#forumConcept');\n    // The last value that we pinged\n    let lastPing = false;\n    /*var ping = */\n    setInterval(async () => {\n        const pingValue = textarea.value !== textarea.getAttribute('origvalue');\n        if (pingValue || lastPing) {\n            try {\n                const { data } = await axios.post(concept.dataset.url, {\n                    ping: pingValue,\n                });\n                domUpdate(data);\n                lastPing = pingValue;\n            }\n            catch (e) {\n                // Herlaad de pagina als dit niet lukt\n                window.location.reload();\n            }\n        }\n    }, 60000);\n    /*var autosave;\n     $textarea.focusin(function () {\n     autosave = setInterval(saveConceptForumBericht, 3000);\n     });\n     $textarea.focusout(function () {\n     clearInterval(autosave);\n     });*/\n}\ncatch (e) {\n    // Geen edit veld hier\n}\n// naar juiste forumreactie scrollen door hash toe te voegen\nif (!window.location.hash &&\n    window.location.pathname.substr(0, 15) === '/forum/reactie/') {\n    const reactieid = parseInt(window.location.pathname.substr(15), 10);\n    window.location.hash = '#' + reactieid;\n}\n$('#nieuweTitel').on('focusin', () => $('#draad-melding').slideDown(200));\n$('.togglePasfoto').on('click', function () {\n    $(this).parent().find('.forumpasfoto').toggleClass('verborgen');\n});\nselectAll('.auteur').forEach((auteur) => {\n    const forummodKnoppen = selectAll('a.forummodknop', auteur);\n    hoverintent(auteur, () => forummodKnoppen.forEach((el) => (el.style.opacity = '1')), () => forummodKnoppen.forEach((el) => (el.style.opacity = '0')));\n});\n// Sla alle ids van forumDraden uit section.forum-deel (alleen op deelfora) op in localStorage voor previous-next functies\ntry {\n    const forumDeel = select('section.forum-deel');\n    if (forumDeel) {\n        localStorage.setItem('forum_draden_ids', forumDeel.dataset.delenList);\n    }\n}\ncatch (error) {\n    console.error(error);\n}\n// Laad de ids van vorige en volgende forumDraden (alleen op draadjes) uit localStorage voor previous-next functies\ntry {\n    const vorigOnderwerpButton = select('a.vorige-button');\n    const volgendOnderwerpButton = select('a.volgende-button');\n    const onderwerpRegex = /\\d+/g;\n    if (volgendOnderwerpButton && vorigOnderwerpButton) {\n        const forumDradenIds = localStorage.getItem('forum_draden_ids');\n        if (forumDradenIds) {\n            // Haal id van huidig onderwerp uit de pathname\n            const huidigOnderwerp = window.location.pathname.match(onderwerpRegex);\n            if (huidigOnderwerp[0]) {\n                const ids = forumDradenIds.split(',');\n                const huidigeIndex = ids.indexOf(huidigOnderwerp[0]);\n                const vorigeId = ids[huidigeIndex - 1];\n                const volgendeId = ids[huidigeIndex + 1];\n                if (vorigeId) {\n                    vorigOnderwerpButton.setAttribute('href', window.location.pathname.replace(onderwerpRegex, vorigeId) +\n                        window.location.hash);\n                }\n                if (volgendeId) {\n                    volgendOnderwerpButton.setAttribute('href', window.location.pathname.replace(onderwerpRegex, volgendeId) +\n                        window.location.hash);\n                }\n            }\n        }\n    }\n}\ncatch (error) {\n    console.error(error);\n}\nfor (const citeerKnop of selectAll('a.citeren')) {\n    citeerKnop.addEventListener('click', () => forumCiteren(citeerKnop.dataset.citeren));\n}\nconst berichtLinkButtons = selectAll('.berichtLinkButton');\n// Event listener om forum feed te delen\nfor (const button of berichtLinkButtons) {\n    const berichtLink = button.dataset.berichtLink;\n    const nav = navigator;\n    button.addEventListener('click', async () => {\n        try {\n            if ('share' in nav) {\n                await navigator.share({\n                    title: 'C.S.R. Delft Forum',\n                    url: berichtLink,\n                });\n            }\n            else if ('clipboard' in nav) {\n                await navigator.clipboard.writeText(berichtLink);\n                alert('Bericht link is gekopieerd naar het clipboard'); // TODO: kan eleganter\n            }\n            else {\n                throw new Error('Kan niets met bericht link');\n            }\n        }\n        catch (err) {\n            console.error(err.message);\n        }\n    });\n}\nconst rssFeedButtons = selectAll('.rssFeedButton');\nconst forumLinkButtons = selectAll('.forumLinkButton');\n// Event listener om RSS feed te delen\nfor (const button of rssFeedButtons) {\n    const rssLink = button.dataset.rssLink;\n    const nav = navigator;\n    button.addEventListener('click', async () => {\n        console.log('rss', rssLink);\n        try {\n            if (rssLink === null) {\n                await location.assign('/profiel/{{ app.user.uid }}#tokenaanvragen');\n            }\n            else if ('share' in nav) {\n                await navigator.share({\n                    title: 'C.S.R. Delft Forum RSS feed',\n                    url: rssLink,\n                });\n            }\n            else if ('clipboard' in nav) {\n                await navigator.clipboard.writeText(rssLink);\n                alert('RSS feed link is gekopieerd naar het clipboard'); // TODO: kan eleganter\n            }\n            else {\n                throw new Error('Kan niets met RSS feed');\n            }\n        }\n        catch (err) {\n            console.error(err.message);\n        }\n    });\n}\n// Event listener om forum feed te delen\nfor (const button of forumLinkButtons) {\n    const forumLink = button.dataset.forumLink;\n    const nav = navigator;\n    button.addEventListener('click', async () => {\n        console.log('forum', forumLink);\n        try {\n            if ('share' in nav) {\n                await navigator.share({\n                    title: 'C.S.R. Delft Forum',\n                    url: forumLink,\n                });\n            }\n            else if ('clipboard' in nav) {\n                await navigator.clipboard.writeText(forumLink);\n                alert('Forum link is gekopieerd naar het clipboard'); // TODO: kan eleganter\n            }\n            else {\n                throw new Error('Kan niets met forum link');\n            }\n        }\n        catch (err) {\n            console.error(err.message);\n        }\n    });\n}\n","'use strict';\n\nmodule.exports = function(el, onOver, onOut) {\n  var x, y, pX, pY;\n  var mouseOver = false;\n  var focused = false;\n  var h = {},\n    state = 0,\n    timer = 0;\n\n  var options = {\n    sensitivity: 7,\n    interval: 100,\n    timeout: 0,\n    handleFocus: false\n  };\n\n  function delay(el, e) {\n    if (timer) timer = clearTimeout(timer);\n    state = 0;\n    return focused ? undefined : onOut.call(el, e);\n  }\n\n  function tracker(e) {\n    x = e.clientX;\n    y = e.clientY;\n  }\n\n  function compare(el, e) {\n    if (timer) timer = clearTimeout(timer);\n    if ((Math.abs(pX - x) + Math.abs(pY - y)) < options.sensitivity) {\n      state = 1;\n      return focused ? undefined : onOver.call(el, e);\n    } else {\n      pX = x;\n      pY = y;\n      timer = setTimeout(function() {\n        compare(el, e);\n      }, options.interval);\n    }\n  }\n\n  // Public methods\n  h.options = function(opt) {\n    var focusOptionChanged = opt.handleFocus !== options.handleFocus;\n    options = Object.assign({}, options, opt);\n    if (focusOptionChanged) {\n      options.handleFocus ? addFocus() : removeFocus();\n    }\n    return h;\n  };\n\n  function dispatchOver(e) {\n    mouseOver = true;\n    if (timer) timer = clearTimeout(timer);\n    el.removeEventListener('mousemove', tracker, false);\n\n    if (state !== 1) {\n      pX = e.clientX;\n      pY = e.clientY;\n\n      el.addEventListener('mousemove', tracker, false);\n\n      timer = setTimeout(function() {\n        compare(el, e);\n      }, options.interval);\n    }\n\n    return this;\n  }\n\n  function dispatchOut(e) {\n    mouseOver = false;\n    if (timer) timer = clearTimeout(timer);\n    el.removeEventListener('mousemove', tracker, false);\n\n    if (state === 1) {\n      timer = setTimeout(function() {\n        delay(el, e);\n      }, options.timeout);\n    }\n\n    return this;\n  }\n\n  function dispatchFocus(e) {\n    if (!mouseOver) {\n      focused = true;\n      onOver.call(el, e);\n    }\n  }\n\n  function dispatchBlur(e) {\n    if (!mouseOver && focused) {\n      focused = false;\n      onOut.call(el, e);\n    }\n  }\n\n  function addFocus() {\n    el.addEventListener('focus', dispatchFocus, false);\n    el.addEventListener('blur', dispatchBlur, false);\n  }\n\n  function removeFocus() {\n    el.removeEventListener('focus', dispatchFocus, false);\n    el.removeEventListener('blur', dispatchBlur, false);\n  }\n\n  h.remove = function() {\n    if (!el) return;\n    el.removeEventListener('mouseover', dispatchOver, false);\n    el.removeEventListener('mouseout', dispatchOut, false);\n    removeFocus();\n  };\n\n  if (el) {\n    el.addEventListener('mouseover', dispatchOver, false);\n    el.addEventListener('mouseout', dispatchOut, false);\n  }\n\n  return h;\n};\n"],"sourceRoot":""}