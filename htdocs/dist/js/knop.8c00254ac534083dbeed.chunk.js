(window.webpackJsonp=window.webpackJsonp||[]).push([[40,15],{14:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var a=n(0),r=n.n(a),o=n(12),i=n(19),s=n(3);function c(t){if("string"!=typeof t)return;if("<!DOCTYPE"===(t=r.a.trim(t)).substring(0,9))throw alert("response error"),new Error(t);const e=Object(s.i)(t);r()(e).each((function(t,e){if(!(e instanceof Element))return;const n=r()(e),a=r()(e).attr("id"),s=r()(e).attr("parentid"),c=r()("#"+a),l=r()("#"+s);if(1===c.length)n.hasClass("remove")?c.effect("fade",{},400,()=>{c.remove()}):c.replaceWith(n.show().get()).effect("highlight");else if(1===l.length)l.append(n.show());else if(e instanceof HTMLScriptElement)r()("head").append(n);else{const t=r()(this).attr("parentid");t?r()(this).prependTo("#"+t).show().effect("highlight"):r()(this).prependTo("#maalcie-tabel tbody:visible:first").show().effect("highlight")}Object(o.b)(e),"modal"===a?Object(i.b)():Object(i.a)()}))}},171:function(t,e,n){"use strict";n.r(e),n.d(e,"knopPost",(function(){return g})),n.d(e,"knopGet",(function(){return m})),n.d(e,"knopVergroot",(function(){return h}));var a=n(0),r=n.n(a),o=n(23),i=n(20),s=n(14),c=n(34),l=n(19),d=n(52),u=n(9),f=n(3);function p(t,e){if(!(t instanceof HTMLElement))throw new Error("Knop is geen HTMLElement");if(t.classList.contains("confirm")&&!confirm(t.title+".\n\nWeet u het zeker?"))return Object(l.a)(),!1;let n=t,a=s.a,r=t.getAttribute("data");if(t.classList.contains("popup")&&(n=null),t.classList.contains("prompt")){if(!r)throw new Error("Prompt knop heeft geen data");const[t,e]=r.split("="),n=prompt(t,e);if(!n)return!1;r=encodeURIComponent(r[0])+"="+encodeURIComponent(n)}if(t.classList.contains("addfav")&&(r={tekst:document.title.replace("C.S.R. Delft - ",""),link:window.location.href}),t.classList.contains("DataTableRowKnop")){const e=Object(u.a)(t,"table").id;r={DataTableId:e,DataTableSelection:Object(u.a)(t,"tr").dataset.uuid},a=t=>{Object(o.isDataTableResponse)(t)?(Object(o.fnUpdateDataTable)("#"+e,t),t&&t.modal?Object(s.a)(t.modal):Object(l.a)()):"string"==typeof t&&Object(s.a)(t)}}if(t.classList.contains("DataTableResponse")){let e=t.dataset.tableid;if(!e||!document.getElementById(e)){const n=t.closest("form");if(!n)throw new Error("Geen form gevonden");if(e=n.dataset.tableid,!e||!document.getElementById(e))throw new Error("DataTable not found")}r={DataTableId:e,"DataTableSelection[]":Object(o.fnGetSelection)("#"+e)},a=t=>{if(Object(o.isDataTableResponse)(t))Object(o.fnUpdateDataTable)("#"+e,t),t.modal?Object(s.a)(t.modal):Object(l.a)();else{if("string"!=typeof t)throw new Error("Niets met deze response: "+t);Object(s.a)(t)}},t.classList.contains("SingleRow")||(n=null)}t.classList.contains("ReloadPage")?a=d.b:t.classList.contains("redirect")&&(a=d.a);const c=t.getAttribute("href");if(!c)throw new Error("Knop heeft geen href");Object(i.a)(e,c,r,n,a,f.p)}function g(t){t.preventDefault();const e=t.target;return r()(e).hasClass("range")?("INPUT"===e.tagName.toUpperCase()?Object(c.d)(t):Object(c.f)(t),!1):(p(this,"POST"),!1)}function m(t,e){return t.preventDefault(),p(e,"GET"),!1}function h(t,e){const n=e;if(!(n instanceof HTMLElement))throw new Error("Knop vergroot klik heeft geen target");const{vergroot:a,vergrootOud:o}=n.dataset;if(!a)throw new Error("Knop vergroot heeft geen data-vergroot");const i=n.querySelector("span.fa");if(!i)throw new Error("knopVergroot heeft geen icon");o?(r()(a).animate({height:o},600),delete n.dataset.vergrootOud,i.classList.replace("fa-compress","fa-expand"),n.title="Uitklappen"):(n.title="Inklappen",i.classList.replace("fa-expand","fa-compress"),n.dataset.vergrootOud=String(r()(a).height()),r()(a).animate({height:r()(a).prop("scrollHeight")+1},600))}},19:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return i}));var a=n(0),r=n.n(a);function o(t=""){const e=r()("#modal"),n=r()(".modal-backdrop");return(""!==e.html()||""!==t)&&(n.length&&n.remove(),""!==t&&(e.replaceWith(t),e.find("input:visible:first").trigger("focus")),e.modal("show"),r()(document.body).trigger("modalOpen"),!0)}function i(){r()("#modal").modal("hide"),r()(document.body).trigger("modalClose")}},20:function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return d}));var a=n(0),r=n.n(a),o=n(19),i=n(13),s=n.n(i),c=n(9);function l(t,e,n,a,i,l,d){a&&(a.classList.contains("noanim")?a.classList.contains("InlineForm")?Object.assign(Object(c.b)(".FormElement:first",a).style,{backgroundImage:'url("/images/loading-fb.gif")',backgroundPosition:"center right",backgroundRepeat:"no-repeat"}):a.classList.add("loading"):(r()(a).replaceWith(`<img alt="Laden" id="${a.id}" title="${e}" src="/images/loading-arrows.gif" />`),a=Object(c.b)(`img[title="${e}"]`))),s()({method:t,data:n,url:e}).then(t=>{a&&(r()(a).hasClass("noanim")?r()(a).hasClass("InlineForm")&&r()(a).find(".FormElement:first").css({"background-image":"","background-position":"","background-repeat":""}):r()(a).hide(),a.classList.remove("loading")),i(t.data)}).catch(t=>{a?r()(a).replaceWith('<img alt="Mislukt" title="'+t.message+'" src="/plaetjes/famfamfam/cancel.png" />'):Object(o.a)(),l&&(t.message.startsWith("<!DOC")&&l("Er ging iets fout, code is: "+t.code),l(t.message))}).then(()=>{d&&d()})}function d(t,e){return r()(e+" .aanmeldbtn").addClass("loading"),r.a.ajax({cache:!1,data:"",type:"GET",url:t}).done(t=>{r()(e).replaceWith(t)}).fail((t,n,a)=>{throw r()(e+" .aanmeldbtn").replaceWith(r()(`<div class="alert alert-danger"><strong>Actie mislukt!</strong> ${a}</div>`)),new Error(t.responseText)}),!0}},23:function(t,e,n){"use strict";n.r(e),n.d(e,"isDataTableResponse",(function(){return c})),n.d(e,"initDataTable",(function(){return l})),n.d(e,"initOfflineDataTable",(function(){return d})),n.d(e,"fnUpdateDataTable",(function(){return u})),n.d(e,"fnGetSelection",(function(){return f})),n.d(e,"getApiFromSettings",(function(){return p})),n.d(e,"fnGetLastUpdate",(function(){return g})),n.d(e,"fnSetLastUpdate",(function(){return m})),n.d(e,"fnAjaxUpdateCallback",(function(){return h})),n.d(e,"replacePlaceholders",(function(){return b}));var a=n(0),r=n.n(a),o=n(12),i=n(3),s=n(77);function c(t){return"object"==typeof t&&"lastUpdate"in t&&"autoUpdate"in t&&"data"in t}async function l(t){await Promise.all([n.e(4),n.e(11)]).then(n.bind(null,89));const e=r()(t),a=e.data("settings"),i=e.data("search");a.ajax&&(a.ajax.data.lastUpdate=g(e),a.ajax.dataSrc=h(e)),a.columns.forEach(t=>t.render=s.a[t.render]);const c=e.DataTable(a);e.dataTable().api().search(i),c.on("page",()=>c.rows({selected:!0}).deselect()),c.on("childRow.dt",(t,e)=>Object(o.b)(e.container.get(0)))}async function d(t){await Promise.all([n.e(4),n.e(11)]).then(n.bind(null,89)),r()(t).DataTable(Object(i.m)(t))}function u(t,e){const n=r()(t).DataTable();e.data.forEach(t=>{const e=r()('tr[data-uuid="'+t.UUID+'"]');1===e.length?"remove"in t?n.row(e).remove():(n.row(e).data(t),Object(o.b)(e.get(0))):0===e.length?n.row.add(t):alert(e.length)}),n.draw(!1)}function f(t){const e=[];return r()(t+" tbody tr.selected").each((function(){const t=r()(this).attr("data-uuid");if(!t)throw new Error("Tablerow heeft geen uuid");e.push(t)})),e}function p(t){return new r.a.fn.dataTable.Api(t)}const g=t=>()=>Number(t.data("lastupdate")),m=t=>e=>t.data("lastupdate",e),h=t=>e=>{m(t)(e.lastUpdate);const n=t.DataTable();if(e.autoUpdate){const a=parseInt(e.autoUpdate,10);!isNaN(a)&&a<6e5&&setTimeout(()=>{r.a.post(n.ajax.url(),{lastUpdate:g(t)},e=>{const n=t.attr("id");if(!n)throw new Error("Table heeft geen id");u(n,e),h(t)(e)})},a)}return function(t){const e=t.parent();if(e.hasClass("dataTables_scrollBody")){const t=e.scrollTop(),n=e.innerHeight();if(!t||!n)throw new Error("$scroll heeft geen top of height");t+n>=e[0].scrollHeight-20&&window.setTimeout(()=>{e.animate({scrollTop:e[0].scrollHeight},800)},200)}}(t),e.data};function b(t,e){const n=/:(\w+)/g.exec(t);if(!n)return t;for(let a=1;a<n.length;a++)t=t.replace(":"+n[a],e[n[a]]);return t}},34:function(t,e,n){"use strict";n.d(e,"f",(function(){return d})),n.d(e,"a",(function(){return u})),n.d(e,"h",(function(){return f})),n.d(e,"g",(function(){return m})),n.d(e,"e",(function(){return h})),n.d(e,"b",(function(){return b})),n.d(e,"c",(function(){return v})),n.d(e,"d",(function(){return j}));var a=n(0),r=n.n(a),o=n(45),i=n(20),s=n(14),c=n(9),l=n(3);function d(t){let e=t.target;if("IMG"===e.tagName.toUpperCase()&&(e=Object(c.a)(e)),r()(e).find("input").prop("checked",!0),r()(e).hasClass("confirm")&&!confirm(r()(e).attr("title")+".\n\nWeet u het zeker?"))return!1;r()('input[name="'+r()(e).find("input:first").attr("name")+'"]:visible').each((function(){if(r()(this).prop("checked")){const t=r()(e).parent().attr("href"),n=r()(e).parent().attr("post");if(!t||!n)throw new Error("Element heeft geen href of post");Object(i.a)("POST",t,n,e.parentElement,s.a,l.p)}}))}function u(){const t=r()("#suggesties-tabel");t.find("tr:visible:odd").css("background-color","#FAFAFA"),t.find("tr:visible:even").css("background-color","#EBEBEB")}function f(t,e){r()("#suggesties-tabel ."+t).each((function(){let n=0;void 0!==e?e?r()(this).removeClass(t+"verborgen"):r()(this).addClass(t+"verborgen"):r()(this).toggleClass(t+"verborgen"),r()(this).hasClass("geenvoorkeurverborgen")&&n++,r()(this).hasClass("recentverborgen")&&n++,r()(this).hasClass("jongsteverborgen")&&n++,r()(this).hasClass("oudereverborgen")&&n++,n>0?r()(this).hide():r()(this).show()})),u()}function p(t,e){"taak-datum-head-"+t===r()("#maalcie-tabel tr:visible").eq(e).attr("id")&&r()("#taak-datum-head-first").toggleClass("verborgen")}function g(){r()("tr.taak-datum-summary:visible:odd th").css("background-color","#FAFAFA"),r()("tr.taak-datum-summary:visible:even th").css("background-color","#f5f5f5")}function m(t){p(t,0),r()(".taak-datum-"+t).toggleClass("verborgen"),p(t,1),g()}function h(){r()("#taak-datum-head-first").removeClass("verborgen"),r()("tr.taak-datum-oud").removeClass("verborgen"),g()}function b(t){let e=t.target;"IMG"===e.tagName.toUpperCase()&&(e=Object(c.a)(e));const n=o.a.el;n&&n.attr("id")!==e.id&&t.preventDefault()}function v(t){var e;t.preventDefault();let n=t.target;"IMG"===n.tagName.toUpperCase()&&(n=Object(c.a)(n));const a=null===(e=o.a.el)||void 0===e?void 0:e.get(0);if(!a||!confirm("Toegekende corveepunten worden meegeruild!\n\nDoorgaan met ruilen?"))return;let r=a.getAttribute("uid");r||(r="");const d=n.getAttribute("href");if(!d)throw new Error("Element heeft geen href");Object(i.a)("POST",d,"uid="+r,n,s.a,l.p),r=n.getAttribute("uid"),r||(r=""),Object(i.a)("POST",d,"uid="+r,a,s.a,l.p)}let w;function j(t){const e=t.target;if(!e)throw new Error("Er is geen target");let n=!1;r()("#maalcie-tabel").find('tbody tr td a input[name="'+r()(e).attr("name")+'"]:visible').each((function(){const e=r()(this).attr("id");if(e===w&&(n=!n),e===t.target.id){n=!n;const t=r()(this).prop("checked");setTimeout(()=>{r()("#"+e).prop("checked",t)},50)}else t.shiftKey&&n&&r()(this).prop("checked",!0)})),w=t.target.id}},45:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var a=n(0),r=n.n(a);const o={el:void 0};r()(()=>{let t,e,n;function a(){return document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft}function i(){return document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop}function s(t){return t.pageX?t.pageX:t.clientX?t.clientX+a():0}function c(t){return t.pageY?t.pageY:t.clientY?t.clientY+i():0}function l(r){if(!o.el)return;const l=o.el,d=s(r),u=c(r);t=l.hasClass("savepos");const f=l.scrollTop()||0,p=l.scrollLeft()||0;if(l.hasClass("dragvertical"))l.scrollTop(f+n-u);else if(l.hasClass("draghorizontal"))l.scrollLeft(p+e-d);else{const t=l.offset()||{left:0,top:0};l.css({left:t.left-a()+d-e+"px",top:t.top-i()+u-n+"px"})}e=d,n=u}window.addEventListener("mousedown",(function(a){const i=a.target;if(i instanceof Element){const t=i.tagName.toUpperCase(),d=r()(i).css("overflow");if("DIV"!==t&&"H1"!==t||"auto"===d||"scroll"===d)return;o.el=r()(i),void 0!==o.el&&o.el.hasClass("dragobject")||(o.el=r()(i).closest(".dragobject")),void 0!==o.el?(e=s(a),n=c(a),window.addEventListener("mousemove",l,!0)):o.el=void 0}t=!1}),!1),window.addEventListener("mouseup",(function(){if(o.el){if(window.removeEventListener("mousemove",l,!0),t){const e=o.el;let n,s;if(e.hasClass("dragvertical")||e.hasClass("draghorizontal"))n=e.scrollTop(),s=e.scrollLeft();else{const t=e.offset()||{top:0,left:0};n=t.top-i(),s=t.left-a()}r.a.post("/tools/dragobject",{coords:{left:s,top:n},id:e.attr("id")}),t=!1}o.el=void 0}}),!1)})},52:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return o}));var a=n(14);function r(t){"string"!=typeof t||'<div id="modal" '!==t.substring(0,16)?location.reload():Object(a.a)(t)}function o(t){'<div id="modal" '!==t.substring(0,16)?window.location.href=t:Object(a.a)(t)}},77:function(t,e,n){"use strict";var a=n(28),r=n.n(a),o=n(3),i=n(23);e.a={default(t,e){if(null===t||"object"!=typeof t)return t;switch(e){case"sort":return t.sort;case"export":return t.export;default:return t.display}},bedrag:t=>Object(o.e)(t),check:t=>'<span class="ico '+(t?"tick":"cross")+'"></span>',aanmeldFilter:t=>t?`<span class="ico group_key" title="Aanmeld filter actief: '${t}'"></span>`:"",aanmeldingen:(t,e,n)=>n.aantal_aanmeldingen+" ("+n.aanmeld_limiet+")",totaalPrijs:(t,e,n)=>Object(o.e)(n.aantal_aanmeldingen*parseInt(n.prijs,10)),datetime:t=>Number(t)==t?r()(1e3*t).format("YYYY-MM-DD HH:mm"):t?"<time"===t.substr(0,5)?t:r()(t).format("YYYY-MM-DD HH:mm"):"",timeago(t,e,n,a){const r=Object(i.getApiFromSettings)(a.settings).cell(a.row,a.col).node().firstChild;switch(e){case"sort":case"export":return r.dateTime;default:return t}},filesize(t,e){switch(e){case"sort":return Number(t);default:return Object(o.f)(t)}}}},91:function(t,e,n){var a={"./nl":76,"./nl.js":76};function r(t){var e=o(t);return n(e)}function o(t){if(!n.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}r.keys=function(){return Object.keys(a)},r.resolve=o,t.exports=r,r.id=91}}]);
//# sourceMappingURL=knop.8c00254ac534083dbeed.chunk.js.map