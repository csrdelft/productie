"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3099],{3099:(e,n,s)=>{s.r(n),s.d(n,{instellingOpslaan:()=>u});var i=s(1339),t=s.n(i),r=s(1518),o=s(5946);const a=document.getElementsByTagName("meta")["vapid-public-key"].content;let c=!1;const l=async e=>{switch(e){case"ja":return(async()=>{if(!c)return;const e=await Notification.requestPermission();if("denied"===e)throw new Error("The user explicitly denied the permission request.");"granted"===e&&console.info("The user accepted the permission request.");const n=await navigator.serviceWorker.ready;if(await(null==n?void 0:n.pushManager.getSubscription()))return void console.info("User is already subscribed.");const s={userVisibleOnly:!0,applicationServerKey:(0,o.Mp)(a)},i=await n.pushManager.subscribe(s);if(i)try{const e=await fetch("/push-abonnement",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!e.ok)throw new Error("Bad status code from server.");const n=await e.json();if(!n||!n.success)throw new Error("Bad response from server.");console.info("Successfully subscribed to push notifications.")}catch(e){throw await(null==i?void 0:i.unsubscribe()),e}})();case"nee":return(async()=>{var e;if(!c)return;const n=await navigator.serviceWorker.ready,s=null!==(e=await(null==n?void 0:n.pushManager.getSubscription()))&&void 0!==e?e:null;if(!s)throw new Error("No existing subscription");const i=await fetch("/push-abonnement",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({endpoint:s.endpoint})});if(!i.ok)throw new Error("Bad status code from server.");const t=await i.json();if(!t||!t.success)throw new Error("Bad response from server.");await(null==s?void 0:s.unsubscribe())&&console.info("Successfully unsubscribed from push notifications.")})()}};(async()=>{const e=await navigator.serviceWorker.ready;if("serviceWorker"in navigator&&"PushManager"in window&&void 0!==e&&"pushManager"in e){if(navigator.userAgent.includes("iPhone")||navigator.userAgent.includes("Macintosh")&&"ontouchend"in document){const e=window.matchMedia("(display-mode: fullscreen)").matches||window.matchMedia("(display-mode: standalone)").matches;c=e}else c=!0}if(!c){(0,r.Ys)("#instelling-forum-meldingPush").classList.add("d-none")}})();const u=async e=>{e.preventDefault();const n=e.target;let s=null,i=null;if(n.classList.add("loading"),n instanceof HTMLInputElement||n instanceof HTMLSelectElement){if(!n.checkValidity())return!1;s=n.dataset.href,i=n.value}else n instanceof HTMLAnchorElement&&(s=n.href);if(!s)throw new Error("Geen url gevonden voor instelling");try{if(s.includes("meldingPush")){const e=/meldingPush\/(\w+)/g.exec(s);await l(e[1])}await t().post(s,{waarde:i}),document.querySelectorAll(".instellingen-bericht").forEach((e=>e.classList.remove("d-none"))),n.classList.remove("loading")}catch(e){console.error(e)}}}}]);
//# sourceMappingURL=3099.6b905303759858769824.chunk.js.map