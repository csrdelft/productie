{"remainingRequest":"/home/travis/build/csrdelft/csrdelft.nl/node_modules/babel-loader/lib/index.js??ref--1-1!/home/travis/build/csrdelft/csrdelft.nl/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/travis/build/csrdelft/csrdelft.nl/resources/assets/js/components/peilingen/Peiling.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/travis/build/csrdelft/csrdelft.nl/resources/assets/js/components/peilingen/Peiling.vue","mtime":1545951909668},{"path":"/home/travis/build/csrdelft/csrdelft.nl/node_modules/cache-loader/dist/cjs.js","mtime":1545951596000},{"path":"/home/travis/build/csrdelft/csrdelft.nl/node_modules/babel-loader/lib/index.js","mtime":1545951596000},{"path":"/home/travis/build/csrdelft/csrdelft.nl/node_modules/vue-loader/lib/index.js","mtime":1545951597000}],"contextDependencies":[],"result":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _axios = require('axios');\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nvar _PeilingOptieToevoegen = require('./PeilingOptieToevoegen');\n\nvar _PeilingOptieToevoegen2 = _interopRequireDefault(_PeilingOptieToevoegen);\n\nvar _PeilingOptie = require('./PeilingOptie');\n\nvar _PeilingOptie2 = _interopRequireDefault(_PeilingOptie);\n\nvar _Icon = require('../common/Icon');\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexports.default = {\n\tname: 'Peiling',\n\tcomponents: { Icon: _Icon2.default, PeilingOptie: _PeilingOptie2.default, PeilingOptieToevoegen: _PeilingOptieToevoegen2.default },\n\tprops: {\n\t\tid: Number,\n\t\ttitel: String,\n\t\tbeschrijving: String,\n\t\tresultaatZichtbaar: Boolean,\n\t\taantalVoorstellen: Number,\n\t\taantalKeuzes: Number,\n\t\taantalStemmen: Number,\n\t\trechtenStemmen: String,\n\t\tisMod: Boolean,\n\t\theeftGestemd: Boolean,\n\t\topties: {\n\t\t\ttype: Array,\n\t\t\tdefault: function _default() {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t}\n\t},\n\tdata: function data() {\n\t\treturn {\n\t\t\talleOpties: [],\n\t\t\tdataHeeftGestemd: false,\n\t\t\tdataAantalStemmen: 0,\n\t\t\tzoekterm: '',\n\t\t\thuidigePagina: 1,\n\t\t\tpaginaSize: 5\n\t\t};\n\t},\n\tcreated: function created() {\n\t\tvar _this = this;\n\n\t\t// Sla opties op in een data attribuut, deze wordt niet van boven veranderd,\n\t\t// maar wel wanneer er een request wordt gedaan.\n\t\tthis.alleOpties = this.opties;\n\t\tthis.dataHeeftGestemd = this.heeftGestemd;\n\t\tthis.dataAantalStemmen = this.aantalStemmen;\n\n\t\t// Als er op deze pagina een modal gesloten wordt is dat misschien die van\n\t\t// de optie toevoegen modal. Dit is de enige manier om dit te weten op dit moment\n\t\t$(document.body).on('modalClose', function () {\n\t\t\t_this.reload();\n\t\t});\n\t},\n\n\tcomputed: {\n\t\tbeheerUrl: function beheerUrl() {\n\t\t\treturn '/peilingen/beheer/' + this.id;\n\t\t},\n\t\tselected: function selected() {\n\t\t\treturn this.alleOpties.filter(function (o) {\n\t\t\t\treturn o.selected;\n\t\t\t});\n\t\t},\n\t\toptiesFiltered: function optiesFiltered() {\n\t\t\tvar _this2 = this;\n\n\t\t\treturn this.alleOpties.filter(function (o) {\n\t\t\t\treturn o.titel.toLowerCase().includes(_this2.zoekterm.toLowerCase());\n\t\t\t});\n\t\t},\n\t\toptiesZichtbaar: function optiesZichtbaar() {\n\t\t\tvar begin = (this.huidigePagina - 1) * this.paginaSize;\n\t\t\tvar eind = begin + this.paginaSize;\n\n\t\t\treturn this.optiesFiltered.slice(begin, eind);\n\t\t},\n\t\tkeuzesOver: function keuzesOver() {\n\t\t\treturn this.aantalKeuzes - this.selected.length > 0;\n\t\t},\n\t\tstrKeuzes: function strKeuzes() {\n\t\t\treturn this.selected.length + ' van de ' + this.aantalKeuzes + ' geselecteerd';\n\t\t},\n\t\tstrAantalStemmen: function strAantalStemmen() {\n\t\t\treturn this.dataAantalStemmen > 0 ? '(' + this.dataAantalStemmen + ' stem' + (this.dataAantalStemmen > 1 ? 'men' : '') + ')' : '';\n\t\t},\n\t\tzoekbalkZichtbaar: function zoekbalkZichtbaar() {\n\t\t\treturn this.alleOpties.length > 10;\n\t\t}\n\t},\n\tmethods: {\n\t\tstem: function stem() {\n\t\t\tvar _this3 = this;\n\n\t\t\t_axios2.default.post('/peilingen/stem/' + this.id, {\n\t\t\t\topties: this.selected.map(function (o) {\n\t\t\t\t\treturn o.id;\n\t\t\t\t})\n\t\t\t}).then(function () {\n\t\t\t\t_this3.dataHeeftGestemd = true; // To data\n\t\t\t\t_this3.dataAantalStemmen = _this3.dataAantalStemmen + _this3.selected.length;\n\t\t\t\t_this3.reload();\n\t\t\t});\n\t\t},\n\t\treload: function reload() {\n\t\t\tvar _this4 = this;\n\n\t\t\t_axios2.default.post('/peilingen/opties/' + this.id).then(function (response) {\n\t\t\t\t_this4.alleOpties = response.data.data;\n\t\t\t});\n\t\t}\n\t}\n};",{"version":3,"sources":["Peiling.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n\t<div class=\"card peiling\">\n\t\t<div class=\"card-body\">\n\t\t\t<a :href=\"beheerUrl\" v-if=\"isMod\" class=\"bewerken\">\n\t\t\t\t<Icon icon=\"pencil\"/>\n\t\t\t</a>\n\t\t\t<span class=\"totaal\">{{strAantalStemmen}}</span>\n\t\t\t<h3 class=\"card-title\">{{titel}}</h3>\n\t\t\t<p class=\"card-text pt-2\" v-html=\"beschrijving\"></p>\n\t\t</div>\n\t\t<div>\n\t\t\t<div v-if=\"dataHeeftGestemd && !resultaatZichtbaar\">\n\t\t\t\t<div class=\"card-body\">Bedankt voor het stemmen!</div>\n\t\t\t</div>\n\t\t\t<div v-else class=\"card-body\">\n\t\t\t\t<div v-if=\"zoekbalkZichtbaar\" class=\"pb-2\">\n\t\t\t\t\t<input type=\"text\" placeholder=\"Zoeken\" v-model=\"zoekterm\" class=\"form-control\"/>\n\t\t\t\t</div>\n\t\t\t\t<ul class=\"list-group list-group-flush\">\n\t\t\t\t\t<li class=\"list-group-item\" v-for=\"optie in optiesZichtbaar\">\n\t\t\t\t\t\t<PeilingOptie\n\t\t\t\t\t\t\tv-model=\"optie.selected\"\n\t\t\t\t\t\t\t:key=\"optie.id\"\n\t\t\t\t\t\t\t:id=\"optie.id\"\n\t\t\t\t\t\t\t:peilingId=\"optie.peiling_id\"\n\t\t\t\t\t\t\t:titel=\"optie.titel\"\n\t\t\t\t\t\t\t:beschrijving=\"optie.beschrijving\"\n\t\t\t\t\t\t\t:stemmen=\"optie.stemmen\"\n\t\t\t\t\t\t\t:selected=\"optie.selected\"\n\t\t\t\t\t\t\t:ingebrachtDoor=\"optie.ingebracht_door\"></PeilingOptie>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t\t<b-pagination\n\t\t\t\t\tsize=\"md\"\n\t\t\t\t\talign=\"center\"\n\t\t\t\t\tv-model=\"huidigePagina\"\n\t\t\t\t\t:limit=\"15\"\n\t\t\t\t\t:total-rows=\"optiesFiltered.length\"\n\t\t\t\t\t:per-page=\"paginaSize\">\n\t\t\t\t</b-pagination>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div v-if=\"!dataHeeftGestemd\" class=\"card-footer footer\">\n\t\t\t<div>{{strKeuzes}}</div>\n\t\t\t<PeilingOptieToevoegen v-if=\"aantalVoorstellen > 0\"></PeilingOptieToevoegen>\n\n\t\t\t<input\n\t\t\t\ttype=\"button\"\n\t\t\t\tclass=\"btn btn-primary\"\n\t\t\t\tvalue=\"Stem\"\n\t\t\t\t:disabled=\"selected.length === 0\"\n\t\t\t\tv-on:click=\"stem\"/>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\n\timport axios from 'axios';\n\timport PeilingOptieToevoegen from './PeilingOptieToevoegen';\n\timport PeilingOptie from './PeilingOptie';\n\timport Icon from '../common/Icon';\n\n\texport default {\n\t\tname: 'Peiling',\n\t\tcomponents: {Icon, PeilingOptie, PeilingOptieToevoegen},\n\t\tprops: {\n\t\t\tid: Number,\n\t\t\ttitel: String,\n\t\t\tbeschrijving: String,\n\t\t\tresultaatZichtbaar: Boolean,\n\t\t\taantalVoorstellen: Number,\n\t\t\taantalKeuzes: Number,\n\t\t\taantalStemmen: Number,\n\t\t\trechtenStemmen: String,\n\t\t\tisMod: Boolean,\n\t\t\theeftGestemd: Boolean,\n\t\t\topties: {\n\t\t\t\ttype: Array,\n\t\t\t\tdefault: () => []\n\t\t\t}\n\t\t},\n\t\tdata: () => ({\n\t\t\talleOpties: [],\n\t\t\tdataHeeftGestemd: false,\n\t\t\tdataAantalStemmen: 0,\n\t\t\tzoekterm: '',\n\t\t\thuidigePagina: 1,\n\t\t\tpaginaSize: 5,\n\t\t}),\n\t\tcreated() {\n\t\t\t// Sla opties op in een data attribuut, deze wordt niet van boven veranderd,\n\t\t\t// maar wel wanneer er een request wordt gedaan.\n\t\t\tthis.alleOpties = this.opties;\n\t\t\tthis.dataHeeftGestemd = this.heeftGestemd;\n\t\t\tthis.dataAantalStemmen = this.aantalStemmen;\n\n\t\t\t// Als er op deze pagina een modal gesloten wordt is dat misschien die van\n\t\t\t// de optie toevoegen modal. Dit is de enige manier om dit te weten op dit moment\n\t\t\t$(document.body).on('modalClose', () => {\n\t\t\t\tthis.reload();\n\t\t\t});\n\t\t},\n\t\tcomputed: {\n\t\t\tbeheerUrl() {\n\t\t\t\treturn `/peilingen/beheer/${this.id}`;\n\t\t\t},\n\t\t\tselected() {\n\t\t\t\treturn this.alleOpties.filter((o) => o.selected);\n\t\t\t},\n\t\t\toptiesFiltered() {\n\t\t\t\treturn this.alleOpties.filter((o) => o.titel.toLowerCase().includes(this.zoekterm.toLowerCase()));\n\t\t\t},\n\t\t\toptiesZichtbaar() {\n\t\t\t\tlet begin = (this.huidigePagina - 1) * this.paginaSize;\n\t\t\t\tlet eind = begin + this.paginaSize;\n\n\t\t\t\treturn this.optiesFiltered.slice(begin, eind);\n\t\t\t},\n\t\t\tkeuzesOver() {\n\t\t\t\treturn this.aantalKeuzes - this.selected.length > 0;\n\t\t\t},\n\t\t\tstrKeuzes() {\n\t\t\t\treturn `${this.selected.length} van de ${this.aantalKeuzes} geselecteerd`;\n\t\t\t},\n\t\t\tstrAantalStemmen() {\n\t\t\t\treturn this.dataAantalStemmen > 0 ? `(${this.dataAantalStemmen} stem${this.dataAantalStemmen > 1 ? 'men' : ''})` : '';\n\t\t\t},\n\t\t\tzoekbalkZichtbaar() {\n\t\t\t\treturn this.alleOpties.length > 10;\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\tstem() {\n\t\t\t\taxios\n\t\t\t\t\t.post(`/peilingen/stem/${this.id}`, {\n\t\t\t\t\t\topties: this.selected.map((o) => o.id)\n\t\t\t\t\t})\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tthis.dataHeeftGestemd = true; // To data\n\t\t\t\t\t\tthis.dataAantalStemmen = this.dataAantalStemmen + this.selected.length;\n\t\t\t\t\t\tthis.reload();\n\t\t\t\t\t});\n\t\t\t},\n\t\t\treload() {\n\t\t\t\taxios\n\t\t\t\t\t.post(`/peilingen/opties/${this.id}`)\n\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\tthis.alleOpties = response.data.data;\n\t\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n</script>\n\n<style scoped>\n\t.bewerken, .totaal {\n\t\tfloat: right;\n\t}\n\n\t.footer {\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\tjustify-content: space-between;\n\t}\n</style>\n"],"sourceRoot":"js/components/peilingen"}]}