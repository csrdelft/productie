{"remainingRequest":"/home/travis/build/csrdelft/csrdelft.nl/node_modules/babel-loader/lib/index.js??ref--1-1!/home/travis/build/csrdelft/csrdelft.nl/node_modules/eslint-loader/index.js!/home/travis/build/csrdelft/csrdelft.nl/resources/assets/js/csrdelft.js","dependencies":[{"path":"/home/travis/build/csrdelft/csrdelft.nl/resources/assets/js/csrdelft.js","mtime":1545952214413},{"path":"/home/travis/build/csrdelft/csrdelft.nl/node_modules/cache-loader/dist/cjs.js","mtime":1545951596000},{"path":"/home/travis/build/csrdelft/csrdelft.nl/node_modules/babel-loader/lib/index.js","mtime":1545951596000},{"path":"/home/travis/build/csrdelft/csrdelft.nl/node_modules/eslint-loader/index.js","mtime":1545951596000}],"contextDependencies":[],"result":["'use strict';\n\nvar _jquery = require('jquery');\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _context = require('./context');\n\nvar _context2 = _interopRequireDefault(_context);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * csrdelft.nl javascript libje...\n */\n\nfunction initGeolocation() {\n    // eslint-disable-line\n\n    var previousPos = false;\n\n    function positionSave(position) {\n        if (!previousPos || (0, _jquery2.default)(previousPos.coords).not(position.coords).length === 0 && (0, _jquery2.default)(position.coords).not(previousPos.coords).length === 0) {\n            previousPos = position;\n            _jquery2.default.post('/geolocation/save', {\n                coords: position.coords,\n                timestamp: Math.round(position.timestamp / 1000)\n            });\n        }\n    }\n\n    /**\n     * @param {PositionError} error\n     */\n    function positionError(error) {\n        switch (error.code) {\n            case error.PERMISSION_DENIED:\n                break;\n            case error.POSITION_UNAVAILABLE:\n                break;\n            case error.TIMEOUT:\n                break;\n        }\n    }\n\n    if (navigator.geolocation) {\n        navigator.geolocation.watchPosition(positionSave, positionError);\n    }\n}\n\nfunction initSluitMeldingen() {\n    (0, _jquery2.default)('#melding').on('click', '.alert', function () {\n        (0, _jquery2.default)(this).slideUp(400, function () {\n            (0, _jquery2.default)(this).remove();\n        });\n    });\n}\n\nfunction zijbalkScrollFixed() {\n    var elmnt = (0, _jquery2.default)('#zijbalk');\n    if (!elmnt.length || !elmnt.hasClass('scroll-fixed')) {\n        return;\n    }\n\n    if (elmnt.hasClass('desktop-only') && /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {\n        elmnt.removeClass('desktop-only scroll-fixed dragobject dragvertical scroll-hover');\n        return;\n    }\n\n    // adjust to container size\n    (0, _jquery2.default)(window).on('resize', function () {\n        elmnt.css('height', document.documentElement.clientHeight);\n    });\n    (0, _jquery2.default)(window).trigger('resize');\n\n    // fix position on screen\n    (0, _jquery2.default)(window).on('scroll', function () {\n        elmnt.css({\n            'top': (0, _jquery2.default)(window).scrollTop()\n        });\n    });\n\n    // set scroll position\n    elmnt.scrollTop(Number(elmnt.attr('data-scrollfix')));\n\n    // remember scroll position\n    var trigger = false;\n\n    function saveCoords() {\n        _jquery2.default.post('/tools/dragobject', {\n            id: 'zijbalk',\n            coords: {\n                top: elmnt.scrollTop(),\n                left: elmnt.scrollLeft()\n            }\n        });\n        trigger = false;\n    }\n\n    elmnt.on('scroll', function () {\n        if (!trigger) {\n            trigger = true;\n            (0, _jquery2.default)(window).one('mouseup', saveCoords);\n        }\n    });\n\n    // show-hide scrollbar\n    if (elmnt.hasClass('scroll-hover')) {\n        var showscroll = function showscroll() {\n            if (elmnt.get(0).scrollHeight > elmnt.get(0).clientHeight) {\n                elmnt.css({\n                    'overflow-y': 'scroll'\n                });\n            }\n        };\n        var hidescroll = function hidescroll() {\n            elmnt.css({\n                'overflow-y': 'hidden'\n            });\n        };\n        elmnt.hover(showscroll, hidescroll);\n    }\n}\n\n(0, _jquery2.default)(function () {\n    zijbalkScrollFixed();\n    initSluitMeldingen();\n    (0, _context2.default)((0, _jquery2.default)('body'));\n\n    var modal = (0, _jquery2.default)('#modal');\n    if (modal.html() !== '') {\n        modal.modal();\n    }\n    //initGeolocation();\n});",{"version":3,"sources":["resources/assets/js/csrdelft.js"],"names":["initGeolocation","previousPos","positionSave","position","coords","not","length","$","post","timestamp","Math","round","positionError","error","code","PERMISSION_DENIED","POSITION_UNAVAILABLE","TIMEOUT","navigator","geolocation","watchPosition","initSluitMeldingen","on","slideUp","remove","zijbalkScrollFixed","elmnt","hasClass","test","userAgent","removeClass","window","css","document","documentElement","clientHeight","trigger","scrollTop","Number","attr","saveCoords","id","top","left","scrollLeft","one","showscroll","get","scrollHeight","hidescroll","hover","modal","html"],"mappings":"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","file":"csrdelft.js","sourceRoot":"/home/travis/build/csrdelft/csrdelft.nl","sourcesContent":["/**\n * csrdelft.nl javascript libje...\n */\n\nimport $ from 'jquery';\n\nimport initContext from './context';\n\nfunction initGeolocation() { // eslint-disable-line\n\n\tlet previousPos = false;\n\n    function positionSave(position) {\n        if (!previousPos || ($(previousPos.coords).not(position.coords).length === 0 && $(position.coords).not(previousPos.coords).length === 0)) {\n            previousPos = position;\n            $.post('/geolocation/save', {\n                coords: position.coords,\n                timestamp: Math.round(position.timestamp / 1000)\n            });\n        }\n    }\n\n    /**\n     * @param {PositionError} error\n     */\n    function positionError(error) {\n        switch (error.code) {\n            case error.PERMISSION_DENIED:\n                break;\n            case error.POSITION_UNAVAILABLE:\n                break;\n            case error.TIMEOUT:\n                break;\n        }\n    }\n\n    if (navigator.geolocation) {\n        navigator.geolocation.watchPosition(positionSave, positionError);\n    }\n}\n\nfunction initSluitMeldingen() {\n    $('#melding').on('click', '.alert', function () {\n        $(this).slideUp(400, function () {\n            $(this).remove();\n        });\n    });\n}\n\nfunction zijbalkScrollFixed() {\n    let elmnt = $('#zijbalk');\n    if (!elmnt.length || !elmnt.hasClass('scroll-fixed')) {\n        return;\n    }\n\n    if (elmnt.hasClass('desktop-only') && /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {\n        elmnt.removeClass('desktop-only scroll-fixed dragobject dragvertical scroll-hover');\n        return;\n    }\n\n    // adjust to container size\n    $(window).on('resize', () => {\n        elmnt.css('height', document.documentElement.clientHeight);\n    });\n    $(window).trigger('resize');\n\n    // fix position on screen\n    $(window).on('scroll', () => {\n        elmnt.css({\n            'top': $(window).scrollTop()\n        });\n    });\n\n    // set scroll position\n    elmnt.scrollTop(Number(elmnt.attr('data-scrollfix')));\n\n    // remember scroll position\n    let trigger = false;\n\n    function saveCoords() {\n        $.post('/tools/dragobject', {\n            id: 'zijbalk',\n            coords: {\n                top: elmnt.scrollTop(),\n                left: elmnt.scrollLeft()\n            }\n        });\n        trigger = false;\n    }\n\n    elmnt.on('scroll', function () {\n        if (!trigger) {\n            trigger = true;\n            $(window).one('mouseup', saveCoords);\n        }\n    });\n\n    // show-hide scrollbar\n    if (elmnt.hasClass('scroll-hover')) {\n        const showscroll = function () {\n            if (elmnt.get(0).scrollHeight > elmnt.get(0).clientHeight) {\n                elmnt.css({\n                    'overflow-y': 'scroll'\n                });\n            }\n        };\n        const hidescroll = function () {\n            elmnt.css({\n                'overflow-y': 'hidden'\n            });\n        };\n        elmnt.hover(showscroll, hidescroll);\n    }\n}\n\n$(() => {\n    zijbalkScrollFixed();\n    initSluitMeldingen();\n    initContext($('body'));\n\n    let modal = $('#modal');\n    if (modal.html() !== '') {\n        modal.modal();\n    }\n    //initGeolocation();\n});\n"]}]}