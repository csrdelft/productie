{"remainingRequest":"/home/travis/build/csrdelft/csrdelft.nl/node_modules/babel-loader/lib/index.js??ref--1-1!/home/travis/build/csrdelft/csrdelft.nl/node_modules/eslint-loader/index.js!/home/travis/build/csrdelft/csrdelft.nl/resources/assets/js/extern-defer.js","dependencies":[{"path":"/home/travis/build/csrdelft/csrdelft.nl/resources/assets/js/extern-defer.js","mtime":1545951909668},{"path":"/home/travis/build/csrdelft/csrdelft.nl/node_modules/cache-loader/dist/cjs.js","mtime":1545951596000},{"path":"/home/travis/build/csrdelft/csrdelft.nl/node_modules/babel-loader/lib/index.js","mtime":1545951596000},{"path":"/home/travis/build/csrdelft/csrdelft.nl/node_modules/eslint-loader/index.js","mtime":1545951596000}],"contextDependencies":[],"result":["'use strict';\n\nvar _jquery = require('jquery');\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _context = require('./context');\n\nvar _context2 = _interopRequireDefault(_context);\n\nvar _bbcode = require('./bbcode');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nrequire('lightbox2'); /**\n                       * Wordt geladen als de pagina geladen is.\n                       */\n\nrequire('./lib/jquery.markitup');\nrequire('jquery-ui/ui/widgets/tooltip');\nrequire('jquery-hoverintent');\n\n_jquery2.default.widget.bridge('uitooltip', _jquery2.default.ui.tooltip);\n\nrequire('timeago');\n\nwindow.bbcode = {\n\tCsrBBPreview: _bbcode.CsrBBPreview,\n\tbbvideoDisplay: _bbcode.bbvideoDisplay\n};\n\nvar $window = (0, _jquery2.default)(window),\n    $body = (0, _jquery2.default)('body'),\n    $header = (0, _jquery2.default)('#header'),\n    $banner = (0, _jquery2.default)('#banner');\n\nif (typeof $banner[0] === 'undefined') {\n\t$banner = (0, _jquery2.default)('#banner-small');\n}\n\n$window.on('load', function () {\n\t// Lazy load cms pages, these should be loaded always, not on scroll\n\tsetTimeout(function () {\n\t\t(0, _jquery2.default)('div.bb-img-loading').each(function () {\n\t\t\tvar content = (0, _jquery2.default)(document.createElement('img'));\n\t\t\tcontent.on('error', function () {\n\t\t\t\t(0, _jquery2.default)(this).attr('title', 'Afbeelding bestaat niet of is niet toegankelijk!');\n\t\t\t\t(0, _jquery2.default)(this).attr('src', '/plaetjes/famfamfam/picture_error.png');\n\t\t\t\t(0, _jquery2.default)(this).css('width', '16px');\n\t\t\t\t(0, _jquery2.default)(this).css('height', '16px');\n\t\t\t\t(0, _jquery2.default)(this).removeClass('bb-img-loading').addClass('bb-img');\n\t\t\t});\n\t\t\tcontent.addClass('bb-img');\n\t\t\tcontent.attr('alt', (0, _jquery2.default)(this).attr('title'));\n\t\t\tcontent.attr('style', (0, _jquery2.default)(this).attr('style'));\n\t\t\tcontent.attr('src', (0, _jquery2.default)(this).attr('src'));\n\t\t\t(0, _jquery2.default)(this).html(content);\n\t\t\tcontent.on('load', function () {\n\t\t\t\tvar foto = content.attr('src').indexOf('/plaetjes/fotoalbum/') >= 0;\n\t\t\t\tvar video = (0, _jquery2.default)(this).parent().parent().hasClass('bb-video-preview');\n\t\t\t\tvar hasAnchor = (0, _jquery2.default)(this).closest('a').length !== 0;\n\t\t\t\t(0, _jquery2.default)(this).parent().replaceWith((0, _jquery2.default)(this));\n\t\t\t\tif (!foto && !video && !hasAnchor) {\n\t\t\t\t\t(0, _jquery2.default)(this).wrap('<a class=\"lightbox-link\" href=\"' + (0, _jquery2.default)(this).attr('src') + '\" data-lightbox=\"page-lightbox\"></a>');\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t});\n});\n\nvar lazyLoad = function () {\n\tvar hasLoaded = false;\n\n\treturn function () {\n\t\tif (hasLoaded) {\n\t\t\treturn;\n\t\t}\n\n\t\thasLoaded = true;\n\n\t\t// Lazy load frontpage\n\t\tsetTimeout(function () {\n\t\t\t(0, _jquery2.default)('.lazy-load').each(function () {\n\t\t\t\t(0, _jquery2.default)(this).replaceWith(this.textContent);\n\t\t\t});\n\t\t});\n\t};\n}();\n\n// Lazy load after animations have finished and user has scrolled\n$window.on('scroll', function () {\n\tif ((0, _jquery2.default)(window).scrollTop() > 0) {\n\t\tlazyLoad();\n\t}\n\n\tif (window.pageYOffset > $banner.outerHeight()) {\n\t\t$header.removeClass('alt');\n\t} else {\n\t\t$header.addClass('alt');\n\t}\n});\n\n$window.on('resize', function () {\n\treturn $window.trigger('scroll');\n});\n$window.trigger('scroll');\n\n(0, _context2.default)($body);",{"version":3,"sources":["resources/assets/js/extern-defer.js"],"names":["require","$","widget","bridge","ui","tooltip","window","bbcode","CsrBBPreview","bbvideoDisplay","$window","$body","$header","$banner","on","setTimeout","each","content","document","createElement","attr","css","removeClass","addClass","html","foto","indexOf","video","parent","hasClass","hasAnchor","closest","length","replaceWith","wrap","lazyLoad","hasLoaded","textContent","scrollTop","pageYOffset","outerHeight","trigger"],"mappings":"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","file":"extern-defer.js","sourceRoot":"/home/travis/build/csrdelft/csrdelft.nl","sourcesContent":["/**\n * Wordt geladen als de pagina geladen is.\n */\nimport $ from 'jquery';\nimport initContext from './context';\nimport {bbvideoDisplay, CsrBBPreview} from './bbcode';\n\nrequire('lightbox2');\nrequire('./lib/jquery.markitup');\nrequire('jquery-ui/ui/widgets/tooltip');\nrequire('jquery-hoverintent');\n\n$.widget.bridge('uitooltip', $.ui.tooltip);\n\nrequire('timeago');\n\nwindow.bbcode = {\n\tCsrBBPreview,\n\tbbvideoDisplay,\n};\n\nlet $window = $(window),\n\t$body = $('body'),\n\t$header = $('#header'),\n\t$banner = $('#banner');\n\nif (typeof $banner[0] === 'undefined') {\n\t$banner = $('#banner-small');\n}\n\n$window.on('load', function () {\n\t// Lazy load cms pages, these should be loaded always, not on scroll\n\tsetTimeout(function () {\n\t\t$('div.bb-img-loading').each(function () {\n\t\t\tconst content = $(document.createElement('img'));\n\t\t\tcontent.on('error', function () {\n\t\t\t\t$(this).attr('title', 'Afbeelding bestaat niet of is niet toegankelijk!');\n\t\t\t\t$(this).attr('src', '/plaetjes/famfamfam/picture_error.png');\n\t\t\t\t$(this).css('width', '16px');\n\t\t\t\t$(this).css('height', '16px');\n\t\t\t\t$(this).removeClass('bb-img-loading').addClass('bb-img');\n\t\t\t});\n\t\t\tcontent.addClass('bb-img');\n\t\t\tcontent.attr('alt', $(this).attr('title'));\n\t\t\tcontent.attr('style', $(this).attr('style'));\n\t\t\tcontent.attr('src', $(this).attr('src'));\n\t\t\t$(this).html(content);\n\t\t\tcontent.on('load', function () {\n\t\t\t\tconst foto = content.attr('src').indexOf('/plaetjes/fotoalbum/') >= 0;\n\t\t\t\tconst video = $(this).parent().parent().hasClass('bb-video-preview');\n\t\t\t\tconst hasAnchor = $(this).closest('a').length !== 0;\n\t\t\t\t$(this).parent().replaceWith($(this));\n\t\t\t\tif (!foto && !video && !hasAnchor) {\n\t\t\t\t\t$(this).wrap(`<a class=\"lightbox-link\" href=\"${$(this).attr('src')}\" data-lightbox=\"page-lightbox\"></a>`);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t});\n});\n\nconst lazyLoad = (function () {\n\tlet hasLoaded = false;\n\n\treturn function () {\n\t\tif (hasLoaded) {\n\t\t\treturn;\n\t\t}\n\n\t\thasLoaded = true;\n\n\t\t// Lazy load frontpage\n\t\tsetTimeout(function () {\n\t\t\t$('.lazy-load').each(function () {\n\t\t\t\t$(this).replaceWith(this.textContent);\n\t\t\t});\n\t\t});\n\t};\n})();\n\n// Lazy load after animations have finished and user has scrolled\n$window.on('scroll', () => {\n\tif ($(window).scrollTop() > 0) {\n\t\tlazyLoad();\n\t}\n\n\tif (window.pageYOffset > $banner.outerHeight()) {\n\t\t$header.removeClass('alt');\n\t} else {\n\t\t$header.addClass('alt');\n\t}\n});\n\n$window.on('resize', () => $window.trigger('scroll'));\n$window.trigger('scroll');\n\ninitContext($body);\n"]}]}