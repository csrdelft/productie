{"remainingRequest":"/home/travis/build/csrdelft/csrdelft.nl/node_modules/babel-loader/lib/index.js??ref--1-1!/home/travis/build/csrdelft/csrdelft.nl/node_modules/eslint-loader/index.js!/home/travis/build/csrdelft/csrdelft.nl/resources/assets/js/knop.js","dependencies":[{"path":"/home/travis/build/csrdelft/csrdelft.nl/resources/assets/js/knop.js","mtime":1545950542032},{"path":"/home/travis/build/csrdelft/csrdelft.nl/node_modules/cache-loader/dist/cjs.js","mtime":1545950603485},{"path":"/home/travis/build/csrdelft/csrdelft.nl/node_modules/babel-loader/lib/index.js","mtime":1545950603465},{"path":"/home/travis/build/csrdelft/csrdelft.nl/node_modules/eslint-loader/index.js","mtime":1545950602957}],"contextDependencies":[],"result":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.radioButtonGroep = radioButtonGroep;\nexports.knopAjax = knopAjax;\nexports.knopPost = knopPost;\nexports.knopGet = knopGet;\nexports.knopVergroot = knopVergroot;\n\nvar _jquery = require('jquery');\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _modal = require('./modal');\n\nvar _ajax = require('./ajax');\n\nvar _context = require('./context');\n\nvar _context2 = _interopRequireDefault(_context);\n\nvar _maalcie = require('./maalcie');\n\nvar _datatableApi = require('./datatable-api');\n\nvar _util = require('./util');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction radioButtonGroep(parent) {\n    (0, _jquery2.default)(parent).find('[data-buttons=radio]').each(function () {\n        var container = (0, _jquery2.default)(this);\n\n        container.find('a.btn').on('click', function (event) {\n            container.find('.active').removeClass('active');\n\n            (0, _jquery2.default)(event.target).addClass('active');\n        });\n    });\n}\n\nfunction knopAjax(knop, type) {\n    if (knop.hasClass('confirm') && !confirm(knop.attr('title') + '.\\n\\nWeet u het zeker?')) {\n        (0, _modal.modalClose)();\n        return false;\n    }\n    var source = knop,\n        done = _context.domUpdate,\n        data = knop.data();\n\n    if (knop.hasClass('popup')) {\n        source = false;\n    }\n    if (knop.hasClass('prompt')) {\n        data = data.split('=');\n        var val = prompt(data[0], data[1]);\n        if (!val) {\n            return false;\n        }\n        data = encodeURIComponent(data[0]) + '=' + encodeURIComponent(val);\n    }\n    if (knop.hasClass('addfav')) {\n        data = {\n            'tekst': document.title.replace('C.S.R. Delft - ', ''),\n            'link': window.location.href\n        };\n    }\n    if (knop.hasClass('DataTableResponse')) {\n\n        var tableId = knop.attr('data-tableid');\n        if (!document.getElementById(tableId)) {\n            tableId = knop.closest('form').attr('data-tableid');\n            if (!document.getElementById(tableId)) {\n                alert('DataTable not found');\n            }\n        }\n\n        var selection = (0, _datatableApi.fnGetSelection)('#' + tableId);\n        data = {\n            'DataTableId': tableId,\n            'DataTableSelection[]': selection\n        };\n\n        done = function done(response) {\n            if ((typeof response === 'undefined' ? 'undefined' : _typeof(response)) === 'object') {\n                // JSON\n                (0, _datatableApi.fnUpdateDataTable)('#' + tableId, response);\n                if (response.modal) {\n                    (0, _modal.modalOpen)(response.modal);\n                    (0, _context2.default)((0, _jquery2.default)('#modal'));\n                } else {\n                    (0, _modal.modalClose)();\n                }\n            } else {\n                // HTML\n                (0, _context.domUpdate)(response);\n            }\n        };\n\n        if (!knop.hasClass('SingleRow')) {\n            source = false;\n        }\n    }\n    if (knop.hasClass('ReloadPage')) {\n        done = _util.reload;\n    } else if (knop.hasClass('redirect')) {\n        done = _util.redirect;\n    }\n\n    (0, _ajax.ajaxRequest)(type, knop.attr('href'), data, source, done, alert);\n}\n\n/**\n * @see datatable.js\n * @param event\n * @returns {boolean}\n */\nfunction knopPost(event) {\n    event.preventDefault();\n    if ((0, _jquery2.default)(this).hasClass('range')) {\n        if (event.target.tagName.toUpperCase() === 'INPUT') {\n            (0, _maalcie.takenSelectRange)(event);\n        } else {\n            (0, _maalcie.takenSubmitRange)(event);\n        }\n        return false;\n    }\n    knopAjax((0, _jquery2.default)(this), 'POST');\n    return false;\n}\n\nfunction knopGet(event) {\n    event.preventDefault();\n    knopAjax((0, _jquery2.default)(this), 'GET');\n    return false;\n}\n\nfunction knopVergroot() {\n    var knop = (0, _jquery2.default)(this),\n        id = knop.attr('data-vergroot'),\n        oud = knop.attr('data-vergroot-oud');\n\n    if (oud) {\n        (0, _jquery2.default)(id).animate({ 'height': oud }, 600);\n        knop.removeAttr('data-vergroot-oud');\n        knop.find('span.fa').removeClass('fa-compress').addClass('fa-expand');\n        knop.attr('title', 'Uitklappen');\n    } else {\n        knop.attr('title', 'Inklappen');\n        knop.find('span.fa').removeClass('fa-expand').addClass('fa-compress');\n        knop.attr('data-vergroot-oud', (0, _jquery2.default)(id).height());\n        (0, _jquery2.default)(id).animate({\n            'height': (0, _jquery2.default)(id).prop('scrollHeight') + 1\n        }, 600);\n    }\n}",{"version":3,"sources":["resources/assets/js/knop.js"],"names":["radioButtonGroep","knopAjax","knopPost","knopGet","knopVergroot","parent","find","each","container","on","event","removeClass","target","addClass","knop","type","hasClass","confirm","attr","source","done","domUpdate","data","split","val","prompt","encodeURIComponent","document","title","replace","window","location","href","tableId","getElementById","closest","alert","selection","response","modal","reload","redirect","preventDefault","tagName","toUpperCase","id","oud","animate","removeAttr","height","prop"],"mappings":"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","file":"knop.js","sourceRoot":"/home/travis/build/csrdelft/csrdelft.nl","sourcesContent":["import $ from 'jquery';\n\nimport {modalClose, modalOpen} from './modal';\nimport {ajaxRequest} from './ajax';\nimport initContext, {domUpdate} from './context';\nimport {takenSelectRange, takenSubmitRange} from './maalcie';\nimport {fnGetSelection, fnUpdateDataTable} from './datatable-api';\nimport {redirect, reload} from './util';\n\nexport function radioButtonGroep(parent) {\n\t$(parent).find('[data-buttons=radio]').each(function () {\n\t\tlet container = $(this);\n\n\t\tcontainer.find('a.btn').on('click', function (event) {\n\t\t\tcontainer.find('.active').removeClass('active');\n\n\t\t\t$(event.target).addClass('active');\n\t\t});\n\t});\n}\n\nexport function knopAjax(knop, type) {\n    if (knop.hasClass('confirm') && !confirm(knop.attr('title') + '.\\n\\nWeet u het zeker?')) {\n        modalClose();\n        return false;\n    }\n    let source = knop,\n        done = domUpdate,\n        data = knop.data();\n\n    if (knop.hasClass('popup')) {\n        source = false;\n    }\n    if (knop.hasClass('prompt')) {\n        data = data.split('=');\n        let val = prompt(data[0], data[1]);\n        if (!val) {\n            return false;\n        }\n        data = encodeURIComponent(data[0]) + '=' + encodeURIComponent(val);\n    }\n    if (knop.hasClass('addfav')) {\n        data = {\n            'tekst': document.title.replace('C.S.R. Delft - ', ''),\n            'link': window.location.href\n        };\n    }\n    if (knop.hasClass('DataTableResponse')) {\n\n        let tableId = knop.attr('data-tableid');\n        if (!document.getElementById(tableId)) {\n            tableId = knop.closest('form').attr('data-tableid');\n            if (!document.getElementById(tableId)) {\n                alert('DataTable not found');\n            }\n        }\n\n        let selection = fnGetSelection('#' + tableId);\n        data = {\n            'DataTableId': tableId,\n            'DataTableSelection[]': selection\n        };\n\n        done = function (response) {\n            if (typeof response === 'object') { // JSON\n                fnUpdateDataTable('#' + tableId, response);\n                if (response.modal) {\n                    modalOpen(response.modal);\n                    initContext($('#modal'));\n                }\n                else {\n                    modalClose();\n                }\n            }\n            else { // HTML\n                domUpdate(response);\n            }\n        };\n\n        if (!knop.hasClass('SingleRow')) {\n            source = false;\n        }\n    }\n    if (knop.hasClass('ReloadPage')) {\n        done = reload;\n    }\n    else if (knop.hasClass('redirect')) {\n        done = redirect;\n    }\n\n    ajaxRequest(type, knop.attr('href'), data, source, done, alert);\n}\n\n/**\n * @see datatable.js\n * @param event\n * @returns {boolean}\n */\nexport function knopPost(event) {\n    event.preventDefault();\n    if ($(this).hasClass('range')) {\n        if (event.target.tagName.toUpperCase() === 'INPUT') {\n            takenSelectRange(event);\n        }\n        else {\n            takenSubmitRange(event);\n        }\n        return false;\n    }\n    knopAjax($(this), 'POST');\n    return false;\n}\n\nexport function knopGet(event) {\n    event.preventDefault();\n    knopAjax($(this), 'GET');\n    return false;\n}\n\nexport function knopVergroot() {\n    let knop = $(this),\n        id = knop.attr('data-vergroot'),\n        oud = knop.attr('data-vergroot-oud');\n\n    if (oud) {\n        $(id).animate({'height': oud}, 600);\n        knop.removeAttr('data-vergroot-oud');\n        knop.find('span.fa').removeClass('fa-compress').addClass('fa-expand');\n        knop.attr('title', 'Uitklappen');\n    }\n    else {\n        knop.attr('title', 'Inklappen');\n        knop.find('span.fa').removeClass('fa-expand').addClass('fa-compress');\n        knop.attr('data-vergroot-oud', $(id).height());\n        $(id).animate({\n            'height': $(id).prop('scrollHeight') + 1\n        }, 600);\n    }\n}\n"]}]}