{"remainingRequest":"/home/travis/build/csrdelft/csrdelft.nl/node_modules/babel-loader/lib/index.js??ref--1-1!/home/travis/build/csrdelft/csrdelft.nl/node_modules/eslint-loader/index.js!/home/travis/build/csrdelft/csrdelft.nl/resources/assets/js/ajax.js","dependencies":[{"path":"/home/travis/build/csrdelft/csrdelft.nl/resources/assets/js/ajax.js","mtime":1545950542032},{"path":"/home/travis/build/csrdelft/csrdelft.nl/node_modules/cache-loader/dist/cjs.js","mtime":1545950603485},{"path":"/home/travis/build/csrdelft/csrdelft.nl/node_modules/babel-loader/lib/index.js","mtime":1545950603465},{"path":"/home/travis/build/csrdelft/csrdelft.nl/node_modules/eslint-loader/index.js","mtime":1545950602957}],"contextDependencies":[],"result":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.ajaxRequest = ajaxRequest;\nexports.ketzerAjax = ketzerAjax;\n\nvar _jquery = require('jquery');\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _modal = require('./modal');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * @see maalcie.js\n * @param {string} type\n * @param {string} url\n * @param {string} data\n * @param {jQuery} source\n * @param {function} onsuccess\n * @param {function|null} onerror\n * @param {function|null} onfinish\n */\nfunction ajaxRequest(type, url, data, source, onsuccess, onerror) {\n\tvar onfinish = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : null;\n\n\tif (source) {\n\t\tif (!source.hasClass('noanim')) {\n\t\t\t(0, _jquery2.default)(source).replaceWith('<img id=\"' + source.attr('id') + '\" title=\"' + url + '\" src=\"/images/loading-arrows.gif\" />');\n\t\t\tsource = (0, _jquery2.default)('img[title=\"' + url + '\"]');\n\t\t} else if (source.hasClass('InlineForm')) {\n\t\t\t(0, _jquery2.default)(source).find('.FormElement:first').css({\n\t\t\t\t'background-image': 'url(\"/images/loading-fb.gif\")',\n\t\t\t\t'background-repeat': 'no-repeat',\n\t\t\t\t'background-position': 'center right'\n\t\t\t});\n\t\t} else {\n\t\t\tsource.addClass('loading');\n\t\t}\n\t}\n\tvar contentType = 'application/x-www-form-urlencoded; charset=UTF-8';\n\tvar processData = true;\n\tif (data instanceof FormData) {\n\t\tcontentType = false;\n\t\tprocessData = false;\n\t}\n\t_jquery2.default.ajax({\n\t\ttype: type,\n\t\tcache: false,\n\t\tcontentType: contentType,\n\t\tprocessData: processData,\n\t\turl: url,\n\t\tdata: data\n\t}).done(function (data) {\n\t\tif (source) {\n\t\t\tif (!(0, _jquery2.default)(source).hasClass('noanim')) {\n\t\t\t\t(0, _jquery2.default)(source).hide();\n\t\t\t} else if ((0, _jquery2.default)(source).hasClass('InlineForm')) {\n\t\t\t\t(0, _jquery2.default)(source).find('.FormElement:first').css({\n\t\t\t\t\t'background-image': '',\n\t\t\t\t\t'background-repeat': '',\n\t\t\t\t\t'background-position': ''\n\t\t\t\t});\n\t\t\t}\n\t\t\tsource.removeClass('loading');\n\t\t}\n\t\tonsuccess(data);\n\t}).fail(function (data, textStatus, errorThrown) {\n\t\tif (errorThrown === '') {\n\t\t\terrorThrown = 'Nog bezig met laden!';\n\t\t}\n\t\tif (source) {\n\t\t\t(0, _jquery2.default)(source).replaceWith('<img title=\"' + errorThrown + '\" src=\"/plaetjes/famfamfam/cancel.png\" />');\n\t\t} else {\n\t\t\t(0, _modal.modalClose)();\n\t\t}\n\t\tif (onerror) {\n\t\t\tonerror(data.responseText);\n\t\t}\n\t}).always(function () {\n\t\tif (onfinish) {\n\t\t\tonfinish();\n\t\t}\n\t});\n}\n\n/**\n * @param url\n * @param ketzer\n * @returns {boolean}\n */\nfunction ketzerAjax(url, ketzer) {\n\t(0, _jquery2.default)(ketzer + ' .aanmelddata').html('Aangemeld:<br /><img src=\"/images/loading-arrows.gif\" />');\n\t_jquery2.default.ajax({\n\t\ttype: 'GET',\n\t\tcache: false,\n\t\turl: url,\n\t\tdata: ''\n\t}).done(function (data) {\n\t\t(0, _jquery2.default)(ketzer).replaceWith(data);\n\t}).fail(function (jqXHR, textStatus, errorThrown) {\n\t\t(0, _jquery2.default)(ketzer + ' .aanmelddata').html('<span class=\"error\">Error: </span>' + errorThrown);\n\t\talert(jqXHR.responseText);\n\t});\n\treturn true;\n}",{"version":3,"sources":["resources/assets/js/ajax.js"],"names":["ajaxRequest","ketzerAjax","type","url","data","source","onsuccess","onerror","onfinish","hasClass","replaceWith","attr","find","css","addClass","contentType","processData","FormData","$","ajax","cache","done","hide","removeClass","fail","textStatus","errorThrown","responseText","always","ketzer","html","jqXHR","alert"],"mappings":";;;;;QAagBA,W,GAAAA,W;QAqEAC,U,GAAAA,U;;AAlFhB;;;;AACA;;;;AAEA;;;;;;;;;;AAUO,SAASD,WAAT,CAAqBE,IAArB,EAA2BC,GAA3B,EAAgCC,IAAhC,EAAsCC,MAAtC,EAA8CC,SAA9C,EAAyDC,OAAzD,EAAmF;AAAA,KAAjBC,QAAiB,uEAAN,IAAM;;AACzF,KAAIH,MAAJ,EAAY;AACX,MAAI,CAACA,OAAOI,QAAP,CAAgB,QAAhB,CAAL,EAAgC;AAC/B,yBAAEJ,MAAF,EAAUK,WAAV,eAAkCL,OAAOM,IAAP,CAAY,IAAZ,CAAlC,iBAA+DR,GAA/D;AACAE,YAAS,sCAAgBF,GAAhB,QAAT;AACA,GAHD,MAIK,IAAIE,OAAOI,QAAP,CAAgB,YAAhB,CAAJ,EAAmC;AACvC,yBAAEJ,MAAF,EAAUO,IAAV,CAAe,oBAAf,EAAqCC,GAArC,CAAyC;AACxC,wBAAoB,+BADoB;AAExC,yBAAqB,WAFmB;AAGxC,2BAAuB;AAHiB,IAAzC;AAKA,GANI,MAME;AACNR,UAAOS,QAAP,CAAgB,SAAhB;AACA;AACD;AACD,KAAIC,cAAc,kDAAlB;AACA,KAAIC,cAAc,IAAlB;AACA,KAAIZ,gBAAgBa,QAApB,EAA8B;AAC7BF,gBAAc,KAAd;AACAC,gBAAc,KAAd;AACA;AACDE,kBAAEC,IAAF,CAAO;AACNjB,YADM;AAENkB,SAAO,KAFD;AAGNL,0BAHM;AAINC,0BAJM;AAKNb,UALM;AAMNC;AANM,EAAP,EAOGiB,IAPH,CAOQ,UAACjB,IAAD,EAAU;AACjB,MAAIC,MAAJ,EAAY;AACX,OAAI,CAAC,sBAAEA,MAAF,EAAUI,QAAV,CAAmB,QAAnB,CAAL,EAAmC;AAClC,0BAAEJ,MAAF,EAAUiB,IAAV;AACA,IAFD,MAGK,IAAI,sBAAEjB,MAAF,EAAUI,QAAV,CAAmB,YAAnB,CAAJ,EAAsC;AAC1C,0BAAEJ,MAAF,EAAUO,IAAV,CAAe,oBAAf,EAAqCC,GAArC,CAAyC;AACxC,yBAAoB,EADoB;AAExC,0BAAqB,EAFmB;AAGxC,4BAAuB;AAHiB,KAAzC;AAKA;AACDR,UAAOkB,WAAP,CAAmB,SAAnB;AACA;AACDjB,YAAUF,IAAV;AACA,EAtBD,EAsBGoB,IAtBH,CAsBQ,UAACpB,IAAD,EAAOqB,UAAP,EAAmBC,WAAnB,EAAmC;AAC1C,MAAIA,gBAAgB,EAApB,EAAwB;AACvBA,iBAAc,sBAAd;AACA;AACD,MAAIrB,MAAJ,EAAY;AACX,yBAAEA,MAAF,EAAUK,WAAV,CAAsB,iBAAiBgB,WAAjB,GAA+B,2CAArD;AACA,GAFD,MAGK;AACJ;AACA;AACD,MAAInB,OAAJ,EAAa;AACZA,WAAQH,KAAKuB,YAAb;AACA;AACD,EAnCD,EAmCGC,MAnCH,CAmCU,YAAM;AACf,MAAIpB,QAAJ,EAAc;AACbA;AACA;AACD,EAvCD;AAwCA;;AAED;;;;;AAKO,SAASP,UAAT,CAAoBE,GAApB,EAAyB0B,MAAzB,EAAiC;AACvC,uBAAEA,SAAS,eAAX,EAA4BC,IAA5B,CAAiC,0DAAjC;AACAZ,kBAAEC,IAAF,CAAO;AACNjB,QAAM,KADA;AAENkB,SAAO,KAFD;AAGNjB,OAAKA,GAHC;AAINC,QAAM;AAJA,EAAP,EAKGiB,IALH,CAKQ,UAACjB,IAAD,EAAU;AACjB,wBAAEyB,MAAF,EAAUnB,WAAV,CAAsBN,IAAtB;AACA,EAPD,EAOGoB,IAPH,CAOQ,UAACO,KAAD,EAAQN,UAAR,EAAoBC,WAApB,EAAoC;AAC3C,wBAAEG,SAAS,eAAX,EAA4BC,IAA5B,CAAiC,uCAAuCJ,WAAxE;AACAM,QAAMD,MAAMJ,YAAZ;AACA,EAVD;AAWA,QAAO,IAAP;AACA","file":"ajax.js","sourceRoot":"/home/travis/build/csrdelft/csrdelft.nl","sourcesContent":["import $ from 'jquery';\nimport {modalClose} from './modal';\n\n/**\n * @see maalcie.js\n * @param {string} type\n * @param {string} url\n * @param {string} data\n * @param {jQuery} source\n * @param {function} onsuccess\n * @param {function|null} onerror\n * @param {function|null} onfinish\n */\nexport function ajaxRequest(type, url, data, source, onsuccess, onerror, onfinish = null) {\n\tif (source) {\n\t\tif (!source.hasClass('noanim')) {\n\t\t\t$(source).replaceWith(`<img id=\"${source.attr('id')}\" title=\"${url}\" src=\"/images/loading-arrows.gif\" />`);\n\t\t\tsource = $(`img[title=\"${url}\"]`);\n\t\t}\n\t\telse if (source.hasClass('InlineForm')) {\n\t\t\t$(source).find('.FormElement:first').css({\n\t\t\t\t'background-image': 'url(\"/images/loading-fb.gif\")',\n\t\t\t\t'background-repeat': 'no-repeat',\n\t\t\t\t'background-position': 'center right',\n\t\t\t});\n\t\t} else {\n\t\t\tsource.addClass('loading');\n\t\t}\n\t}\n\tlet contentType = 'application/x-www-form-urlencoded; charset=UTF-8';\n\tlet processData = true;\n\tif (data instanceof FormData) {\n\t\tcontentType = false;\n\t\tprocessData = false;\n\t}\n\t$.ajax({\n\t\ttype,\n\t\tcache: false,\n\t\tcontentType,\n\t\tprocessData,\n\t\turl,\n\t\tdata,\n\t}).done((data) => {\n\t\tif (source) {\n\t\t\tif (!$(source).hasClass('noanim')) {\n\t\t\t\t$(source).hide();\n\t\t\t}\n\t\t\telse if ($(source).hasClass('InlineForm')) {\n\t\t\t\t$(source).find('.FormElement:first').css({\n\t\t\t\t\t'background-image': '',\n\t\t\t\t\t'background-repeat': '',\n\t\t\t\t\t'background-position': '',\n\t\t\t\t});\n\t\t\t}\n\t\t\tsource.removeClass('loading');\n\t\t}\n\t\tonsuccess(data);\n\t}).fail((data, textStatus, errorThrown) => {\n\t\tif (errorThrown === '') {\n\t\t\terrorThrown = 'Nog bezig met laden!';\n\t\t}\n\t\tif (source) {\n\t\t\t$(source).replaceWith('<img title=\"' + errorThrown + '\" src=\"/plaetjes/famfamfam/cancel.png\" />');\n\t\t}\n\t\telse {\n\t\t\tmodalClose();\n\t\t}\n\t\tif (onerror) {\n\t\t\tonerror(data.responseText);\n\t\t}\n\t}).always(() => {\n\t\tif (onfinish) {\n\t\t\tonfinish();\n\t\t}\n\t});\n}\n\n/**\n * @param url\n * @param ketzer\n * @returns {boolean}\n */\nexport function ketzerAjax(url, ketzer) {\n\t$(ketzer + ' .aanmelddata').html('Aangemeld:<br /><img src=\"/images/loading-arrows.gif\" />');\n\t$.ajax({\n\t\ttype: 'GET',\n\t\tcache: false,\n\t\turl: url,\n\t\tdata: '',\n\t}).done((data) => {\n\t\t$(ketzer).replaceWith(data);\n\t}).fail((jqXHR, textStatus, errorThrown) => {\n\t\t$(ketzer + ' .aanmelddata').html('<span class=\"error\">Error: </span>' + errorThrown);\n\t\talert(jqXHR.responseText);\n\t});\n\treturn true;\n}\n"]}]}